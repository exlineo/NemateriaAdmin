(self.webpackChunknemateria=self.webpackChunknemateria||[]).push([[103],{8103:function(e,t,n){"use strict";n.r(t),n.d(t,{IntranetModule:function(){return dn}});var i=n(8583),o=n(3679),c=n(2212),s=n(4655),r=n(6868),l=n(2340),a=n(7716),u=n(1841),g=n(6246);let d=(()=>{class e{constructor(e,t){this.http=e,this.notifServ=t,this.seriesCollec=[],this.notice={}}getNotices(){this.http.get(l.N.SERV+"notices").subscribe(e=>{this.noticesAll=e.map(e=>(e.metadonnees=e.metadonnees[0],e)),this.notifServ.notif("Notices charg\xe9es")},e=>{console.log(e),this.notifServ.notif("Erreur, les notices n'ont pu \xeatre r\xe9cup\xe9r\xe9es")})}getNoticesByCollec(e){this.noticesCollec=[],this.http.post(l.N.SERV+"notices/collection",e).subscribe(e=>{this.noticesCollec=Array.isArray(e[0].metadonnees)?e.map(e=>(e.metadonnees=e.metadonnees[0],e)):e,console.log(this.noticesCollec),this.getSeries(),this.notifServ.notif("Les notices ont \xe9t\xe9 r\xe9cup\xe9r\xe9es")},e=>{console.log(e),this.notifServ.notif("Erreur dans la r\xe9cup\xe9ration des notices")})}getNotice(e,t=!1){this.notice={},this.noticesCollec&&(this.notice=this.noticesCollec.find(t=>t._id===e)),this.noticesAll&&(this.notice=this.noticesAll.find(t=>t._id===e))}updateNotice(e,t){this.http.put(l.N.SERV+"notices/"+e,t).subscribe(e=>{console.log(e),this.notifServ.notif("Mise \xe0 jour de la notice effectu\xe9e")},e=>{console.log(e),this.notifServ.notif("Une erreur s'est produite dans l'enregistrement")})}supprNotice(e){this.http.delete(l.N.SERV+"notices/"+e).subscribe(e=>{console.log(e),this.notifServ.notif("La notice a \xe9t\xe9 supprim\xe9e")},e=>{console.log(e),this.notifServ.notif("Une erreur s'est produite dans l'enregistrement")})}getSeries(){this.seriesCollec=[]}}return e.\u0275fac=function(t){return new(t||e)(a.LFG(u.eN),a.LFG(g.g))},e.\u0275prov=a.Yz7({token:e,factory:e.\u0275fac,providedIn:"root"}),e})();class p{constructor(){this.fonds="inconnu",this.prefix=["oai_dc","oai_nema"]}}var f=n(9956),Z=n(6399);let h=(()=>{class e{constructor(e,t,n){this.http=e,this.notifServ=t,this.auth=n,console.log("Service des connexions"),this.getSets()}getSets(){this.http.get(l.N.SERV+"sets").subscribe(e=>{this.sets=e},e=>{console.log(e),this.notifServ.notif("Une erreur s'est produite dans l'enregistrement")})}getSet(e){for(let t of this.sets)t._id==e&&(this.set=t)}supprSet(e){this.http.delete(l.N.SERV+"sets/"+e).subscribe(t=>{this.sets.splice(this.sets.findIndex(t=>t._id==e),1)},e=>{console.log(e),this.notifServ.notif("Une erreur s'est produite dans l'enregistrement")})}majSet(e){this.http.put(l.N.SERV+"sets/"+e._id,e).subscribe(e=>{this.notifServ.notif("Le SET a \xe9t\xe9 mis \xe0 jour")},e=>{console.log(e),this.notifServ.notif("Une erreur s'est produite dans l'enregistrement")})}ajouteSet(e){this.http.post(l.N.SERV+"sets",e).subscribe(e=>{console.log(e),this.notifServ.notif("Le SET a \xe9t\xe9 ajout\xe9")},e=>{console.log(e),this.notifServ.notif("Une erreur s'est produite dans l'enregistrement")})}getFonds(e){this.http.get(l.N.SERV+"sets/"+e).subscribe(e=>{console.log(e),this.notifServ.notif("La liste des fonds a \xe9t\xe9 obtenue")},e=>{console.log(e),this.notifServ.notif("Une erreur s'est produite dans l'enregistrement")})}}return e.\u0275fac=function(t){return new(t||e)(a.LFG(u.eN),a.LFG(g.g),a.LFG(Z.e))},e.\u0275prov=a.Yz7({token:e,factory:e.\u0275fac,providedIn:"root"}),e})();var m=n(3192);let A=(()=>{class e{constructor(e,t,n,i,o,c){this.http=e,this.notifServ=t,this.utils=n,this.filtreServ=i,this.setServ=o,this.auth=c,this.dir="",this.load=!1,this.init(),this.getListeDossiers()}init(){this.filtre=[],this.set=new p,this.metas=null,this.dir=""}getListeDossiers(){this.http.get(l.N.SERV+"scans").subscribe(e=>{this.listeDossiers=e,this.notifServ.notif("Liste des dossiers r\xe9cup\xe9r\xe9e")},e=>{this.notifServ.notif("Nous n'avons pas la liste des dossiers")})}getMetaFiles(e,t){this.http.get(l.N.SERV+"scans/"+e,{params:{f:t}}).subscribe(e=>{this.scans=e.data,this.notifServ.notif("Metadonn\xe9es scann\xe9es")},e=>{this.notifServ.notif("Les donn\xe9es n'ont pu \xeatre scann\xe9es")})}getDir(e){this.scans=null,this.load=!0,this.dir=e,this.http.get(l.N.SERV+"scans/"+e).subscribe(e=>{this.scans=e.data,this.load=!1,this.notifServ.notif("Metadonn\xe9es scann\xe9es")},e=>{this.notifServ.notif("Erreur dans le scan des dossiers du serveur")})}setMetas(e,t){this.auth.userAuth.statut>=2&&(this.metas=e.metadonnees,this.set=t,this.set.documents=[],this.set.documents=this.scans.map(e=>this.filtreAPlat(e)),this.enregistreSet())}filtreAPlat(e){let t={};for(let n in this.metas)if("object"!=typeof this.metas[n]||Array.isArray(this.metas[n]))this.setPropriete(n,t,e);else{t[n]={};for(let i in this.metas[n])if("object"!=typeof this.metas[n][i]||Array.isArray(this.metas[n][i]))this.setPropriete(i,t[n],e);else{t[n][i]={};for(let o in this.metas[n][i])this.setPropriete(o,t[n][i],e)}}return e.identifier||(t.dublincore.identifier=e.identifiant_unique?"oai:nemateria.net/"+e.identifiant_unique:"oai:nemateria.net/"+Date.now()),e.date||(t.dublincore.date=e.date_creation_original?e.date_creation_original:Date.now()),t.dublincore.format=this.utils.setFormat(e.SourceFile.slice(e.SourceFile.lastIndexOf(".")+1,e.SourceFile.length)),!this.set.prefix||(t.prefix=this.set.prefix),t}setPropriete(e,t,n){let i=this.cap(e);console.log(i,n[i]),"url"===e.toLowerCase()&&(n[i]=this.setURL(n.SourceFile)),"coverage"===e.toLowerCase()&&n[i]&&(n[i]=this.setURL(n[i])),"file"===e&&(n[i]=this.setFile(n.SourceFile)),n.hasOwnProperty(i)&&(t[e]=n[i])}enregistreSet(){this.http.post(l.N.SERV+"sets/",this.set).subscribe(e=>{this.setServ.getSets(),this.notifServ.notif("SET enregistr\xe9")},e=>{this.notifServ.notif("Erreur dans l'enregistrement du SET")})}cap(e){return e.charAt(0).toUpperCase()+e.slice(1)}setURL(e){return-1!=e.indexOf(l.N.DIR)&&(e=e.slice(e.lastIndexOf("/")+1,e.length)),l.N.ADR+l.N.DIR+this.dir+"/"+e}setFile(e){return e.substr(e.lastIndexOf("/")+1,e.length)}}return e.\u0275fac=function(t){return new(t||e)(a.LFG(u.eN),a.LFG(g.g),a.LFG(m.F),a.LFG(f.s),a.LFG(h),a.LFG(Z.e))},e.\u0275prov=a.Yz7({token:e,factory:e.\u0275fac,providedIn:"root"}),e})();var q=n(1436),T=n(6627);let _=(()=>{class e{constructor(e){this.authServ=e}ngOnInit(){}toggleActif(e){}}return e.\u0275fac=function(t){return new(t||e)(a.Y36(Z.e))},e.\u0275cmp=a.Xpm({type:e,selectors:[["app-sidenav"]],decls:49,vars:0,consts:[[1,"logo"],["href","","routerLink","/intranet","title","Nemateria || Valorisation de collections num\xe9ris\xe9es"],["src","./assets/img/Logo_Nemateria_v.png","alt","Nemateria || Valorisation de collections num\xe9ris\xe9es"],["routerLinkActive","active","routerLink","/intranet","matTooltip","Retourner \xe0 l'accueil"],["routerLinkActive","active","routerLink","/intranet/collections","matTooltip","Acc\xe9der aux collections"],["routerLinkActive","active","routerLink","/intranet/notices","matTooltip","Acc\xe9der aux notices"],["routerLinkActive","active","routerLink","/intranet/scanner","matTooltip","Scanner les dossiers pour constituer des collections"],["routerLinkActive","active","routerLink","/intranet/sets","matTooltip","Liste des SETS et fonds"],["routerLinkActive","active","routerLink","/intranet/filtres","matTooltip","Cr\xe9er des filtres dans les donn\xe9es"],["routerLinkActive","active","routerLink","/intranet/mappages","matTooltip","Mapper les donn\xe9es pour un moissonnage futur"],[1,"settings"],["routerLinkActive","active","matTooltip","Se d\xe9connecter",3,"click"],["routerLinkActive","active","routerLink","/intranet/profil","matTooltip","Acc\xe9der \xe0 mon profil"],["routerLinkActive","active","routerLink","/intranet/aide","matTooltip","Un peu d'aide ?"],["routerLinkActive","active","routerLink","/intranet/parametres","matTooltip","Votre profil et vos param\xe8tres"]],template:function(e,t){1&e&&(a.TgZ(0,"header",0),a.TgZ(1,"a",1),a._UZ(2,"img",2),a.qZA(),a.qZA(),a.TgZ(3,"nav"),a.TgZ(4,"ul"),a._UZ(5,"hr"),a.TgZ(6,"li"),a.TgZ(7,"a",3),a.TgZ(8,"mat-icon"),a._uU(9,"dashboard"),a.qZA(),a.qZA(),a.qZA(),a.TgZ(10,"li"),a.TgZ(11,"a",4),a.TgZ(12,"mat-icon"),a._uU(13,"collections"),a.qZA(),a.qZA(),a.qZA(),a.TgZ(14,"li"),a.TgZ(15,"a",5),a.TgZ(16,"mat-icon"),a._uU(17,"burst_mode"),a.qZA(),a.qZA(),a.qZA(),a._UZ(18,"hr"),a.TgZ(19,"li"),a.TgZ(20,"a",6),a.TgZ(21,"mat-icon"),a._uU(22,"scanner"),a.qZA(),a.qZA(),a.qZA(),a.TgZ(23,"li"),a.TgZ(24,"a",7),a.TgZ(25,"mat-icon"),a._uU(26,"all_inbox"),a.qZA(),a.qZA(),a.qZA(),a.TgZ(27,"li"),a.TgZ(28,"a",8),a.TgZ(29,"mat-icon"),a._uU(30,"photo_filter"),a.qZA(),a.qZA(),a.qZA(),a.TgZ(31,"li"),a.TgZ(32,"a",9),a.TgZ(33,"mat-icon"),a._uU(34,"explore_off"),a.qZA(),a.qZA(),a.qZA(),a._UZ(35,"hr"),a.qZA(),a.qZA(),a.TgZ(36,"section",10),a.TgZ(37,"a",11),a.NdJ("click",function(){return t.authServ.deconnexion()}),a.TgZ(38,"mat-icon"),a._uU(39,"remove_circle_outline"),a.qZA(),a.qZA(),a.TgZ(40,"a",12),a.TgZ(41,"mat-icon"),a._uU(42,"account_circle"),a.qZA(),a.qZA(),a.TgZ(43,"a",13),a.TgZ(44,"mat-icon"),a._uU(45,"help_outline"),a.qZA(),a.qZA(),a.TgZ(46,"a",14),a.TgZ(47,"mat-icon"),a._uU(48,"settings"),a.qZA(),a.qZA(),a.qZA())},directives:[s.yS,s.Od,q.gM,T.Hw],styles:['nav[_ngcontent-%COMP%]{margin:auto 0}nav[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]{display:flex;flex-direction:column;margin:0;padding:0}nav[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]{margin:0 auto 8px;background-color:#fff;list-style:none}nav[_ngcontent-%COMP%]   li[_ngcontent-%COMP%], nav[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{width:48px;height:48px}nav[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{color:#000;display:flex;transition:all .3s ease}nav[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]:hover{background-color:#ffd600}nav[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]{margin:auto;display:block}.active[_ngcontent-%COMP%]{background-color:#eb974e}header.logo[_ngcontent-%COMP%]{width:100%;margin:15px 0;min-height:10vh}header.logo[_ngcontent-%COMP%]:hover{text-shadow:0 0 5px #000}.logo[_ngcontent-%COMP%]{display:flex;width:100%;font-size:8px;color:#ffd600}.logo[_ngcontent-%COMP%]   *[_ngcontent-%COMP%]{box-sizing:padding-box}.logo[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:100%}.logo[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{color:#ffd600;margin:auto}.logo[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]:nth-child(2){margin:auto;width:100%;line-height:75px}.logo[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{margin:auto;width:100%;text-align:center;line-height:.8em;font-family:Lora,Arial,sans-serif;font-size:14px}.logo[_ngcontent-%COMP%]   h5[_ngcontent-%COMP%]{line-height:.5em;font-weight:400}.logo[_ngcontent-%COMP%]   .square[_ngcontent-%COMP%]{height:40px;width:40px;overflow:hidden;content:"";position:absolute;margin-left:40px;margin-top:9px;transform:rotate(45deg);transform-origin:0 0}.logo[_ngcontent-%COMP%]   .square[_ngcontent-%COMP%]:after, .logo[_ngcontent-%COMP%]   .square[_ngcontent-%COMP%]:before, .logo[_ngcontent-%COMP%]   .square[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]:after, .logo[_ngcontent-%COMP%]   .square[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]:before{background-color:#ffd600;position:absolute;content:"";display:block;transition:all .4s ease-in-out}.logo[_ngcontent-%COMP%]   .square[_ngcontent-%COMP%]:after, .logo[_ngcontent-%COMP%]   .square[_ngcontent-%COMP%]:before{height:2px;width:40%}.logo[_ngcontent-%COMP%]   .square[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]:after, .logo[_ngcontent-%COMP%]   .square[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]:before{width:2px;height:40%}.logo[_ngcontent-%COMP%]   .square[_ngcontent-%COMP%]:before, .logo[_ngcontent-%COMP%]   .square[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]:before{left:0;top:0}.logo[_ngcontent-%COMP%]   .square[_ngcontent-%COMP%]:after, .logo[_ngcontent-%COMP%]   .square[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]:after{bottom:0;right:0}.settings[_ngcontent-%COMP%]{position:absolute;bottom:0;padding:10px;width:100%;display:flex;flex-flow:column nowrap;justify-content:space-between;color:#fff}.settings[_ngcontent-%COMP%] > *[_ngcontent-%COMP%]{margin:auto}.settings[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]{color:#fff}']}),e})(),x=(()=>{class e{constructor(e,t,n){this.colServ=e,this.noticesServ=t,this.scanServ=n}ngOnInit(){}}return e.\u0275fac=function(t){return new(t||e)(a.Y36(r.a),a.Y36(d),a.Y36(A))},e.\u0275cmp=a.Xpm({type:e,selectors:[["app-interface"]],decls:5,vars:0,template:function(e,t){1&e&&(a.TgZ(0,"main"),a.TgZ(1,"section"),a._UZ(2,"app-sidenav"),a.qZA(),a.TgZ(3,"section"),a._UZ(4,"router-outlet"),a.qZA(),a.qZA())},directives:[_,s.lC],styles:["main[_ngcontent-%COMP%]{display:inline-flex}section[_ngcontent-%COMP%]:first-child{width:90px;background-color:#304753}section[_ngcontent-%COMP%]:nth-child(2){width:calc(100% - 90px);height:100vh;flex-flow:column nowrap}app-sidenav[_ngcontent-%COMP%]{position:relative}"]}),e})();var v=n(9075);function M(e,t){if(1&e&&(a.TgZ(0,"p"),a._UZ(1,"img",3),a.qZA()),2&e){const e=a.oxw();a.xp6(1),a.Q6J("src",e.noticeServ.notice.metadonnees.media.url,a.LSH)}}function C(e,t){if(1&e&&(a.TgZ(0,"p",4),a.TgZ(1,"video",5),a._UZ(2,"source",6),a.qZA(),a.qZA()),2&e){const e=a.oxw();a.xp6(2),a.Q6J("src",e.noticeServ.notice.metadonnees.media.url,a.LSH)("type",e.noticeServ.notice.metadonnees.dublincore.format)}}function O(e,t){if(1&e&&(a.TgZ(0,"p",4),a._UZ(1,"source",6),a.qZA()),2&e){const e=a.oxw();a.xp6(1),a.Q6J("src",e.noticeServ.notice.metadonnees.media.url,a.LSH)("type",e.noticeServ.notice.metadonnees.dublincore.format)}}function N(e,t){if(1&e&&(a.TgZ(0,"p"),a._UZ(1,"iframe",3),a.qZA()),2&e){const e=a.oxw();a.xp6(1),a.Q6J("src",e.dom.bypassSecurityTrustResourceUrl(e.noticeServ.notice.metadonnees.media.url),a.uOi)}}function S(e,t){if(1&e&&(a.TgZ(0,"span"),a.TgZ(1,"strong"),a._uU(2),a.qZA(),a._uU(3),a.qZA()),2&e){const e=a.oxw().$implicit;a.xp6(2),a.Oqu(e.key),a.xp6(1),a.hij(" : ",e.value," ")}}function U(e,t){if(1&e&&(a.TgZ(0,"span"),a.TgZ(1,"strong"),a._uU(2),a.qZA(),a._uU(3),a.qZA()),2&e){const e=a.oxw().$implicit;a.xp6(2),a.Oqu(e.key),a.xp6(1),a.hij(" : ",e.value," ")}}function J(e,t){if(1&e&&(a.TgZ(0,"span"),a.TgZ(1,"strong"),a._uU(2),a.qZA(),a._uU(3),a.qZA()),2&e){const e=a.oxw().$implicit;a.xp6(2),a.Oqu(e.key),a.xp6(1),a.hij(" : ",e.value," ")}}function b(e,t){if(1&e&&(a.TgZ(0,"li"),a.TgZ(1,"strong"),a._uU(2),a.qZA(),a._uU(3),a.qZA()),2&e){const e=t.$implicit;a.xp6(2),a.Oqu(e.key),a.xp6(1),a.hij(" : ",e.value," ")}}function k(e,t){if(1&e&&(a.TgZ(0,"strong"),a._uU(1),a.qZA(),a.TgZ(2,"ul"),a.YNc(3,b,4,2,"li",7),a.ALo(4,"keyvalue"),a.qZA()),2&e){const e=a.oxw().$implicit;a.xp6(1),a.Oqu(e.key),a.xp6(2),a.Q6J("ngForOf",a.lcZ(4,2,e.value))}}function w(e,t){if(1&e&&(a.TgZ(0,"li"),a.YNc(1,J,4,2,"span",8),a.YNc(2,k,5,4,"ng-template",null,11,a.W1O),a.qZA()),2&e){const e=t.$implicit,n=a.MAs(3),i=a.oxw(6);a.xp6(1),a.Q6J("ngIf","object"!==i.utils.typeOf(e.value))("ngIfElse",n)}}function P(e,t){if(1&e&&(a.TgZ(0,"strong"),a._uU(1),a.qZA(),a.TgZ(2,"ul"),a.YNc(3,w,4,2,"li",7),a.ALo(4,"keyvalue"),a.qZA()),2&e){const e=a.oxw().$implicit;a.xp6(1),a.Oqu(e.key),a.xp6(2),a.Q6J("ngForOf",a.lcZ(4,2,e.value))}}function F(e,t){if(1&e&&(a.TgZ(0,"li"),a.YNc(1,U,4,2,"span",8),a.YNc(2,P,5,4,"ng-template",null,10,a.W1O),a.qZA()),2&e){const e=t.$implicit,n=a.MAs(3),i=a.oxw(4);a.xp6(1),a.Q6J("ngIf","object"!==i.utils.typeOf(e.value))("ngIfElse",n)}}function y(e,t){if(1&e&&(a.TgZ(0,"strong"),a._uU(1),a.qZA(),a.TgZ(2,"ul"),a.YNc(3,F,4,2,"li",7),a.ALo(4,"keyvalue"),a.qZA()),2&e){const e=a.oxw().$implicit;a.xp6(1),a.Oqu(e.key),a.xp6(2),a.Q6J("ngForOf",a.lcZ(4,2,e.value))}}function Q(e,t){if(1&e&&(a.TgZ(0,"li"),a.YNc(1,S,4,2,"span",8),a.YNc(2,y,5,4,"ng-template",null,9,a.W1O),a.qZA()),2&e){const e=t.$implicit,n=a.MAs(3),i=a.oxw(2);a.xp6(1),a.Q6J("ngIf","object"!==i.utils.typeOf(e.value))("ngIfElse",n)}}function Y(e,t){if(1&e&&(a.TgZ(0,"article"),a.TgZ(1,"ul"),a.YNc(2,Q,4,2,"li",7),a.ALo(3,"keyvalue"),a.qZA(),a.qZA()),2&e){const e=a.oxw();a.xp6(2),a.Q6J("ngForOf",a.lcZ(3,1,e.noticeServ.notice))}}let I=(()=>{class e{constructor(e,t,n,i){this.noticeServ=e,this.utils=t,this.dom=n,this.auth=i,this.fermer=new a.vpe,this.update=!1,this.noticeServ.getNotice(this.idNotice)}ngOnInit(){console.log(this.idNotice),this.noticeServ.getNotice(this.idNotice);try{this.noticeServ.getNotice(this.idNotice),console.log("try")}catch(e){this.update=!0,this.noticeServ.notice={}}console.log(this.noticeServ.notice)}ngOnDestroy(){this.noticeServ.notice={}}}return e.\u0275fac=function(t){return new(t||e)(a.Y36(d),a.Y36(m.F),a.Y36(v.H7),a.Y36(Z.e))},e.\u0275cmp=a.Xpm({type:e,selectors:[["app-notice"]],inputs:{idNotice:"idNotice"},outputs:{fermer:"fermer"},decls:11,vars:6,consts:[[3,"click"],[4,"ngIf"],["class","media",4,"ngIf"],[3,"src"],[1,"media"],["controls",""],[3,"src","type"],[4,"ngFor","ngForOf"],[4,"ngIf","ngIfElse"],["elseBlockN",""],["elseObjM",""],["elseBlockL",""]],template:function(e,t){1&e&&(a.TgZ(0,"section"),a.TgZ(1,"mat-icon",0),a.NdJ("click",function(){return t.fermer.emit(!1)}),a._uU(2,"close"),a.qZA(),a.TgZ(3,"header"),a.TgZ(4,"h1"),a._uU(5),a.qZA(),a.YNc(6,M,2,1,"p",1),a.YNc(7,C,3,2,"p",2),a.YNc(8,O,2,2,"p",2),a.YNc(9,N,2,1,"p",1),a.qZA(),a.YNc(10,Y,4,3,"article",1),a.qZA()),2&e&&(a.xp6(5),a.Oqu(t.noticeServ.notice.metadonnees.dublincore.title),a.xp6(1),a.Q6J("ngIf",t.noticeServ.notice.metadonnees.dublincore.format&&-1!=t.noticeServ.notice.metadonnees.dublincore.format.indexOf("image")),a.xp6(1),a.Q6J("ngIf",t.noticeServ.notice.metadonnees.dublincore.format&&-1!=t.noticeServ.notice.metadonnees.dublincore.format.indexOf("video")),a.xp6(1),a.Q6J("ngIf",t.noticeServ.notice.metadonnees.dublincore.format&&-1!=t.noticeServ.notice.metadonnees.dublincore.format.indexOf("audio")),a.xp6(1),a.Q6J("ngIf",t.noticeServ.notice.metadonnees.dublincore.format&&-1!=t.noticeServ.notice.metadonnees.dublincore.format.indexOf("application")),a.xp6(1),a.Q6J("ngIf",!t.update))},directives:[T.Hw,i.O5,i.sg],pipes:[i.Nd],styles:["section[_ngcontent-%COMP%]{padding:10px 20px;flex-flow:row wrap}section[_ngcontent-%COMP%]   article[_ngcontent-%COMP%], section[_ngcontent-%COMP%]   header[_ngcontent-%COMP%]{width:100%}section[_ngcontent-%COMP%]   header[_ngcontent-%COMP%]{display:flex}section[_ngcontent-%COMP%]   header[_ngcontent-%COMP%] > *[_ngcontent-%COMP%]{margin:auto}h1[_ngcontent-%COMP%], section[_ngcontent-%COMP%]   header[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{width:100%}h1[_ngcontent-%COMP%]{padding:10px;text-align:center}audio[_ngcontent-%COMP%], video[_ngcontent-%COMP%]{max-width:100%}iframe[_ngcontent-%COMP%]{width:100%;min-height:500px}"]}),e})();var E=n(9319);let L=(()=>{class e{constructor(){}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275prov=a.Yz7({token:e,factory:e.\u0275fac,providedIn:"root"}),e})();var j=n(171),$=n(4885);function H(e,t){if(1&e){const e=a.EpF();a.TgZ(0,"li",26),a.NdJ("click",function(){const t=a.CHM(e).$implicit;return a.oxw().scanOnClick(t)}),a._uU(1),a.qZA()}if(2&e){const e=t.$implicit;a.xp6(1),a.hij(" ",e," ")}}function D(e,t){if(1&e){const e=a.EpF();a.TgZ(0,"p"),a.TgZ(1,"button",26),a.NdJ("click",function(){return a.CHM(e),a.oxw().extraitSet()}),a._uU(2,"Extraire le sch\xe9ma des donn\xe9es pour un mappage"),a.qZA(),a.qZA()}}function z(e,t){if(1&e&&(a.TgZ(0,"span"),a.TgZ(1,"strong"),a._uU(2),a.qZA(),a._uU(3),a.qZA()),2&e){const e=a.oxw().$implicit;a.xp6(2),a.Oqu(e.key),a.xp6(1),a.hij(" : ",e.value," ")}}function V(e,t){if(1&e&&(a.TgZ(0,"span"),a.TgZ(1,"strong"),a._uU(2),a.qZA(),a._uU(3),a.qZA()),2&e){const e=a.oxw().$implicit;a.xp6(2),a.Oqu(e.key),a.xp6(1),a.hij(" : ",e.value," ")}}function R(e,t){if(1&e&&(a.TgZ(0,"li"),a.TgZ(1,"strong"),a._uU(2),a.qZA(),a._uU(3),a.qZA()),2&e){const e=t.$implicit;a.xp6(2),a.Oqu(e.key),a.xp6(1),a.hij(" : ",e.value," ")}}function B(e,t){if(1&e&&(a.TgZ(0,"strong"),a._uU(1),a.qZA(),a.TgZ(2,"ul"),a.YNc(3,R,4,2,"li",3),a.ALo(4,"keyvalue"),a.qZA()),2&e){const e=a.oxw().$implicit;a.xp6(1),a.Oqu(e.key),a.xp6(2),a.Q6J("ngForOf",a.lcZ(4,2,e.value))}}function X(e,t){if(1&e&&(a.TgZ(0,"li"),a.YNc(1,V,4,2,"span",27),a.YNc(2,B,5,4,"ng-template",null,29,a.W1O),a.qZA()),2&e){const e=t.$implicit,n=a.MAs(3),i=a.oxw(4);a.xp6(1),a.Q6J("ngIf","object"!==i.utils.typeOf(e.value))("ngIfElse",n)}}function G(e,t){if(1&e&&(a.TgZ(0,"strong"),a._uU(1),a.qZA(),a.TgZ(2,"ul"),a.YNc(3,X,4,2,"li",3),a.ALo(4,"keyvalue"),a.qZA()),2&e){const e=a.oxw().$implicit;a.xp6(1),a.Oqu(e.key),a.xp6(2),a.Q6J("ngForOf",a.lcZ(4,2,e.value))}}function W(e,t){if(1&e&&(a.TgZ(0,"li"),a.YNc(1,z,4,2,"span",27),a.YNc(2,G,5,4,"ng-template",null,28,a.W1O),a.qZA()),2&e){const e=t.$implicit,n=a.MAs(3),i=a.oxw(2);a.xp6(1),a.Q6J("ngIf","object"!==i.utils.typeOf(e.value))("ngIfElse",n)}}function K(e,t){if(1&e&&(a.TgZ(0,"mat-expansion-panel"),a.TgZ(1,"mat-expansion-panel-header"),a.TgZ(2,"mat-panel-title"),a._uU(3),a.qZA(),a.qZA(),a.TgZ(4,"ul"),a.YNc(5,W,4,2,"li",3),a.ALo(6,"keyvalue"),a.qZA(),a.qZA()),2&e){const e=t.$implicit;a.xp6(3),a.AsE(" ",e.Title," (",e.Identifiant_unique,") "),a.xp6(2),a.Q6J("ngForOf",a.lcZ(6,3,e))}}function ee(e,t){if(1&e){const e=a.EpF();a.TgZ(0,"div",30),a.TgZ(1,"button",31),a.NdJ("click",function(){return a.CHM(e),a.oxw().pagine(-20)}),a._uU(2,"<"),a.qZA(),a.TgZ(3,"button",31),a.NdJ("click",function(){return a.CHM(e),a.oxw().pagine(20)}),a._uU(4,">"),a.qZA(),a.qZA()}if(2&e){const e=a.oxw();a.xp6(1),a.Q6J("disabled",e.page.min<20),a.xp6(2),a.Q6J("disabled",e.page.max>e.scanServ.scans.length-20)}}function te(e,t){if(1&e&&(a.TgZ(0,"option",32),a._uU(1),a.qZA()),2&e){const e=t.$implicit;a.Q6J("value",e._id),a.xp6(1),a.AsE("",e.titre," (",e.createur,")")}}function ne(e,t){if(1&e&&(a.TgZ(0,"h4"),a._uU(1),a.qZA()),2&e){const e=a.oxw();a.xp6(1),a.hij("Filtre s\xe9lectionn\xe9 : ",e.filtreChoisi.titre,"")}}function ie(e,t){if(1&e&&(a.TgZ(0,"p"),a._uU(1),a.qZA()),2&e){const e=a.oxw();a.xp6(1),a.hij("Cr\xe9ateur : ",e.filtreChoisi.createur,"")}}function oe(e,t){if(1&e&&(a.TgZ(0,"li"),a._uU(1),a.qZA()),2&e){const e=t.$implicit;a.xp6(1),a.AsE("",e.key," (",e.value,")")}}function ce(e,t){if(1&e&&(a.TgZ(0,"ul"),a.YNc(1,oe,2,2,"li",3),a.ALo(2,"keyvalue"),a.qZA()),2&e){const e=a.oxw().$implicit;a.xp6(1),a.Q6J("ngForOf",a.lcZ(2,1,e.value))}}function se(e,t){if(1&e&&(a.TgZ(0,"span"),a._uU(1),a.qZA()),2&e){const e=a.oxw().$implicit;a.xp6(1),a.hij("(",e.value,")")}}function re(e,t){if(1&e&&(a.TgZ(0,"li"),a._uU(1),a.YNc(2,ce,3,3,"ul",2),a.YNc(3,se,2,1,"span",2),a.qZA()),2&e){const e=t.$implicit,n=a.oxw(3);a.xp6(1),a.hij("",e.key," "),a.xp6(1),a.Q6J("ngIf","object"!==n.utils.typeOf(e.value)),a.xp6(1),a.Q6J("ngIf","object"===n.utils.typeOf(e.value))}}function le(e,t){if(1&e&&(a.TgZ(0,"ul"),a.YNc(1,re,4,3,"li",3),a.ALo(2,"keyvalue"),a.qZA()),2&e){const e=a.oxw().$implicit;a.xp6(1),a.Q6J("ngForOf",a.lcZ(2,1,e.value))}}function ae(e,t){if(1&e&&(a.TgZ(0,"span"),a._uU(1),a.qZA()),2&e){const e=a.oxw().$implicit;a.xp6(1),a.Oqu(e.value)}}function ue(e,t){if(1&e&&(a.TgZ(0,"li"),a._uU(1),a.YNc(2,le,3,3,"ul",2),a.YNc(3,ae,2,1,"span",2),a.qZA()),2&e){const e=t.$implicit,n=a.oxw();a.xp6(1),a.hij(" ",e.key," : "),a.xp6(1),a.Q6J("ngIf","object"!==n.utils.typeOf(e.value)),a.xp6(1),a.Q6J("ngIf","object"===n.utils.typeOf(e.value))}}function ge(e,t){1&e&&(a.TgZ(0,"section",33),a.TgZ(1,"article"),a.TgZ(2,"h2"),a._uU(3,"Scan des donn\xe9es"),a.qZA(),a._UZ(4,"mat-progress-spinner",34),a.qZA(),a.qZA())}let de=(()=>{class e{constructor(e,t,n,i,o,c){this.scanServ=e,this.filtresServ=t,this.mapServ=n,this.utils=i,this.router=o,this.auth=c}ngOnInit(){this.set=new p,this.set.date=Date.now(),this.filtreChoisi=new E.F,this.page={min:0,max:20}}scanOnClick(e){this.set.titre=e,this.set.alias=e.toLowerCase(),this.set.origine={dir:l.N.DIR+e,url:l.N.SERV},this.scanServ.getDir(e)}extraitSet(){this.mapServ.set.documents=this.scanServ.scans[0],this.router.navigateByUrl("/intranet/mappages")}choixFiltre(){this.filtreChoisi=this.filtresServ.filtres.find(e=>e._id==this._idFiltre),console.log(this.filtreChoisi)}creeSet(e){console.log(e.value),this.scanServ.setMetas(this.filtreChoisi,this.set)}pagine(e){this.page.min+=e,this.page.max+=e,console.log(this.page)}ngOnDestroy(){this.scanServ.scans=[]}}return e.\u0275fac=function(t){return new(t||e)(a.Y36(A),a.Y36(f.s),a.Y36(L),a.Y36(m.F),a.Y36(s.F0),a.Y36(Z.e))},e.\u0275cmp=a.Xpm({type:e,selectors:[["app-scanner"]],decls:74,vars:24,consts:[[1,"screen","triple"],[3,"click",4,"ngFor","ngForOf"],[4,"ngIf"],[4,"ngFor","ngForOf"],["class","flex justify-center",4,"ngIf"],[3,"ngSubmit"],["setfiltre","ngForm"],["for","fil"],["name","fil","required","",3,"ngModel","ngModelChange","change"],["ctlfil","ngModel"],["value","null"],[3,"value",4,"ngFor","ngForOf"],["for","titre"],["name","titre","placeholder","Le titre qui appara\xeetra dans l'adminitration","required","",3,"ngModel","ngModelChange"],["for","alias"],["name","alias","type","text","placeholder","Sans espaces, ni majuscules, ni caract\xe8res sp\xe9ciaux","required","",3,"ngModel","ngModelChange"],["for","fonds"],["name","fonds","type","text","placeholder","Saisissez le nom du fonds","required","",3,"ngModel","ngModelChange"],["for","desc"],["name","desc","placeholder","Donnez des informations g\xe9n\xe9rales sur le SET",3,"ngModel","ngModelChange"],["for","createur"],["name","createur","placeholder","Nom de la ou des personne(s)",3,"ngModel","ngModelChange"],["for","gestion"],["name","gestion","placeholder","Organiation et/ou personne(s) g\xe9rant le SET",3,"ngModel","ngModelChange"],[3,"disabled"],["class","pop-up",4,"ngIf"],[3,"click"],[4,"ngIf","ngIfElse"],["elseObjM",""],["elseBlockL",""],[1,"flex","justify-center"],[3,"disabled","click"],[3,"value"],[1,"pop-up"],["mode","indeterminate"]],template:function(e,t){if(1&e){const e=a.EpF();a.TgZ(0,"section",0),a.TgZ(1,"aside"),a.TgZ(2,"header"),a.TgZ(3,"h1"),a._uU(4,"Sets de donn\xe9es"),a.qZA(),a.TgZ(5,"h2"),a._uU(6,"Liste des dossiers de votre serveur"),a.qZA(),a._UZ(7,"hr"),a.TgZ(8,"p"),a._uU(9,"En cliquant sur un dossier vous pourrez afficher les m\xe9tadonn\xe9es des fichiers qu'il contient pour en v\xe9rifier la qualit\xe9"),a.qZA(),a.qZA(),a.TgZ(10,"ul"),a.YNc(11,H,2,1,"li",1),a.qZA(),a.qZA(),a.TgZ(12,"section"),a.TgZ(13,"header"),a.TgZ(14,"h2"),a._uU(15,"M\xe9tadonn\xe9es"),a.qZA(),a._UZ(16,"hr"),a.TgZ(17,"p"),a._uU(18,"Liste des m\xe9tadonn\xe9es scann\xe9es dans le dossier s\xe9lectionn\xe9"),a.qZA(),a.YNc(19,D,3,0,"p",2),a.qZA(),a._UZ(20,"hr"),a.TgZ(21,"mat-accordion"),a.YNc(22,K,7,5,"mat-expansion-panel",3),a.ALo(23,"slice"),a.qZA(),a._UZ(24,"hr"),a.YNc(25,ee,5,2,"div",4),a.qZA(),a.TgZ(26,"aside"),a.TgZ(27,"header"),a.TgZ(28,"h2"),a._uU(29,"Appliquer un filtre aux donn\xe9es"),a.qZA(),a._UZ(30,"hr"),a.TgZ(31,"p"),a._uU(32,"Choisissez une filtre dans la liste ci-dessous, v\xe9rifiez le r\xe9sulat et cliquez sur 'enregistrer les donn\xe9es filtr\xe9es' pour les stocker formatt\xe9es dans la base."),a.qZA(),a.qZA(),a.TgZ(33,"article"),a.TgZ(34,"form",5,6),a.NdJ("ngSubmit",function(){a.CHM(e);const n=a.MAs(35);return t.creeSet(n)}),a.TgZ(36,"label",7),a._uU(37,"Choissez un filtre pour les donn\xe9es *"),a.qZA(),a.TgZ(38,"select",8,9),a.NdJ("ngModelChange",function(e){return t._idFiltre=e})("change",function(){return t.choixFiltre()}),a.TgZ(40,"option",10),a._uU(41,"--------------"),a.qZA(),a.YNc(42,te,2,3,"option",11),a.qZA(),a.TgZ(43,"label",12),a._uU(44,"Donnez ou modifiez le nom du SET de donn\xe9es \xe0 enregistrer *"),a.qZA(),a.TgZ(45,"input",13),a.NdJ("ngModelChange",function(e){return t.set.titre=e}),a.qZA(),a.TgZ(46,"label",14),a._uU(47,"Donnez un alias *"),a.qZA(),a.TgZ(48,"input",15),a.NdJ("ngModelChange",function(e){return t.set.alias=e}),a.qZA(),a.TgZ(49,"label",16),a._uU(50,"Fonds *"),a.qZA(),a.TgZ(51,"input",17),a.NdJ("ngModelChange",function(e){return t.set.fonds=e}),a.qZA(),a.TgZ(52,"label",18),a._uU(53,"Inidiquez des informations compl\xe9mentaires sur le SET scann\xe9"),a.qZA(),a.TgZ(54,"input",19),a.NdJ("ngModelChange",function(e){return t.set.description=e}),a.qZA(),a.TgZ(55,"label",20),a._uU(56,"Qui a cr\xe9\xe9 le SET ?"),a.qZA(),a.TgZ(57,"input",21),a.NdJ("ngModelChange",function(e){return t.set.createur=e}),a.qZA(),a.TgZ(58,"label",22),a._uU(59,"Qui g\xe8re ce SET ?"),a.qZA(),a.TgZ(60,"input",23),a.NdJ("ngModelChange",function(e){return t.set.gestionnaire=e}),a.qZA(),a.TgZ(61,"button",24),a._uU(62,"Enregistrer les donn\xe9es filtr\xe9es"),a.qZA(),a.qZA(),a.qZA(),a.TgZ(63,"blockquote"),a.YNc(64,ne,2,1,"h4",2),a.YNc(65,ie,2,1,"p",2),a.TgZ(66,"p"),a._uU(67),a.qZA(),a.TgZ(68,"p"),a._uU(69,"Les donn\xe9es des documents sauvegard\xe9es seront celles inclues ci-dessous si elles sont pr\xe9sentes dans les m\xe9tadonn\xe9es. Les autres ne seront pas dans la base moissonnable mais resteront accessibles dans les documents avec un autre filtre."),a.qZA(),a.TgZ(70,"ul"),a.YNc(71,ue,4,3,"li",3),a.ALo(72,"keyvalue"),a.qZA(),a.qZA(),a.qZA(),a.qZA(),a.YNc(73,ge,5,0,"section",25)}if(2&e){const e=a.MAs(35);a.xp6(11),a.Q6J("ngForOf",t.scanServ.listeDossiers),a.xp6(8),a.Q6J("ngIf",t.scanServ.scans),a.xp6(3),a.Q6J("ngForOf",a.Dn7(23,18,t.scanServ.scans,t.page.min,t.page.max)),a.xp6(3),a.Q6J("ngIf",t.scanServ.scans),a.xp6(13),a.Q6J("ngModel",t._idFiltre),a.xp6(4),a.Q6J("ngForOf",t.filtresServ.filtres),a.xp6(3),a.Q6J("ngModel",t.set.titre),a.xp6(3),a.Q6J("ngModel",t.set.alias),a.xp6(3),a.Q6J("ngModel",t.set.fonds),a.xp6(3),a.Q6J("ngModel",t.set.description),a.xp6(3),a.Q6J("ngModel",t.set.createur),a.xp6(3),a.Q6J("ngModel",t.set.gestionnaire),a.xp6(1),a.Q6J("disabled",e.invalid),a.xp6(3),a.Q6J("ngIf",t.filtreChoisi.titre),a.xp6(1),a.Q6J("ngIf",t.filtreChoisi.createur),a.xp6(2),a.Oqu(t.filtreChoisi.description),a.xp6(4),a.Q6J("ngForOf",a.lcZ(72,22,t.filtreChoisi.metadonnees)),a.xp6(2),a.Q6J("ngIf",t.scanServ.load)}},directives:[i.sg,i.O5,j.pp,o._Y,o.JL,o.F,o.EJ,o.Q7,o.JJ,o.On,o.YN,o.Kr,o.Fj,j.ib,j.yz,j.yK,$.Ou],pipes:[i.OU,i.Nd],styles:["section[_ngcontent-%COMP%] > aside[_ngcontent-%COMP%]:first-child{flex:1;background-color:#6ebada}section[_ngcontent-%COMP%]   header[_ngcontent-%COMP%]{flex-direction:column;padding:0 10px}section[_ngcontent-%COMP%] > section[_ngcontent-%COMP%]{flex:2;background-color:rgba(110,186,218,.5)}section[_ngcontent-%COMP%] > aside[_ngcontent-%COMP%]:nth-child(3){flex:3}section[_ngcontent-%COMP%] > aside[_ngcontent-%COMP%]:nth-child(3)   form[_ngcontent-%COMP%]{display:flex;flex-direction:column}"]}),e})();class pe{constructor(){this.libre="",this.dateDebut="",this.dateFin="",this.type=""}}let fe=(()=>{class e{transform(e,t){return e&&e.length?t?t.libre.length>2?e.filter(e=>{if(-1!==JSON.stringify(e).toLowerCase().indexOf(t.libre))return e}):t.type?e.filter(e=>{if(-1!==e.metadonnees.dublincore.format.indexOf(t.type))return e}):t.dateDebut?e.filter(e=>{let n=Date.parse(t.dateDebut);if(e.metadonnees.dublincore.date>=n)return e}):t.dateFin?e.filter(e=>{let n=Date.parse(t.dateFin);if(e.metadonnees.dublincore.date<=n)return e}):e:e:[]}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275pipe=a.Yjl({name:"filtreNotices",type:e,pure:!1}),e})();var Ze=n(9413),he=n(8341);class me{constructor(){this.titre="",this.alias="",this.description="",this.type="",this.createur="",this.date=Date.now(),this.fonds="",this.langue="",this.groupe=[],this.notices=[],this.series=[],this.selected=!1}}function Ae(e,t){if(1&e&&(a.TgZ(0,"li"),a._uU(1),a.qZA()),2&e){const e=t.$implicit;a.xp6(1),a.hij(" ",e," ")}}function qe(e,t){if(1&e&&(a.TgZ(0,"li"),a._uU(1),a.TgZ(2,"mat-icon",23),a._uU(3,"delete"),a.qZA(),a.qZA()),2&e){const e=t.$implicit;a.xp6(1),a.hij(" ",e.metadonnees.dublincore.title," ")}}function Te(e,t){if(1&e&&(a.TgZ(0,"section"),a.TgZ(1,"h3"),a._uU(2,"Notices"),a.qZA(),a.TgZ(3,"ul"),a.YNc(4,qe,4,1,"li",19),a.qZA(),a.qZA()),2&e){const e=a.oxw();a.xp6(4),a.Q6J("ngForOf",e.colServ.notices)}}function _e(e,t){if(1&e&&(a.TgZ(0,"li"),a._uU(1),a.TgZ(2,"mat-icon",23),a._uU(3,"delete"),a.qZA(),a.qZA()),2&e){const e=t.$implicit;a.xp6(1),a.hij(" ",e.metadonnees.dublincore.title," ")}}function xe(e,t){if(1&e&&(a.TgZ(0,"section"),a.TgZ(1,"h3"),a._uU(2,"Notices"),a.qZA(),a.TgZ(3,"ul"),a.YNc(4,_e,4,1,"li",19),a.qZA(),a.qZA()),2&e){const e=a.oxw();a.xp6(4),a.Q6J("ngForOf",e.colServ.notices)}}let ve=(()=>{class e{constructor(e,t,n,i){this.colServ=e,this.setsServ=t,this.noticesServ=n,this.tokenServ=i,this.fermer=new a.vpe,this.affiche=!1,this.maj=!1,this.cree=!1}ngOnInit(){console.log(this.idCollection),"string"==typeof this.idCollection?this.colServ.getCollection(this.idCollection):-1==this.idCollection&&this.setsServ.set?(this.cree=!0,this.colServ.collection=this.mapSet(this.setsServ.set),this.genereNotices()):this.colServ.collection=new me}collectionOnClick(){this.affiche=!0}afficheMaj(){this.maj=!this.maj}ecrire(){this.colServ.collection._id?this.colServ.majCollection():this.colServ.ajouteNoticeAvantCollection()}mapSet(e){let t=new me;for(let n in e)t.hasOwnProperty(n)&&"_id"!=n&&(t[n]=e[n]);return console.log(t),t.series=[],e.documents.forEach(e=>{e.nemateria.serie&&!t.series.includes(e.nemateria.serie.serie)&&t.series.push(e.nemateria.serie.serie)}),t}genereNotices(){this.colServ.notices=[],this.setsServ.set.documents.map(e=>{e.nemateria.collection||(e.nemateria.collection={nom_collection:this.colServ.collection.titre,fonds:this.colServ.collection.fonds}),this.colServ.notices.push({metadonnees:e})}),this.colServ.notifServ.notif("Les notices ont \xe9t\xe9 int\xe9gr\xe9es dans la collection.")}supprimeNotice(e){}}return e.\u0275fac=function(t){return new(t||e)(a.Y36(r.a),a.Y36(h),a.Y36(d),a.Y36(Ze.B))},e.\u0275cmp=a.Xpm({type:e,selectors:[["app-collection"]],inputs:{collection:"collection",idCollection:"idCollection"},outputs:{fermer:"fermer"},decls:54,vars:12,consts:[[1,"unique"],[3,"click"],["f","ngForm"],["for","titre"],["name","titre","required","",3,"ngModel","ngModelChange"],["for","alias"],["name","alias","required","","pattern","[a-z0-9-]+",3,"ngModel","ngModelChange"],["for","description"],["mat-input","","name","description","required","",3,"ngModel","ngModelChange"],["for","type"],["name","type","required","",3,"ngModel","ngModelChange"],["value","images"],["value","multimedia"],["for","createur"],["name","createur","required","",3,"ngModel","ngModelChange"],["for","fonds"],["name","fonds",3,"ngModel","ngModelChange"],["for","langue"],["name","langue",3,"ngModel","ngModelChange"],[4,"ngFor","ngForOf"],[1,"invalid",3,"click"],[1,"valid",3,"disabled","click"],[4,"ngIf"],["matTooltip","Enlever cette notice"]],template:function(e,t){if(1&e&&(a.TgZ(0,"section",0),a.TgZ(1,"header"),a.TgZ(2,"h3"),a._uU(3,"Informations sur la collection "),a.TgZ(4,"mat-icon",1),a.NdJ("click",function(){return t.fermer.emit(!1)}),a._uU(5,"close"),a.qZA(),a.qZA(),a.TgZ(6,"h2"),a._uU(7),a.qZA(),a.qZA(),a.TgZ(8,"form"),a.TgZ(9,"section"),a.TgZ(10,"form",null,2),a.TgZ(12,"article"),a.TgZ(13,"label",3),a._uU(14,"Titre"),a.qZA(),a.TgZ(15,"input",4),a.NdJ("ngModelChange",function(e){return t.colServ.collection.titre=e}),a.qZA(),a.TgZ(16,"label",5),a._uU(17,"Alias"),a.qZA(),a.TgZ(18,"input",6),a.NdJ("ngModelChange",function(e){return t.colServ.collection.alias=e}),a.qZA(),a.TgZ(19,"label",7),a._uU(20,"Description"),a.qZA(),a.TgZ(21,"textarea",8),a.NdJ("ngModelChange",function(e){return t.colServ.collection.description=e}),a._uU(22,"                    "),a.qZA(),a.TgZ(23,"label",9),a._uU(24,"Type"),a.qZA(),a.TgZ(25,"select",10),a.NdJ("ngModelChange",function(e){return t.colServ.collection.type=e}),a.TgZ(26,"option",11),a._uU(27,"Images"),a.qZA(),a.TgZ(28,"option",12),a._uU(29,"Multim\xe9dia"),a.qZA(),a.qZA(),a.TgZ(30,"label",13),a._uU(31,"Cr\xe9ateur"),a.qZA(),a.TgZ(32,"input",14),a.NdJ("ngModelChange",function(e){return t.colServ.collection.createur=e}),a.qZA(),a.TgZ(33,"label",15),a._uU(34,"Fonds"),a.qZA(),a.TgZ(35,"input",16),a.NdJ("ngModelChange",function(e){return t.colServ.collection.fonds=e}),a.qZA(),a.TgZ(36,"label",17),a._uU(37,"Langue"),a.qZA(),a.TgZ(38,"input",18),a.NdJ("ngModelChange",function(e){return t.colServ.collection.langue=e}),a.qZA(),a.qZA(),a.qZA(),a.TgZ(39,"article"),a.TgZ(40,"h3"),a._uU(41,"S\xe9ries"),a.qZA(),a.TgZ(42,"mat-icon"),a._uU(43,"add"),a.qZA(),a.TgZ(44,"ul"),a.YNc(45,Ae,2,1,"li",19),a.qZA(),a._UZ(46,"hr"),a.TgZ(47,"p"),a.TgZ(48,"button",20),a.NdJ("click",function(){return t.fermer.emit(!1)}),a._uU(49,"Annuler"),a.qZA(),a.TgZ(50,"button",21),a.NdJ("click",function(){return t.ecrire()}),a._uU(51,"Enregistrer la collection"),a.qZA(),a.qZA(),a.qZA(),a.qZA(),a.YNc(52,Te,5,1,"section",22),a.YNc(53,xe,5,1,"section",22),a.qZA(),a.qZA()),2&e){const e=a.MAs(11);a.xp6(7),a.Oqu(t.colServ.collection.titre),a.xp6(8),a.Q6J("ngModel",t.colServ.collection.titre),a.xp6(3),a.Q6J("ngModel",t.colServ.collection.alias),a.xp6(3),a.Q6J("ngModel",t.colServ.collection.description),a.xp6(4),a.Q6J("ngModel",t.colServ.collection.type),a.xp6(7),a.Q6J("ngModel",t.colServ.collection.createur),a.xp6(3),a.Q6J("ngModel",t.colServ.collection.fonds),a.xp6(3),a.Q6J("ngModel",t.colServ.collection.langue),a.xp6(7),a.Q6J("ngForOf",t.colServ.collection.series),a.xp6(5),a.Q6J("disabled",e.invalid||t.tokenServ.statut<2),a.xp6(2),a.Q6J("ngIf",t.colServ.notices),a.xp6(1),a.Q6J("ngIf",!t.cree)}},directives:[T.Hw,o._Y,o.JL,o.F,o.Fj,o.Q7,o.JJ,o.On,o.c5,o.EJ,o.YN,o.Kr,i.sg,i.O5,q.gM],styles:[""]}),e})();function Me(e,t){if(1&e&&(a.TgZ(0,"video",33),a._UZ(1,"source",34),a.qZA()),2&e){const e=a.oxw().$implicit;a.Q6J("poster",e.metadonnees.dublincore.coverage,a.LSH),a.xp6(1),a.Q6J("src",e.metadonnees.media.url,a.LSH)("type",e.metadonnees.dublincore.format)}}function Ce(e,t){if(1&e&&(a.TgZ(0,"audio"),a._UZ(1,"source",34),a.qZA()),2&e){const e=a.oxw().$implicit;a.xp6(1),a.Q6J("src",e.metadonnees.media.url,a.LSH)("type",e.metadonnees.dublincore.format)}}function Oe(e,t){1&e&&(a.TgZ(0,"mat-icon"),a._uU(1,"check_circle"),a.qZA())}function Ne(e,t){1&e&&(a.TgZ(0,"mat-icon"),a._uU(1,"check_circle_outline"),a.qZA())}function Se(e,t){if(1&e){const e=a.EpF();a.TgZ(0,"li",26),a.TgZ(1,"div"),a.YNc(2,Me,2,3,"video",27),a.YNc(3,Ce,2,2,"audio",23),a.TgZ(4,"div",28),a.NdJ("mouseenter",function(t){return a.CHM(e),a.oxw().utils.play(t)})("mouseleave",function(t){return a.CHM(e),a.oxw().utils.pause(t)})("click",function(){return a.CHM(e),a.oxw().fake()}),a.TgZ(5,"div"),a.TgZ(6,"mat-icon",29),a.NdJ("click",function(){const t=a.CHM(e).$implicit;return a.oxw().noticeOnAffiche(t._id)}),a._uU(7,"visibility"),a.qZA(),a.TgZ(8,"mat-icon",30),a.NdJ("click",function(){const t=a.CHM(e).$implicit;return a.oxw().noticeSelectionnee(t._id)}),a._uU(9,"add_circle"),a.qZA(),a.TgZ(10,"mat-icon",31),a.NdJ("click",function(){const t=a.CHM(e).$implicit;return a.oxw().noticeSelectionRemove(t._id)}),a._uU(11,"remove_circle"),a.qZA(),a.TgZ(12,"mat-icon",32),a.NdJ("click",function(){const t=a.CHM(e).$implicit;return a.oxw().noticeOnInfo(t._id)}),a._uU(13,"info"),a.qZA(),a.qZA(),a.qZA(),a.qZA(),a.TgZ(14,"div"),a.TgZ(15,"h3"),a._uU(16),a.qZA(),a.TgZ(17,"p"),a._uU(18),a.qZA(),a.TgZ(19,"div"),a.YNc(20,Oe,2,0,"mat-icon",23),a.YNc(21,Ne,2,0,"mat-icon",23),a.qZA(),a.qZA(),a.qZA()}if(2&e){const e=t.$implicit,n=a.oxw();a.xp6(1),a.Udp("background-image",n.utils.setNoticeBg(e)),a.ekj("choix",e.selected),a.xp6(1),a.Q6J("ngIf",e.metadonnees.dublincore.format&&-1!=e.metadonnees.dublincore.format.indexOf("video")),a.xp6(1),a.Q6J("ngIf",e.metadonnees.dublincore.format&&-1!=e.metadonnees.dublincore.format.indexOf("audio")),a.xp6(13),a.Oqu(e.metadonnees.dublincore.title),a.xp6(2),a.Oqu(e.metadonnees.dublincore.description),a.xp6(2),a.Q6J("ngIf",e.selected),a.xp6(1),a.Q6J("ngIf",!e.selected)}}function Ue(e,t){if(1&e){const e=a.EpF();a.TgZ(0,"mat-icon",35),a.NdJ("click",function(){return a.CHM(e),a.oxw().noticesSuppr()}),a._uU(1,"delete_forever"),a.qZA()}}function Je(e,t){if(1&e){const e=a.EpF();a.TgZ(0,"li"),a.TgZ(1,"mat-chip-list"),a.TgZ(2,"mat-chip",36),a.NdJ("removed",function(){const t=a.CHM(e).$implicit;return a.oxw().noticeSelectionRemove(t._id)}),a._uU(3),a.TgZ(4,"mat-icon",37),a._uU(5,"cancel"),a.qZA(),a.qZA(),a.qZA(),a.qZA()}if(2&e){const e=t.$implicit;a.xp6(3),a.hij(" ",e.metadonnees.dublincore.title," ")}}function be(e,t){if(1&e&&(a.TgZ(0,"article"),a.TgZ(1,"h3"),a._uU(2),a.qZA(),a.TgZ(3,"ul"),a.TgZ(4,"li"),a._uU(5),a.qZA(),a.TgZ(6,"li"),a._uU(7),a.qZA(),a.TgZ(8,"li"),a._uU(9),a.qZA(),a.qZA(),a.qZA()),2&e){const e=a.oxw();a.xp6(2),a.Oqu(e.noticeChoisie.metadonnees.dublincore.title),a.xp6(3),a.Oqu(e.noticeChoisie.metadonnees.dublincore.description),a.xp6(2),a.Oqu(e.noticeChoisie.metadonnees.media.file),a.xp6(2),a.Oqu(e.noticeChoisie.metadonnees.media.url)}}function ke(e,t){if(1&e){const e=a.EpF();a.TgZ(0,"app-notice",38),a.NdJ("fermer",function(){return a.CHM(e),a.oxw().masque()}),a.qZA()}if(2&e){const e=a.oxw();a.Q6J("idNotice",e.idNotice)}}function we(e,t){if(1&e){const e=a.EpF();a.TgZ(0,"app-collection",39),a.NdJ("fermer",function(){return a.CHM(e),a.oxw().masque()}),a.qZA()}if(2&e){const e=a.oxw();a.Q6J("idCollection",e.idCollection)}}let Pe=(()=>{class e{constructor(e,t,n,i){this.noticesServ=e,this.utils=t,this.noticesPipe=n,this.tokenServ=i,this.noticeListe=[],this.noticeSelection=[],this.noticeAffiche=!1,this.afficheDetailNotice=!1,this.afficheDetailCollec=!1}ngOnInit(){this.idNotice=-1,this.noticesServ.getNotices(),this.filtre=new pe}noticeOnAffiche(e){this.idNotice=e,this.afficheDetailNotice=!this.afficheDetailNotice}noticeSelectionnee(e){this.idNotice=e,this.noticeSelection.find(t=>t._id==e)?this.noticeSelectionRemove(e):this.noticeSelection.push(this.noticesServ.noticesAll.find(t=>{if(t._id==e)return t.selected=!0,t}))}noticeOnInfo(e){this.noticeChoisie==this.noticesServ.noticesAll.find(t=>t._id==e)?(this.noticeAffiche=!1,this.noticeChoisie=null):(this.noticeChoisie=this.noticesServ.noticesAll.find(t=>t._id==e),this.noticeAffiche=!0)}noticeSelectionDump(){this.noticeAffiche=!1,this.noticeSelection=[]}noticeSelectionRemove(e){for(let t=0;t<this.noticeSelection.length;t++){let n=this.noticeSelection[t];n.selected=!1,n._id==e&&this.noticeSelection.splice(t,1)}}noticesToutesChoisies(){this.noticeSelection=this.noticesPipe.transform(this.noticesServ.noticesAll,this.filtre),this.noticeSelection.forEach(e=>{e.selected=!0})}noticesAucuneChoisie(){this.noticesServ.noticesAll.forEach(e=>{e.selected=!1}),this.noticeSelection=[]}masque(e){this.afficheDetailNotice=e,this.afficheDetailCollec=e,this.idNotice=-1,this.idCollection=-1}collectionOnAffiche(e=-1){this.idCollection=e,this.afficheDetailCollec=!0}fake(){}noticesSuppr(){}}return e.\u0275fac=function(t){return new(t||e)(a.Y36(d),a.Y36(m.F),a.Y36(fe),a.Y36(Ze.B))},e.\u0275cmp=a.Xpm({type:e,selectors:[["app-notices"]],decls:51,vars:13,consts:[[1,"screen","double"],[1,"filtre"],["for","libre"],["name","libre","placeholder","Filtre libre",3,"ngModel","ngModelChange"],["for","dateDebut"],["name","dateDebut","type","date","placeholder","A partir de...",3,"ngModel","ngModelChange"],["for","dateFin"],["name","dateFin","type","date","placeholder","... jusqu'\xe0",3,"ngModel","ngModelChange"],["for","type"],["name","type","placeholder","Type de fichiers",3,"ngModel","ngModelChange"],["value","image"],["value","video"],["value","audio"],["value","application"],[1,"notice-liste"],["class","notice",4,"ngFor","ngForOf"],[1,"right-panel"],[1,"demi"],["matTooltip","S\xe9lectionner toutes les notices",3,"click"],["matTooltip","D\xe9selectionner toutes les notices",3,"click"],["matTooltip","Cr\xe9er une collection \xe0 partir de la s\xe9lection",3,"click"],["matTooltip","Supprimer les notices s\xe9lectionn\xe9es",3,"click",4,"ngIf"],[4,"ngFor","ngForOf"],[4,"ngIf"],["class","unique",3,"idNotice","fermer",4,"ngIf"],["class","unique",3,"idCollection","fermer",4,"ngIf"],[1,"notice"],[3,"poster",4,"ngIf"],[3,"mouseenter","mouseleave","click"],["matTooltip","Voir la fiche de la notice",3,"click"],["matTooltip","Ajouter cette notice \xe0 la liste s\xe9lectionn\xe9e",3,"click"],["matTooltip","Supprimer la notice",3,"click"],["matTooltip","Informations rapides sur la notice",3,"click"],[3,"poster"],[3,"src","type"],["matTooltip","Supprimer les notices s\xe9lectionn\xe9es",3,"click"],[3,"removed"],["matChipRemove",""],[1,"unique",3,"idNotice","fermer"],[1,"unique",3,"idCollection","fermer"]],template:function(e,t){1&e&&(a.TgZ(0,"section",0),a.TgZ(1,"section"),a.TgZ(2,"header",1),a.TgZ(3,"h2"),a._uU(4,"Filtrer les notices"),a.qZA(),a.TgZ(5,"form"),a.TgZ(6,"label",2),a._uU(7,"Filtre libre "),a.TgZ(8,"input",3),a.NdJ("ngModelChange",function(e){return t.filtre.libre=e}),a.qZA(),a.qZA(),a.TgZ(9,"label",4),a._uU(10,"Date de cr\xe9ation (d\xe9but) "),a.TgZ(11,"input",5),a.NdJ("ngModelChange",function(e){return t.filtre.dateDebut=e}),a.qZA(),a.qZA(),a.TgZ(12,"label",6),a._uU(13,"Date de cr\xe9ation (fin) "),a.TgZ(14,"input",7),a.NdJ("ngModelChange",function(e){return t.filtre.dateFin=e}),a.qZA(),a.qZA(),a.TgZ(15,"label",8),a._uU(16,"Types de fichiers "),a.TgZ(17,"select",9),a.NdJ("ngModelChange",function(e){return t.filtre.type=e}),a.TgZ(18,"option",10),a._uU(19,"Images"),a.qZA(),a.TgZ(20,"option",11),a._uU(21,"Vid\xe9os"),a.qZA(),a.TgZ(22,"option",12),a._uU(23,"Audio"),a.qZA(),a.TgZ(24,"option",13),a._uU(25,"Textes"),a.qZA(),a.qZA(),a.qZA(),a.qZA(),a.qZA(),a.TgZ(26,"ul",14),a.YNc(27,Se,22,10,"li",15),a.ALo(28,"filtreNotices"),a.qZA(),a.qZA(),a.TgZ(29,"aside",16),a.TgZ(30,"section",17),a.TgZ(31,"header"),a.TgZ(32,"h4"),a._uU(33,"Actions group\xe9es : "),a.qZA(),a.TgZ(34,"mat-icon",18),a.NdJ("click",function(){return t.noticesToutesChoisies()}),a._uU(35,"filter"),a.qZA(),a.TgZ(36,"mat-icon",19),a.NdJ("click",function(){return t.noticesAucuneChoisie()}),a._uU(37,"filter_none"),a.qZA(),a.TgZ(38,"mat-icon",20),a.NdJ("click",function(){return t.collectionOnAffiche()}),a._uU(39,"collections"),a.qZA(),a.YNc(40,Ue,2,0,"mat-icon",21),a.qZA(),a.TgZ(41,"h2"),a._uU(42,"Liste des notices s\xe9lectionn\xe9es"),a.qZA(),a.TgZ(43,"ul"),a.YNc(44,Je,6,1,"li",22),a.qZA(),a.qZA(),a.TgZ(45,"section",17),a.TgZ(46,"h2"),a._uU(47,"M\xe9tadonn\xe9es d\u2019une notice s\xe9lectionn\xe9e"),a.qZA(),a.YNc(48,be,10,4,"article",23),a.qZA(),a.qZA(),a.qZA(),a.YNc(49,ke,1,1,"app-notice",24),a.YNc(50,we,1,1,"app-collection",25)),2&e&&(a.xp6(8),a.Q6J("ngModel",t.filtre.libre),a.xp6(3),a.Q6J("ngModel",t.filtre.dateDebut),a.xp6(3),a.Q6J("ngModel",t.filtre.dateFin),a.xp6(3),a.Q6J("ngModel",t.filtre.type),a.xp6(10),a.Q6J("ngForOf",a.xi3(28,10,t.noticesServ.noticesAll,t.filtre)),a.xp6(13),a.Q6J("ngIf",t.tokenServ.statut>=2),a.xp6(4),a.Q6J("ngForOf",t.noticeSelection),a.xp6(4),a.Q6J("ngIf",t.noticeAffiche),a.xp6(1),a.Q6J("ngIf",t.afficheDetailNotice),a.xp6(1),a.Q6J("ngIf",t.afficheDetailCollec))},directives:[o._Y,o.JL,o.F,o.Fj,o.JJ,o.On,o.EJ,o.YN,o.Kr,i.sg,T.Hw,q.gM,i.O5,he.qn,he.HS,he.qH,I,ve],pipes:[fe],styles:["section[_ngcontent-%COMP%] > section[_ngcontent-%COMP%] > ul[_ngcontent-%COMP%]{padding:0;margin:0}aside[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]{list-style:none;display:inline-block;margin:5px}aside[_ngcontent-%COMP%] > section[_ngcontent-%COMP%]:first-child{background-color:#a3c6c2}aside[_ngcontent-%COMP%] > section[_ngcontent-%COMP%]:nth-child(2){background-color:#13c7af}"]}),e})();function Fe(e,t){if(1&e){const e=a.EpF();a.TgZ(0,"li",11),a.NdJ("click",function(){const t=a.CHM(e).$implicit;return a.oxw().collectionOnClick(t._id)}),a._uU(1),a.qZA()}if(2&e){const e=t.$implicit;a.xp6(1),a.AsE(" ",e.titre," (",e.fonds,") ")}}function ye(e,t){if(1&e){const e=a.EpF();a.TgZ(0,"div"),a.TgZ(1,"mat-icon",12),a.NdJ("click",function(){return a.CHM(e),a.oxw().delete=!0}),a._uU(2,"delete"),a.qZA(),a.TgZ(3,"mat-icon",13),a.NdJ("click",function(){return a.CHM(e),a.oxw().detailsCollec=!0}),a._uU(4,"edit"),a.qZA(),a.qZA()}}function Qe(e,t){if(1&e&&(a.TgZ(0,"li"),a.TgZ(1,"strong"),a._uU(2),a.qZA(),a._uU(3),a.qZA()),2&e){const e=a.oxw().$implicit;a.xp6(2),a.Oqu(e.key),a.xp6(1),a.hij(" : ",e.value," ")}}function Ye(e,t){if(1&e&&(a.TgZ(0,"div"),a.YNc(1,Qe,4,2,"li",4),a.qZA()),2&e){const e=t.$implicit;a.xp6(1),a.Q6J("ngIf","notices"!=e.key)}}function Ie(e,t){if(1&e&&(a.TgZ(0,"article"),a.TgZ(1,"ul"),a.YNc(2,Ye,2,1,"div",14),a.ALo(3,"keyvalue"),a.qZA(),a.qZA()),2&e){const e=a.oxw();a.xp6(2),a.Q6J("ngForOf",a.lcZ(3,1,e.colServ.collection))}}function Ee(e,t){if(1&e&&(a.TgZ(0,"li"),a._uU(1),a.qZA()),2&e){const e=t.$implicit;a.xp6(1),a.hij(" ",e," ")}}function Le(e,t){if(1&e&&(a.TgZ(0,"article"),a.TgZ(1,"h3"),a._uU(2,"S\xe9ries de la collection"),a.qZA(),a.TgZ(3,"ul"),a.YNc(4,Ee,2,1,"li",14),a.qZA(),a.qZA()),2&e){const e=a.oxw();a.xp6(4),a.Q6J("ngForOf",e.noticesServ.seriesCollec)}}function je(e,t){if(1&e&&(a.TgZ(0,"video",20),a._UZ(1,"source",21),a.qZA()),2&e){const e=a.oxw().$implicit;a.Q6J("poster",e.metadonnees.dublincore.coverage,a.LSH),a.xp6(1),a.Q6J("src",e.metadonnees.media.url,a.LSH)("type",e.metadonnees.dublincore.format)}}function $e(e,t){if(1&e&&(a.TgZ(0,"audio"),a._UZ(1,"source",21),a.qZA()),2&e){const e=a.oxw().$implicit;a.xp6(1),a.Q6J("src",e.metadonnees.media.url,a.LSH)("type",e.metadonnees.dublincore.format)}}function He(e,t){if(1&e){const e=a.EpF();a.TgZ(0,"li",15),a.TgZ(1,"div"),a.YNc(2,je,2,3,"video",16),a.YNc(3,$e,2,2,"audio",4),a.TgZ(4,"div",17),a.NdJ("mouseenter",function(t){return a.CHM(e),a.oxw().utils.play(t)})("mouseleave",function(t){return a.CHM(e),a.oxw().utils.pause(t)}),a.TgZ(5,"div"),a.TgZ(6,"mat-icon",18),a.NdJ("click",function(){const t=a.CHM(e).$implicit;return a.oxw().idNotice=t._id}),a._uU(7," visibility"),a.qZA(),a.TgZ(8,"mat-icon",19),a.NdJ("click",function(){const t=a.CHM(e).$implicit;return a.oxw().noticeOnEnlever(t._id)}),a._uU(9,"remove_circle"),a.qZA(),a.qZA(),a.qZA(),a.qZA(),a.TgZ(10,"div"),a.TgZ(11,"h3"),a._uU(12),a.qZA(),a.TgZ(13,"p"),a._uU(14),a.qZA(),a.qZA(),a.qZA()}if(2&e){const e=t.$implicit,n=a.oxw();a.xp6(1),a.Udp("background-image",n.utils.setNoticeBg(e)),a.xp6(1),a.Q6J("ngIf",e.metadonnees.dublincore.format&&-1!=e.metadonnees.dublincore.format.indexOf("video")),a.xp6(1),a.Q6J("ngIf",e.metadonnees.dublincore.format&&-1!=e.metadonnees.dublincore.format.indexOf("audio")),a.xp6(9),a.Oqu(e.metadonnees.dublincore.title),a.xp6(2),a.Oqu(e.metadonnees.dublincore.description)}}function De(e,t){if(1&e){const e=a.EpF();a.TgZ(0,"section",22),a.TgZ(1,"article"),a.TgZ(2,"h3"),a._uU(3,"Supprimer une notice"),a.qZA(),a.TgZ(4,"p"),a._uU(5,"En cliquant sur valider la suppression vous enleverez la notice de cette collection."),a.qZA(),a.TgZ(6,"p"),a._uU(7,"Elle restera n\xe9anmoins disponible dans les autres collections ou pourra \xeatre int\xe9gr\xe9e dans une autre s\xe9lection. "),a.qZA(),a.TgZ(8,"button"),a._uU(9,"Valider la suppression"),a.qZA(),a.TgZ(10,"button",11),a.NdJ("click",function(){return a.CHM(e),a.oxw().masque()}),a._uU(11,"Annuler"),a.qZA(),a.qZA(),a.qZA()}}function ze(e,t){if(1&e){const e=a.EpF();a.TgZ(0,"section",22),a.TgZ(1,"article"),a.TgZ(2,"h2"),a._uU(3,"Etes-vous s\xfbr.e ?"),a.qZA(),a.TgZ(4,"p"),a.TgZ(5,"mat-icon",23),a.NdJ("click",function(){return a.CHM(e),a.oxw().delete=!1}),a._uU(6,"cancel"),a.qZA(),a.TgZ(7,"mat-icon",24),a.NdJ("click",function(){a.CHM(e);const t=a.oxw();return t.colServ.supprCollec(t.colServ.collection._id),t.delete=!1}),a._uU(8,"check_circle"),a.qZA(),a.qZA(),a.qZA(),a.qZA()}}function Ve(e,t){if(1&e){const e=a.EpF();a.TgZ(0,"app-collection",25),a.NdJ("fermer",function(){return a.CHM(e),a.oxw().masque()}),a.qZA()}if(2&e){const e=a.oxw();a.Q6J("idCollection",e.idCollection)}}function Re(e,t){if(1&e){const e=a.EpF();a.TgZ(0,"app-notice",26),a.NdJ("fermer",function(){return a.CHM(e),a.oxw().masque()}),a.qZA()}if(2&e){const e=a.oxw();a.Q6J("idNotice",e.idNotice)}}let Be=(()=>{class e{constructor(e,t,n,i){this.colServ=e,this.noticesServ=t,this.utils=n,this.tokenServ=i,this.collectionListe=[],this.detailsCollec=!1,this.afficheEnlever=!1,this.delete=!1,this.filtreSerie=""}ngOnInit(){}collectionOnClick(e){this.idCollection=e,this.colServ.getCollection(e),this.noticesServ.getNoticesByCollec(this.colServ.collection.notices)}noticeOnEnlever(e){console.log("Notice \xe0 enlever",e),this.idNotice=e,this.afficheEnlever=!0}masque(){this.detailsCollec=!1,this.afficheEnlever=!1,this.idNotice=null,this.idCollection=null}}return e.\u0275fac=function(t){return new(t||e)(a.Y36(r.a),a.Y36(d),a.Y36(m.F),a.Y36(Ze.B))},e.\u0275cmp=a.Xpm({type:e,selectors:[["app-collections"]],decls:24,vars:9,consts:[[1,"screen","triple"],[1,"left-panel"],["matTooltip","Ajouter une collection",3,"click"],[3,"click",4,"ngFor","ngForOf"],[4,"ngIf"],[1,"selection"],[1,"notice-liste"],["class","notice",4,"ngFor","ngForOf"],["class","pop-up",4,"ngIf"],["class","unique",3,"idCollection","fermer",4,"ngIf"],["class","unique",3,"idNotice","fermer",4,"ngIf"],[3,"click"],["matTooltip","Supprimer le SET",3,"click"],["matTooltip","Modifier la collection",3,"click"],[4,"ngFor","ngForOf"],[1,"notice"],[3,"poster",4,"ngIf"],[3,"mouseenter","mouseleave"],["matTooltip","Voir la fiche de la notice",3,"click"],["matTooltip","Enlever cette notice de la collection",3,"click"],[3,"poster"],[3,"src","type"],[1,"pop-up"],["matTooltip","Annuler la destruction",1,"grand",3,"click"],["matTooltip","Valider la destruction",1,"grand",3,"click"],[1,"unique",3,"idCollection","fermer"],[1,"unique",3,"idNotice","fermer"]],template:function(e,t){1&e&&(a.TgZ(0,"section",0),a.TgZ(1,"aside",1),a.TgZ(2,"header"),a.TgZ(3,"h1"),a._uU(4,"Collections disponibles"),a.qZA(),a.TgZ(5,"mat-icon",2),a.NdJ("click",function(){return t.detailsCollec=!0,t.idCollection=null}),a._uU(6,"playlist_add"),a.qZA(),a.qZA(),a.TgZ(7,"ul"),a.YNc(8,Fe,2,2,"li",3),a.qZA(),a.qZA(),a.TgZ(9,"section"),a.TgZ(10,"header"),a.YNc(11,ye,5,0,"div",4),a.TgZ(12,"h2"),a._uU(13,"Informations sur la collection choisie"),a.qZA(),a.qZA(),a.YNc(14,Ie,4,3,"article",4),a.YNc(15,Le,5,1,"article",4),a.qZA(),a.TgZ(16,"aside"),a.TgZ(17,"section",5),a.TgZ(18,"ul",6),a.YNc(19,He,15,6,"li",7),a.qZA(),a.qZA(),a.qZA(),a.qZA(),a.YNc(20,De,12,0,"section",8),a.YNc(21,ze,9,0,"section",8),a.YNc(22,Ve,1,1,"app-collection",9),a.YNc(23,Re,1,1,"app-notice",10)),2&e&&(a.xp6(8),a.Q6J("ngForOf",t.colServ.collections),a.xp6(3),a.Q6J("ngIf",t.tokenServ.statut>=2),a.xp6(3),a.Q6J("ngIf",t.colServ.collection),a.xp6(1),a.Q6J("ngIf",t.noticesServ.seriesCollec.length>0),a.xp6(4),a.Q6J("ngForOf",t.noticesServ.noticesCollec),a.xp6(1),a.Q6J("ngIf",t.afficheEnlever),a.xp6(1),a.Q6J("ngIf",t.delete&&t.tokenServ.statut>=2),a.xp6(1),a.Q6J("ngIf",t.detailsCollec),a.xp6(1),a.Q6J("ngIf",t.idNotice))},directives:[T.Hw,q.gM,i.sg,i.O5,ve,I],pipes:[i.Nd],styles:["section.screen[_ngcontent-%COMP%]   section[_ngcontent-%COMP%]{padding:10px 15px}section.screen[_ngcontent-%COMP%]   section[_ngcontent-%COMP%]   header[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]{float:right}section.screen[_ngcontent-%COMP%] > section[_ngcontent-%COMP%]{flex-grow:3;min-width:30%}aside[_ngcontent-%COMP%]:nth-child(3){flex-grow:4;min-width:40%;background-color:rgba(255,213,0,.5);padding:0}aside[_ngcontent-%COMP%]:nth-child(3)   .notice[_ngcontent-%COMP%]{width:50%}aside[_ngcontent-%COMP%]:nth-child(3)   section[_ngcontent-%COMP%], aside[_ngcontent-%COMP%]:nth-child(3)   ul[_ngcontent-%COMP%]{padding:0;margin:0}"]}),e})();var Xe=n(7539);function Ge(e,t){if(1&e&&(a.TgZ(0,"mat-checkbox",16),a._uU(1),a.qZA()),2&e){const e=t.$implicit;a.Q6J("value",e.alias),a.xp6(1),a.Oqu(e.titre)}}function We(e,t){if(1&e){const e=a.EpF();a.TgZ(0,"li"),a._uU(1),a.TgZ(2,"mat-icon",1),a.NdJ("click",function(){const t=a.CHM(e).index;return a.oxw().filtre.metadonnees.splice(t,1)}),a._uU(3,"delete"),a.qZA(),a.qZA()}if(2&e){const e=t.$implicit;a.xp6(1),a.hij("",e," ")}}let Ke=(()=>{class e{constructor(e){this.filtreServ=e,this.fermer=new a.vpe,this.prefix="oai_nema"}ngOnInit(){this.meta=""}ecrire(){console.log(this.filtre),this.filtre.prefix=this.prefix.replace(" ","").split(","),this.filtre._id?this.filtreServ.majFiltre(this.filtre):this.filtreServ.ajouteFiltre(this.filtre)}ajouteMeta(){console.log("ajoute meta",this.meta),this.filtre.metadonnees.push(this.meta)}}return e.\u0275fac=function(t){return new(t||e)(a.Y36(f.s))},e.\u0275cmp=a.Xpm({type:e,selectors:[["app-filtre"]],inputs:{filtre:"filtre"},outputs:{fermer:"fermer"},decls:42,vars:8,consts:[[1,"unique"],[3,"click"],["for","titre"],["name","titre","required","","placeholder","Titre du filtre",3,"ngModel","ngModelChange"],["for","alias"],["name","alias","required","","pattern","[a-z0-9-]+","placeholder","Sans espaces ou caract\xe8res sp\xe9ciaux",3,"ngModel","ngModelChange"],["for","createur"],["name","createur","required","","placeholder","Qui a cr\xe9\xe9 le filtre ?",3,"ngModel","ngModelChange"],["for","description"],["mat-input","","name","description","required","","placeholder","Quelques explications",3,"ngModel","ngModelChange"],["for","prefix"],[3,"value",4,"ngFor","ngForOf"],["name","meta",3,"ngModel","ngModelChange"],[4,"ngFor","ngForOf"],[1,"invalid",3,"click"],[1,"valid",3,"click"],[3,"value"]],template:function(e,t){1&e&&(a.TgZ(0,"section",0),a.TgZ(1,"header"),a.TgZ(2,"h3"),a._uU(3,"Informations sur la filtre "),a.TgZ(4,"mat-icon",1),a.NdJ("click",function(){return t.fermer.emit(!1)}),a._uU(5,"close"),a.qZA(),a.qZA(),a.TgZ(6,"h2"),a._uU(7),a.qZA(),a.qZA(),a.TgZ(8,"form"),a.TgZ(9,"section"),a.TgZ(10,"form"),a.TgZ(11,"label",2),a._uU(12,"Titre "),a.TgZ(13,"input",3),a.NdJ("ngModelChange",function(e){return t.filtre.titre=e}),a.qZA(),a.qZA(),a.TgZ(14,"label",4),a._uU(15,"Alias "),a.TgZ(16,"input",5),a.NdJ("ngModelChange",function(e){return t.filtre.alias=e}),a.qZA(),a.qZA(),a.TgZ(17,"label",6),a._uU(18,"Cr\xe9ateur "),a.TgZ(19,"input",7),a.NdJ("ngModelChange",function(e){return t.filtre.createur=e}),a.qZA(),a.qZA(),a.TgZ(20,"label",8),a._uU(21,"Description"),a.qZA(),a.TgZ(22,"textarea",9),a.NdJ("ngModelChange",function(e){return t.filtre.description=e}),a._uU(23,"                "),a.qZA(),a.TgZ(24,"label",10),a._uU(25,"Prefix"),a.qZA(),a.YNc(26,Ge,2,2,"mat-checkbox",11),a.qZA(),a.qZA(),a.TgZ(27,"section"),a.TgZ(28,"h3"),a._uU(29,"M\xe9tadonn\xe9es filtr\xe9es"),a.qZA(),a.TgZ(30,"p"),a.TgZ(31,"input",12),a.NdJ("ngModelChange",function(e){return t.meta=e}),a.qZA(),a.TgZ(32,"mat-icon",1),a.NdJ("click",function(){return t.ajouteMeta()}),a._uU(33,"add"),a.qZA(),a.qZA(),a.TgZ(34,"ul"),a.YNc(35,We,4,1,"li",13),a.qZA(),a._UZ(36,"hr"),a.TgZ(37,"p"),a.TgZ(38,"button",14),a.NdJ("click",function(){return t.fermer.emit(!1)}),a._uU(39,"Annuler"),a.qZA(),a.TgZ(40,"button",15),a.NdJ("click",function(){return t.ecrire()}),a._uU(41,"Valider"),a.qZA(),a.qZA(),a.qZA(),a.qZA(),a.qZA()),2&e&&(a.xp6(7),a.Oqu(t.filtre.titre),a.xp6(6),a.Q6J("ngModel",t.filtre.titre),a.xp6(3),a.Q6J("ngModel",t.filtre.alias),a.xp6(3),a.Q6J("ngModel",t.filtre.createur),a.xp6(3),a.Q6J("ngModel",t.filtre.description),a.xp6(4),a.Q6J("ngForOf",t.filtreServ.prefix),a.xp6(5),a.Q6J("ngModel",t.meta),a.xp6(4),a.Q6J("ngForOf",t.filtre.metadonnees))},directives:[T.Hw,o._Y,o.JL,o.F,o.Fj,o.Q7,o.JJ,o.On,o.c5,i.sg,Xe.oG],styles:[""]}),e})();function et(e,t){if(1&e){const e=a.EpF();a.TgZ(0,"li",12),a.NdJ("click",function(){const t=a.CHM(e).$implicit;return a.oxw().filtreOnClick(t._id)}),a._uU(1),a.qZA()}if(2&e){const e=t.$implicit;a.xp6(1),a.AsE(" ",e.titre," (",e.createur,") ")}}function tt(e,t){if(1&e){const e=a.EpF();a.TgZ(0,"div"),a.TgZ(1,"mat-icon",13),a.NdJ("click",function(){a.CHM(e);const t=a.oxw();return t.supprime=!t.supprime}),a._uU(2,"delete"),a.qZA(),a.TgZ(3,"mat-icon",14),a.NdJ("click",function(){a.CHM(e);const t=a.oxw();return t.edition=!t.edition}),a._uU(4,"edit"),a.qZA(),a.TgZ(5,"mat-icon",15),a.NdJ("click",function(){return a.CHM(e),a.oxw().ajouteFiltre()}),a._uU(6,"add"),a.qZA(),a.qZA()}}function nt(e,t){1&e&&(a.TgZ(0,"mat-icon",16),a._uU(1,"edit"),a.qZA())}function it(e,t){1&e&&(a.TgZ(0,"mat-icon",17),a._uU(1,"edit"),a.qZA())}function ot(e,t){1&e&&(a.TgZ(0,"mat-icon",18),a._uU(1,"edit"),a.qZA())}function ct(e,t){1&e&&(a.TgZ(0,"mat-icon",19),a._uU(1,"edit"),a.qZA())}function st(e,t){if(1&e){const e=a.EpF();a.TgZ(0,"mat-icon",21),a.NdJ("click",function(){a.CHM(e);const t=a.oxw().$implicit;return a.oxw(5).supprMeta(t.key)}),a._uU(1,"delete"),a.qZA()}}function rt(e,t){if(1&e&&(a.TgZ(0,"li"),a._uU(1),a.YNc(2,st,2,0,"mat-icon",20),a.qZA()),2&e){const e=t.$implicit,n=a.oxw(5);a.xp6(1),a.AsE("",e.key," (",e.value,") "),a.xp6(1),a.Q6J("ngIf",n.edition)}}function lt(e,t){if(1&e&&(a.TgZ(0,"ul"),a.YNc(1,rt,3,3,"li",9),a.ALo(2,"keyvalue"),a.qZA()),2&e){const e=a.oxw().$implicit;a.xp6(1),a.Q6J("ngForOf",a.lcZ(2,1,e.value))}}function at(e,t){if(1&e&&(a.TgZ(0,"span"),a._uU(1),a.qZA()),2&e){const e=a.oxw().$implicit;a.xp6(1),a.hij("(",e.value,")")}}function ut(e,t){if(1&e){const e=a.EpF();a.TgZ(0,"mat-icon",21),a.NdJ("click",function(){a.CHM(e);const t=a.oxw().$implicit;return a.oxw(3).supprMeta(t.key)}),a._uU(1,"delete"),a.qZA()}}function gt(e,t){if(1&e&&(a.TgZ(0,"li"),a._uU(1),a.YNc(2,lt,3,3,"ul",4),a.YNc(3,at,2,1,"span",4),a.YNc(4,ut,2,0,"mat-icon",20),a.qZA()),2&e){const e=t.$implicit,n=a.oxw(3);a.xp6(1),a.hij("",e.key," "),a.xp6(1),a.Q6J("ngIf",!e.value.length),a.xp6(1),a.Q6J("ngIf",e.value.length),a.xp6(1),a.Q6J("ngIf",n.edition)}}function dt(e,t){if(1&e&&(a.TgZ(0,"ul"),a.YNc(1,gt,5,4,"li",9),a.ALo(2,"keyvalue"),a.qZA()),2&e){const e=a.oxw().$implicit;a.xp6(1),a.Q6J("ngForOf",a.lcZ(2,1,e.value))}}function pt(e,t){if(1&e&&(a.TgZ(0,"span"),a._uU(1),a.qZA()),2&e){const e=a.oxw().$implicit;a.xp6(1),a.Oqu(e.value)}}function ft(e,t){if(1&e){const e=a.EpF();a.TgZ(0,"mat-icon",21),a.NdJ("click",function(){a.CHM(e);const t=a.oxw().$implicit;return a.oxw().supprMeta(t.key)}),a._uU(1,"delete"),a.qZA()}}function Zt(e,t){if(1&e&&(a.TgZ(0,"li"),a._uU(1),a.YNc(2,dt,3,3,"ul",4),a.YNc(3,pt,2,1,"span",4),a.YNc(4,ft,2,0,"mat-icon",20),a.qZA()),2&e){const e=t.$implicit,n=a.oxw();a.xp6(1),a.hij(" ",e.key," : "),a.xp6(1),a.Q6J("ngIf",!e.value.length),a.xp6(1),a.Q6J("ngIf",e.value.length),a.xp6(1),a.Q6J("ngIf",n.edition)}}function ht(e,t){if(1&e){const e=a.EpF();a.TgZ(0,"app-filtre",22),a.NdJ("fermer",function(){return a.CHM(e),a.oxw().masque()}),a.qZA()}if(2&e){const e=a.oxw();a.Q6J("filtre",e.filtre)}}function mt(e,t){if(1&e){const e=a.EpF();a.TgZ(0,"section",23),a.NdJ("fermer",function(){return a.CHM(e),a.oxw().masque()}),a.TgZ(1,"article"),a.TgZ(2,"h3"),a._uU(3,"Souhaitez-vous supprimer ce filte ?"),a.qZA(),a.TgZ(4,"p"),a._uU(5,"Cette suppression sera d\xe9finitive"),a.qZA(),a.TgZ(6,"button",24),a.NdJ("click",function(){return a.CHM(e),a.oxw().masque()}),a._uU(7,"Annuler"),a.qZA(),a.TgZ(8,"button",25),a.NdJ("click",function(){return a.CHM(e),a.oxw().supprimeFiltre()}),a._uU(9,"Valider"),a.qZA(),a.qZA(),a.qZA()}}let At=(()=>{class e{constructor(e,t,n){this.filtresServ=e,this.rendu=t,this.tokenServ=n,this.filtreSerie=""}ngOnInit(){this.filtre=new E.F,this.edition=!1,this.afficheFiltre=!1}filtreOnClick(e){this.filtresServ.filtres.forEach(t=>{t._id==e&&(this.filtre=t)}),console.log(this.filtre)}setEdit(){this.edition=!this.edition}supprMeta(e){console.log("Cl\xe9 \xe0 supprimer")}masque(){this.edition=!1,this.supprime=!1}ajouteFiltre(){this.filtre=new E.F,this.edition=!0}supprimeFiltre(){console.log(this.filtre),this.filtre._id?this.filtresServ.supprimeFiltre(this.filtre._id):this.filtresServ.notif("Merci de s\xe9lectionner un filtre \xe0 supprimer...")}}return e.\u0275fac=function(t){return new(t||e)(a.Y36(f.s),a.Y36(a.Qsj),a.Y36(Ze.B))},e.\u0275cmp=a.Xpm({type:e,selectors:[["app-filtres"]],decls:34,vars:15,consts:[[1,"screen"],[1,"left-panel"],["matTooltip","Ajouter un filtre"],[3,"click",4,"ngFor","ngForOf"],[4,"ngIf"],["matTooltip","Modifier le nom du filtre",4,"ngIf"],["matTooltip","Modifier l'auteur",4,"ngIf"],["matTooltip","Modifier la description du filtre",4,"ngIf"],["matTooltip","Modifier le prefix du filtre (ex. : oai_dc, oai_nema...)",4,"ngIf"],[4,"ngFor","ngForOf"],["class","unique",3,"filtre","fermer",4,"ngIf"],["class","pop-up",3,"fermer",4,"ngIf"],[3,"click"],["matTooltip","Supprimer le filtre",3,"click"],["matTooltip","Modifier le filtre",3,"click"],["matTooltip","Ajouter un filtre",3,"click"],["matTooltip","Modifier le nom du filtre"],["matTooltip","Modifier l'auteur"],["matTooltip","Modifier la description du filtre"],["matTooltip","Modifier le prefix du filtre (ex. : oai_dc, oai_nema...)"],["matTooltip","Supprimer la m\xe9tadonn\xe9e",3,"click",4,"ngIf"],["matTooltip","Supprimer la m\xe9tadonn\xe9e",3,"click"],[1,"unique",3,"filtre","fermer"],[1,"pop-up",3,"fermer"],[1,"invalid",3,"click"],[1,"valid",3,"click"]],template:function(e,t){1&e&&(a.TgZ(0,"section",0),a.TgZ(1,"aside",1),a.TgZ(2,"header"),a.TgZ(3,"h2"),a._uU(4,"Filtres disponibles"),a.qZA(),a.TgZ(5,"mat-icon",2),a._uU(6,"playlist_add"),a.qZA(),a.qZA(),a.TgZ(7,"ul"),a.YNc(8,et,2,2,"li",3),a.qZA(),a.qZA(),a.TgZ(9,"section"),a.TgZ(10,"header"),a.YNc(11,tt,7,0,"div",4),a.TgZ(12,"h2"),a._uU(13,"D\xe9tails sur le filtre"),a.qZA(),a.qZA(),a.TgZ(14,"article"),a.TgZ(15,"h3"),a._uU(16),a.YNc(17,nt,2,0,"mat-icon",5),a.qZA(),a.TgZ(18,"p"),a._uU(19),a.YNc(20,it,2,0,"mat-icon",6),a.qZA(),a.TgZ(21,"p"),a._uU(22),a.YNc(23,ot,2,0,"mat-icon",7),a.qZA(),a.TgZ(24,"p"),a._uU(25),a.YNc(26,ct,2,0,"mat-icon",8),a.qZA(),a.TgZ(27,"h5"),a._uU(28,"M\xe9tadonn\xe9es trait\xe9es par le filtre"),a.qZA(),a.TgZ(29,"ul"),a.YNc(30,Zt,5,4,"li",9),a.ALo(31,"keyvalue"),a.qZA(),a.qZA(),a.qZA(),a.qZA(),a.YNc(32,ht,1,1,"app-filtre",10),a.YNc(33,mt,10,0,"section",11)),2&e&&(a.xp6(8),a.Q6J("ngForOf",t.filtresServ.filtres),a.xp6(3),a.Q6J("ngIf",t.tokenServ.statut>=2),a.xp6(5),a.hij("",t.filtre.titre," "),a.xp6(1),a.Q6J("ngIf",t.edition),a.xp6(2),a.hij("Auteur : ",t.filtre.createur," "),a.xp6(1),a.Q6J("ngIf",t.edition),a.xp6(2),a.hij("",t.filtre.description," "),a.xp6(1),a.Q6J("ngIf",t.edition),a.xp6(2),a.hij("",t.filtre.prefix.toString()," "),a.xp6(1),a.Q6J("ngIf",t.edition),a.xp6(4),a.Q6J("ngForOf",a.lcZ(31,13,t.filtre.metadonnees)),a.xp6(2),a.Q6J("ngIf",t.edition),a.xp6(1),a.Q6J("ngIf",t.supprime))},directives:[T.Hw,q.gM,i.sg,i.O5,Ke],pipes:[i.Nd],styles:["section.screen[_ngcontent-%COMP%]   section[_ngcontent-%COMP%]{padding:10px 15px}section.screen[_ngcontent-%COMP%]   section[_ngcontent-%COMP%]   header[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]{float:right}.left-panel[_ngcontent-%COMP%]{flex-grow:1;min-width:150px}.left-panel[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]{cursor:pointer;padding:10px;margin-bottom:5px;background:#fff;transition:all .3s ease}.left-panel[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]{margin-top:-5px;float:right}.left-panel[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]:hover{background:grey}.left-panel[_ngcontent-%COMP%] > *[_ngcontent-%COMP%]{width:100%}section.screen[_ngcontent-%COMP%] > section[_ngcontent-%COMP%]{flex-grow:3;min-width:30%}.right-panel[_ngcontent-%COMP%]{flex-grow:4;min-width:40%}.right-panel[_ngcontent-%COMP%]   .notice[_ngcontent-%COMP%]{width:50%}"]}),e})();var qt=n(3461);function Tt(e,t){if(1&e){const e=a.EpF();a.TgZ(0,"li",5),a.NdJ("click",function(){const t=a.CHM(e).$implicit;return a.oxw().selectItem(t.key)}),a._uU(1),a.qZA()}if(2&e){const e=t.$implicit;a.xp6(1),a.AsE(" ",e.key," (ex. : ",e.value,") ")}}function _t(e,t){if(1&e){const e=a.EpF();a.TgZ(0,"li",6),a._uU(1),a._UZ(2,"br"),a.TgZ(3,"input",7),a.NdJ("ngModelChange",function(e){return t.$implicit[1]=e}),a.qZA(),a.TgZ(4,"mat-icon",8),a.NdJ("click",function(){const t=a.CHM(e).index;return a.oxw().supprime(t)}),a._uU(5,"delete"),a.qZA(),a.qZA()}if(2&e){const e=t.$implicit;a.xp6(1),a.hij(" ",e[0]," : "),a.xp6(2),a.Q6J("ngModel",e[1])}}function xt(e,t){if(1&e&&(a.TgZ(0,"li"),a._uU(1),a.qZA()),2&e){const e=t.$implicit;a.xp6(1),a.hij(" ",e[1]," ")}}function vt(e,t){if(1&e){const e=a.EpF();a.TgZ(0,"form",9),a.NdJ("submit",function(){return a.CHM(e),a.oxw().valideFiltre()}),a.TgZ(1,"label",10),a._uU(2,"Titre*"),a.qZA(),a.TgZ(3,"input",11),a.NdJ("ngModelChange",function(t){return a.CHM(e),a.oxw().filtre.titre=t}),a.qZA(),a.TgZ(4,"label",12),a._uU(5,"Alias*"),a.qZA(),a.TgZ(6,"input",13),a.NdJ("ngModelChange",function(t){return a.CHM(e),a.oxw().filtre.alias=t}),a.qZA(),a.TgZ(7,"label",14),a._uU(8,"Description*"),a.qZA(),a.TgZ(9,"input",15),a.NdJ("ngModelChange",function(t){return a.CHM(e),a.oxw().filtre.description=t}),a.qZA(),a.TgZ(10,"label",16),a._uU(11,"Cr\xe9ateur"),a.qZA(),a.TgZ(12,"input",17),a.NdJ("ngModelChange",function(t){return a.CHM(e),a.oxw().filtre.createur=t}),a.qZA(),a.TgZ(13,"label",18),a._uU(14,"Donn\xe9es du filtre"),a.qZA(),a.TgZ(15,"ul"),a.YNc(16,xt,2,1,"li",19),a.qZA(),a.TgZ(17,"button"),a._uU(18,"Valider ce filtre"),a.qZA(),a.qZA()}if(2&e){const e=a.oxw();a.xp6(3),a.Q6J("ngModel",e.filtre.titre),a.xp6(3),a.Q6J("ngModel",e.filtre.alias),a.xp6(3),a.Q6J("ngModel",e.filtre.description),a.xp6(3),a.Q6J("ngModel",e.filtre.createur),a.xp6(4),a.Q6J("ngForOf",e.maps)}}let Mt=(()=>{class e{constructor(e,t,n,i){this.mapServ=e,this.utils=t,this.filtreServ=n,this.auth=i,this.maps=[]}ngOnInit(){this.filtre=new E.F}drop(e){console.log("Maps",this.maps),(0,qt.bA)(this.maps,e.previousIndex,e.currentIndex)}selectItem(e){this.maps.push([e,e])}supprime(e){this.maps.splice(e,1)}valideFiltre(e){this.filtre.metadonnees=this.triMaps(),this.filtreServ.ajouteFiltre(this.filtre)}triMaps(){let e=[];for(let t of this.maps)e.push(t[1]);return e}}return e.\u0275fac=function(t){return new(t||e)(a.Y36(L),a.Y36(m.F),a.Y36(f.s),a.Y36(Z.e))},e.\u0275cmp=a.Xpm({type:e,selectors:[["app-mappages"]],decls:31,vars:5,consts:[[1,"screen"],[3,"click",4,"ngFor","ngForOf"],["cdkDropList","",3,"cdkDropListDropped"],["cdkDrag","",4,"ngFor","ngForOf"],[3,"submit",4,"ngIf"],[3,"click"],["cdkDrag",""],["name","m[0]",3,"ngModel","ngModelChange"],[1,"icone","ferme",3,"click"],[3,"submit"],["for","titre"],["name","titre","placeholder","Saisir un titre","required","",3,"ngModel","ngModelChange"],["for","alias"],["name","alias","placeholder","Saisir un alias","required","","pattern","[a-z0-9-]+",3,"ngModel","ngModelChange"],["for","description"],["name","description","placeholder","Saisir une description","required","",3,"ngModel","ngModelChange"],["for","createur"],["name","createur","placeholder","Saisir un cr\xe9ateur",3,"ngModel","ngModelChange"],["for","donnees"],[4,"ngFor","ngForOf"]],template:function(e,t){1&e&&(a.TgZ(0,"section",0),a.TgZ(1,"aside"),a.TgZ(2,"header"),a.TgZ(3,"h2"),a._uU(4,"Set de donn\xe9es"),a.qZA(),a._UZ(5,"hr"),a.TgZ(6,"p"),a._uU(7,"Set de m\xe9tadonn\xe9es scann\xe9/ Cliquez sur celles que vous souhaitez ajouter \xe0 votre mappage."),a.qZA(),a.qZA(),a.TgZ(8,"article"),a.TgZ(9,"ul"),a.YNc(10,Tt,2,2,"li",1),a.ALo(11,"keyvalue"),a.qZA(),a.qZA(),a.qZA(),a.TgZ(12,"section"),a.TgZ(13,"header"),a.TgZ(14,"h2"),a._uU(15,"Mappage"),a.qZA(),a._UZ(16,"hr"),a.TgZ(17,"p"),a._uU(18,"Modifiez les valeurs des champs s\xe9lectionn\xe9s. Vous pouvez les trier en les faisant glisser."),a.qZA(),a.qZA(),a.TgZ(19,"article"),a.TgZ(20,"ul",2),a.NdJ("cdkDropListDropped",function(e){return t.drop(e)}),a.YNc(21,_t,6,2,"li",3),a.qZA(),a.qZA(),a.qZA(),a.TgZ(22,"aside"),a.TgZ(23,"header"),a.TgZ(24,"h2"),a._uU(25,"Filtre g\xe9n\xe9r\xe9"),a.qZA(),a._UZ(26,"hr"),a.TgZ(27,"p"),a._uU(28,"Ce filtre, si vous le validez, pourra servir de tri dans les donn\xe9es brutes scann\xe9es sur votre serveur."),a.qZA(),a.qZA(),a.TgZ(29,"article"),a.YNc(30,vt,19,5,"form",4),a.qZA(),a.qZA(),a.qZA()),2&e&&(a.xp6(10),a.Q6J("ngForOf",a.lcZ(11,3,t.mapServ.set)),a.xp6(11),a.Q6J("ngForOf",t.maps),a.xp6(9),a.Q6J("ngIf",t.maps.length>0))},directives:[i.sg,qt.Wj,i.O5,qt.Zt,o.Fj,o.JJ,o.On,T.Hw,o._Y,o.JL,o.F,o.Q7,o.c5],pipes:[i.Nd],styles:["section[_ngcontent-%COMP%] > aside[_ngcontent-%COMP%]:first-child{flex:1;background-color:#6ebada}section[_ngcontent-%COMP%]   header[_ngcontent-%COMP%]{flex-direction:column;padding:0 10px}section[_ngcontent-%COMP%] > section[_ngcontent-%COMP%]{flex:1;background-color:rgba(110,186,218,.5)}section[_ngcontent-%COMP%] > section[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]{display:flex;flex-flow:row nowrap;align-items:center}section[_ngcontent-%COMP%] > aside[_ngcontent-%COMP%]:nth-child(3){flex:1}section[_ngcontent-%COMP%] > aside[_ngcontent-%COMP%]:nth-child(3)   form[_ngcontent-%COMP%]{flex-flow:column wrap}section[_ngcontent-%COMP%] > aside[_ngcontent-%COMP%]:nth-child(3)   hr[_ngcontent-%COMP%]{border-color:#ccc}ul[_ngcontent-%COMP%]{border:1px dashed #fff;padding:10px}ul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]{list-style:none}"]}),e})(),Ct=(()=>{class e{constructor(){}ngOnInit(){}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275cmp=a.Xpm({type:e,selectors:[["app-mappage"]],decls:2,vars:0,template:function(e,t){1&e&&(a.TgZ(0,"p"),a._uU(1," mappage works!\n"),a.qZA())},styles:[""]}),e})();function Ot(e,t){if(1&e&&(a.TgZ(0,"li"),a._uU(1),a.qZA()),2&e){const e=t.$implicit;a.xp6(1),a.AsE(" ",e.titre," (",e.alias,") ")}}function Nt(e,t){if(1&e&&(a.TgZ(0,"li"),a.TgZ(1,"strong"),a._uU(2),a.qZA(),a._uU(3),a.qZA()),2&e){const e=t.$implicit;a.xp6(2),a.Oqu(e.key),a.xp6(1),a.hij(" : ",e.value," ")}}function St(e,t){if(1&e&&(a.TgZ(0,"article"),a.TgZ(1,"ul"),a.YNc(2,Nt,4,2,"li",2),a.ALo(3,"keyvalue"),a.qZA(),a.qZA()),2&e){const e=a.oxw();a.xp6(2),a.Q6J("ngForOf",a.lcZ(3,1,e.collec))}}function Ut(e,t){if(1&e&&(a.TgZ(0,"li"),a._uU(1),a.qZA()),2&e){const e=t.$implicit;a.xp6(1),a.hij(" ",e," ")}}function Jt(e,t){if(1&e&&(a.TgZ(0,"article"),a.TgZ(1,"h3"),a._uU(2,"S\xe9ries de la collection"),a.qZA(),a.TgZ(3,"ul"),a.YNc(4,Ut,2,1,"li",2),a.qZA(),a.qZA()),2&e){const e=a.oxw();a.xp6(4),a.Q6J("ngForOf",e.noticesServ.seriesCollec)}}function bt(e,t){if(1&e&&(a.TgZ(0,"li",6),a.TgZ(1,"div"),a._UZ(2,"div"),a.qZA(),a.TgZ(3,"div"),a.TgZ(4,"h3"),a._uU(5),a.qZA(),a.TgZ(6,"p"),a._uU(7),a.qZA(),a.qZA(),a.qZA()),2&e){const e=t.$implicit;a.xp6(1),a.Udp("background-image","url("+e.fichier.url+")"),a.xp6(4),a.Oqu(e.titre),a.xp6(2),a.Oqu(e.description)}}let kt=(()=>{class e{constructor(e,t){this.colServ=e,this.noticesServ=t}ngOnInit(){}}return e.\u0275fac=function(t){return new(t||e)(a.Y36(r.a),a.Y36(d))},e.\u0275cmp=a.Xpm({type:e,selectors:[["app-accueil"]],decls:21,vars:4,consts:[[1,"screen","triple"],[1,"left-panel"],[4,"ngFor","ngForOf"],[4,"ngIf"],[1,"notice-liste"],["class","notice",4,"ngFor","ngForOf"],[1,"notice"]],template:function(e,t){1&e&&(a.TgZ(0,"section",0),a.TgZ(1,"aside",1),a.TgZ(2,"header"),a.TgZ(3,"h2"),a._uU(4,"Nouvelles collections"),a.qZA(),a.qZA(),a.TgZ(5,"ul"),a.YNc(6,Ot,2,2,"li",2),a.qZA(),a.qZA(),a.TgZ(7,"section"),a.TgZ(8,"header"),a._UZ(9,"div"),a.TgZ(10,"h2"),a._uU(11,"Nouveaux sets"),a.qZA(),a.qZA(),a.YNc(12,St,4,3,"article",3),a.YNc(13,Jt,5,1,"article",3),a.qZA(),a.TgZ(14,"aside"),a.TgZ(15,"section"),a.TgZ(16,"header"),a.TgZ(17,"h2"),a._uU(18,"Nouvelles notices"),a.qZA(),a.qZA(),a.TgZ(19,"ul",4),a.YNc(20,bt,8,4,"li",5),a.qZA(),a.qZA(),a.qZA(),a.qZA()),2&e&&(a.xp6(6),a.Q6J("ngForOf",t.colServ.collections),a.xp6(6),a.Q6J("ngIf",t.collec),a.xp6(1),a.Q6J("ngIf",t.noticesServ.seriesCollec.length>0),a.xp6(7),a.Q6J("ngForOf",t.noticesServ.noticesCollec))},directives:[i.sg,i.O5],pipes:[i.Nd],styles:["section.screen[_ngcontent-%COMP%]   section[_ngcontent-%COMP%]{padding:10px 15px;background-color:#96a94b8a}section.screen[_ngcontent-%COMP%]   section[_ngcontent-%COMP%]   header[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]{float:right}aside[_ngcontent-%COMP%]:first-child{background-color:#96a94b;flex-grow:1;min-width:150px}*\r\n\r\naside[_ngcontent-%COMP%]:first-child   ul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]{cursor:pointer;padding:10px;margin-bottom:5px;background:#fff;transition:all .3s ease}aside[_ngcontent-%COMP%]:first-child   ul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]{margin-top:-5px;float:right}aside[_ngcontent-%COMP%]:first-child   ul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]:hover{background:grey}aside[_ngcontent-%COMP%]:first-child > *[_ngcontent-%COMP%]{width:100%}section.screen[_ngcontent-%COMP%] > section[_ngcontent-%COMP%]{flex-grow:3;min-width:30%}aside[_ngcontent-%COMP%]:nth-child(3){flex-grow:4;min-width:40%;background-color:#96a94b2c;padding:0}aside[_ngcontent-%COMP%]:nth-child(3)   .notice[_ngcontent-%COMP%]{width:50%}aside[_ngcontent-%COMP%]:nth-child(3)   section[_ngcontent-%COMP%], aside[_ngcontent-%COMP%]:nth-child(3)   ul[_ngcontent-%COMP%]{padding:0;margin:0}"]}),e})();function wt(e,t){1&e&&(a.TgZ(0,"button"),a._uU(1,"Enregistrer"),a.qZA())}function Pt(e,t){if(1&e&&(a.TgZ(0,"li"),a._uU(1),a.qZA()),2&e){const e=t.$implicit;a.xp6(1),a.AsE(" ",e.key," : ",e.value," ... ")}}let Ft=(()=>{class e{constructor(e){this.uServ=e}ngOnInit(){this.env=l.N}}return e.\u0275fac=function(t){return new(t||e)(a.Y36(Z.e))},e.\u0275cmp=a.Xpm({type:e,selectors:[["app-parametres"]],decls:19,vars:5,consts:[[1,"screen","triple"],["name","serv",3,"ngModel","ngModelChange"],["ctlServ","ngModel"],[4,"ngIf"],[4,"ngFor","ngForOf"]],template:function(e,t){if(1&e&&(a.TgZ(0,"section",0),a.TgZ(1,"aside"),a.TgZ(2,"h2"),a._uU(3,"Param\xe8tres"),a.qZA(),a.qZA(),a.TgZ(4,"section"),a.TgZ(5,"h2"),a._uU(6,"Serveur de donn\xe9es"),a.qZA(),a.TgZ(7,"p"),a._uU(8,"Adresse de la base de donn\xe9es :"),a.qZA(),a.TgZ(9,"input",1,2),a.NdJ("ngModelChange",function(e){return t.env.SERV=e}),a.qZA(),a.YNc(11,wt,2,0,"button",3),a._UZ(12,"p"),a.qZA(),a.TgZ(13,"aside"),a.TgZ(14,"h2"),a._uU(15,"Votre profil"),a.qZA(),a.TgZ(16,"ul"),a.YNc(17,Pt,2,2,"li",4),a.ALo(18,"keyvalue"),a.qZA(),a.qZA(),a.qZA()),2&e){const e=a.MAs(10);a.xp6(9),a.Q6J("ngModel",t.env.SERV),a.xp6(2),a.Q6J("ngIf",e.touched),a.xp6(6),a.Q6J("ngForOf",a.lcZ(18,3,t.uServ.userAuth))}},directives:[o.Fj,o.JJ,o.On,i.O5,i.sg],pipes:[i.Nd],styles:["section.triple[_ngcontent-%COMP%] > section[_ngcontent-%COMP%]{width:35vw}section.triple[_ngcontent-%COMP%] > aside[_ngcontent-%COMP%]:first-child{width:30vw}section.triple[_ngcontent-%COMP%] > aside[_ngcontent-%COMP%]:nth-child(3){width:35vw}section.screen[_ngcontent-%COMP%]   section[_ngcontent-%COMP%]{padding:10px 15px}section.screen[_ngcontent-%COMP%]   section[_ngcontent-%COMP%]   header[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]{float:right}aside[_ngcontent-%COMP%]:first-child{background-color:#f06060;flex-grow:1;min-width:150px;color:#fff}*[_ngcontent-%COMP%]   aside[_ngcontent-%COMP%]:first-child   ul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]{cursor:pointer;padding:10px;margin-bottom:5px;background:#fff;transition:all .3s ease}aside[_ngcontent-%COMP%]:first-child   ul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]{margin-top:-5px;float:right}aside[_ngcontent-%COMP%]:first-child   ul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]:hover{background:grey}aside[_ngcontent-%COMP%]:first-child > *[_ngcontent-%COMP%]{width:100%}section.screen[_ngcontent-%COMP%] > *[_ngcontent-%COMP%]{flex-grow:1}aside[_ngcontent-%COMP%]:nth-child(3){flex-grow:1;background-color:#f060607a;padding:0}aside[_ngcontent-%COMP%]:nth-child(3)   section[_ngcontent-%COMP%], aside[_ngcontent-%COMP%]:nth-child(3)   ul[_ngcontent-%COMP%]{padding:0;margin:0}"]}),e})();function yt(e,t){if(1&e&&(a.TgZ(0,"mat-checkbox",20),a._uU(1),a.qZA()),2&e){const e=t.$implicit;a.Q6J("value",e.alias),a.xp6(1),a.Oqu(e.titre)}}let Qt=(()=>{class e{constructor(e,t,n){this.setsServ=e,this.filtreServ=t,this.auth=n,this.fermer=new a.vpe}ngOnInit(){}}return e.\u0275fac=function(t){return new(t||e)(a.Y36(h),a.Y36(f.s),a.Y36(Z.e))},e.\u0275cmp=a.Xpm({type:e,selectors:[["app-set"]],inputs:{set:"set"},outputs:{fermer:"fermer"},decls:41,vars:9,consts:[[1,"unique"],[3,"click"],["for","titre"],["name","titre","required","",3,"ngModel","ngModelChange"],["for","alias"],["name","alias","required","","pattern","[a-z0-9-]+",3,"ngModel","ngModelChange"],["for","description"],["mat-input","","name","description",3,"ngModel","ngModelChange"],["for","fonds"],["name","fonds","required","",3,"ngModel","ngModelChange"],["for","date"],["name","date","required","",3,"ngModel","ngModelChange"],["for","createur"],["name","createur",3,"ngModel","ngModelChange"],["for","gest"],["name","gest",3,"ngModel","ngModelChange"],["for","prefix"],["checked","",3,"value",4,"ngFor","ngForOf"],[1,"invalid",3,"click"],[1,"valid",3,"click"],["checked","",3,"value"]],template:function(e,t){1&e&&(a.TgZ(0,"section",0),a.TgZ(1,"header"),a.TgZ(2,"h3"),a._uU(3,"Informations sur la set "),a.TgZ(4,"mat-icon",1),a.NdJ("click",function(){return t.fermer.emit(!1)}),a._uU(5,"close"),a.qZA(),a.qZA(),a.TgZ(6,"h2"),a._uU(7),a.qZA(),a.qZA(),a.TgZ(8,"form"),a.TgZ(9,"section"),a.TgZ(10,"label",2),a._uU(11,"Titre"),a.qZA(),a.TgZ(12,"input",3),a.NdJ("ngModelChange",function(e){return t.set.titre=e}),a.qZA(),a.TgZ(13,"label",4),a._uU(14,"Alias"),a.qZA(),a.TgZ(15,"input",5),a.NdJ("ngModelChange",function(e){return t.set.alias=e}),a.qZA(),a.TgZ(16,"label",6),a._uU(17,"Description"),a.qZA(),a.TgZ(18,"textarea",7),a.NdJ("ngModelChange",function(e){return t.set.description=e}),a._uU(19,"            "),a.qZA(),a.TgZ(20,"label",8),a._uU(21,"Fonds"),a.qZA(),a.TgZ(22,"input",9),a.NdJ("ngModelChange",function(e){return t.set.fonds=e}),a.qZA(),a.TgZ(23,"label",10),a._uU(24,"Date de cr\xe9ation"),a.qZA(),a.TgZ(25,"input",11),a.NdJ("ngModelChange",function(e){return t.set.date=e}),a.qZA(),a.TgZ(26,"label",12),a._uU(27,"Createur"),a.qZA(),a.TgZ(28,"input",13),a.NdJ("ngModelChange",function(e){return t.set.createur=e}),a.qZA(),a.TgZ(29,"label",14),a._uU(30,"Gestionnaire"),a.qZA(),a.TgZ(31,"input",15),a.NdJ("ngModelChange",function(e){return t.set.gestionnaire=e}),a.qZA(),a.TgZ(32,"label",16),a._uU(33,"Prefix"),a.qZA(),a.YNc(34,yt,2,2,"mat-checkbox",17),a._UZ(35,"hr"),a.TgZ(36,"p"),a.TgZ(37,"button",18),a.NdJ("click",function(){return t.fermer.emit(!1)}),a._uU(38,"Annuler"),a.qZA(),a.TgZ(39,"button",19),a.NdJ("click",function(){return t.setsServ.majSet(t.set),t.fermer.emit(!1)}),a._uU(40,"Valider"),a.qZA(),a.qZA(),a.qZA(),a.qZA(),a.qZA()),2&e&&(a.xp6(7),a.Oqu(t.set.titre),a.xp6(5),a.Q6J("ngModel",t.set.titre),a.xp6(3),a.Q6J("ngModel",t.set.alias),a.xp6(3),a.Q6J("ngModel",t.set.description),a.xp6(4),a.Q6J("ngModel",t.set.fonds),a.xp6(3),a.Q6J("ngModel",t.set.date),a.xp6(3),a.Q6J("ngModel",t.set.createur),a.xp6(3),a.Q6J("ngModel",t.set.gestionnaire),a.xp6(3),a.Q6J("ngForOf",t.filtreServ.prefix))},directives:[T.Hw,o._Y,o.JL,o.F,o.Fj,o.Q7,o.JJ,o.On,o.c5,i.sg,Xe.oG],styles:[""]}),e})();function Yt(e,t){if(1&e){const e=a.EpF();a.TgZ(0,"li",8),a.NdJ("click",function(){const t=a.CHM(e).$implicit;return a.oxw().setOnClick(t._id)}),a._uU(1),a.qZA()}if(2&e){const e=t.$implicit;a.xp6(1),a.AsE(" ",e.titre," (fonds : ",e.fonds,") ")}}function It(e,t){if(1&e&&(a.TgZ(0,"li"),a.TgZ(1,"strong"),a._uU(2),a.qZA(),a._uU(3),a.qZA()),2&e){const e=a.oxw().$implicit;a.xp6(2),a.Oqu(e.key),a.xp6(1),a.hij(" : ",e.value," ")}}function Et(e,t){if(1&e&&(a.TgZ(0,"span"),a.YNc(1,It,4,2,"li",3),a.qZA()),2&e){const e=t.$implicit,n=a.oxw(3);a.xp6(1),a.Q6J("ngIf",n.getDocs(e.key))}}function Lt(e,t){if(1&e&&(a.TgZ(0,"article"),a.TgZ(1,"ul"),a.YNc(2,Et,2,1,"span",11),a.ALo(3,"keyvalue"),a.qZA(),a.qZA()),2&e){const e=a.oxw(2);a.xp6(2),a.Q6J("ngForOf",a.lcZ(3,1,e.setsServ.set))}}function jt(e,t){1&e&&a._UZ(0,"span")}function $t(e,t){if(1&e&&(a.TgZ(0,"li"),a.TgZ(1,"strong"),a._uU(2),a.qZA(),a.qZA()),2&e){const e=t.$implicit;a.xp6(2),a.Oqu(e.key)}}function Ht(e,t){if(1&e&&(a.YNc(0,$t,3,1,"li",11),a.ALo(1,"keyvalue")),2&e){const e=a.oxw().$implicit;a.Q6J("ngForOf",a.lcZ(1,1,e.value))}}function Dt(e,t){if(1&e&&(a.TgZ(0,"span"),a.YNc(1,jt,1,0,"span",13),a.YNc(2,Ht,2,3,"ng-template",null,14,a.W1O),a.qZA()),2&e){const e=t.$implicit,n=a.MAs(3),i=a.oxw(3);a.xp6(1),a.Q6J("ngIf","object"!==i.utils.typeOf(e.value))("ngIfElse",n)}}function zt(e,t){if(1&e&&(a.TgZ(0,"mat-expansion-panel"),a.TgZ(1,"mat-expansion-panel-header"),a.TgZ(2,"mat-panel-title"),a._uU(3),a.qZA(),a.qZA(),a.TgZ(4,"ul"),a.YNc(5,Dt,4,2,"span",11),a.ALo(6,"keyvalue"),a.qZA(),a.qZA()),2&e){const e=t.$implicit;a.xp6(3),a.hij(" ",e.key," "),a.xp6(2),a.Q6J("ngForOf",a.lcZ(6,2,e))}}function Vt(e,t){if(1&e){const e=a.EpF();a.TgZ(0,"div"),a.TgZ(1,"header"),a.TgZ(2,"div"),a.TgZ(3,"mat-icon",9),a.NdJ("click",function(){return a.CHM(e),a.oxw().delete=!0}),a._uU(4,"delete"),a.qZA(),a.TgZ(5,"mat-icon",10),a.NdJ("click",function(){return a.CHM(e),a.oxw().edit=!0}),a._uU(6,"edit"),a.qZA(),a.qZA(),a.TgZ(7,"h2"),a._uU(8,"Informations sur le SET s\xe9lectionn\xe9"),a.qZA(),a.qZA(),a.YNc(9,Lt,4,3,"article",3),a.TgZ(10,"article"),a.TgZ(11,"mat-accordion"),a.YNc(12,zt,7,4,"mat-expansion-panel",11),a.ALo(13,"keyvalue"),a.qZA(),a.qZA(),a.TgZ(14,"p",12),a.TgZ(15,"button",8),a.NdJ("click",function(){return a.CHM(e),a.oxw().afficheDocs=!0}),a._uU(16,"Afficher les documents du SET"),a.qZA(),a.TgZ(17,"button",8),a.NdJ("click",function(){return a.CHM(e),a.oxw().creeCollec=!0}),a._uU(18,"Cr\xe9er une collection \xe0 partir de ce SET"),a.qZA(),a.qZA(),a.qZA()}if(2&e){const e=a.oxw();a.xp6(9),a.Q6J("ngIf",e.setsServ.set),a.xp6(3),a.Q6J("ngForOf",a.lcZ(13,2,e.setsServ.set.documents[0]))}}function Rt(e,t){if(1&e&&(a.TgZ(0,"span"),a.TgZ(1,"strong"),a._uU(2),a.qZA(),a._uU(3),a.qZA()),2&e){const e=a.oxw(2).$implicit;a.xp6(2),a.Oqu(e.key),a.xp6(1),a.hij(" : ",e.value," ")}}function Bt(e,t){if(1&e&&(a.TgZ(0,"li"),a.TgZ(1,"strong"),a._uU(2),a.qZA(),a._uU(3),a.qZA()),2&e){const e=a.oxw().$implicit;a.xp6(2),a.Oqu(e.key),a.xp6(1),a.hij(" : ",e.value," ")}}function Xt(e,t){if(1&e&&(a.TgZ(0,"span"),a.YNc(1,Bt,4,2,"li",3),a.qZA()),2&e){const e=t.$implicit;a.xp6(1),a.Q6J("ngIf",e.value)}}function Gt(e,t){if(1&e&&(a.TgZ(0,"ul"),a.YNc(1,Xt,2,1,"span",11),a.ALo(2,"keyvalue"),a.qZA()),2&e){const e=a.oxw(2).$implicit;a.xp6(1),a.Q6J("ngForOf",a.lcZ(2,1,e.value))}}function Wt(e,t){if(1&e&&(a.TgZ(0,"li"),a.YNc(1,Rt,4,2,"span",13),a.YNc(2,Gt,3,3,"ng-template",null,14,a.W1O),a.qZA()),2&e){const e=a.MAs(3),t=a.oxw().$implicit,n=a.oxw(5);a.xp6(1),a.Q6J("ngIf","object"!==n.utils.typeOf(t.value))("ngIfElse",e)}}function Kt(e,t){if(1&e&&(a.TgZ(0,"span"),a.YNc(1,Wt,4,2,"li",3),a.qZA()),2&e){const e=t.$implicit;a.xp6(1),a.Q6J("ngIf",e.value)}}function en(e,t){if(1&e&&(a.TgZ(0,"li"),a.TgZ(1,"strong"),a._uU(2),a.qZA(),a.TgZ(3,"ul"),a.YNc(4,Kt,2,1,"span",11),a.ALo(5,"keyvalue"),a.qZA(),a.qZA()),2&e){const e=t.$implicit;a.xp6(2),a.Oqu(e.key),a.xp6(2),a.Q6J("ngForOf",a.lcZ(5,2,e.value))}}function tn(e,t){if(1&e&&(a.TgZ(0,"mat-expansion-panel"),a.TgZ(1,"mat-expansion-panel-header"),a.TgZ(2,"mat-panel-title"),a._uU(3),a.qZA(),a.qZA(),a.TgZ(4,"ul"),a.YNc(5,en,6,4,"li",11),a.ALo(6,"keyvalue"),a.qZA(),a.qZA()),2&e){const e=t.$implicit,n=t.index;a.xp6(3),a.AsE(" ",n," : ",e.dublincore.title," "),a.xp6(2),a.Q6J("ngForOf",a.lcZ(6,3,e))}}function nn(e,t){if(1&e&&(a.TgZ(0,"mat-accordion"),a.YNc(1,tn,7,5,"mat-expansion-panel",11),a.qZA()),2&e){const e=a.oxw(2);a.xp6(1),a.Q6J("ngForOf",e.miniDocs)}}function on(e,t){if(1&e){const e=a.EpF();a.TgZ(0,"div",17),a.TgZ(1,"button",18),a.NdJ("click",function(){return a.CHM(e),a.oxw(2).pagine(-20)}),a._uU(2,"<"),a.qZA(),a.TgZ(3,"button",18),a.NdJ("click",function(){return a.CHM(e),a.oxw(2).pagine(20)}),a._uU(4,">"),a.qZA(),a.qZA()}if(2&e){const e=a.oxw(2);a.xp6(1),a.Q6J("disabled",e.page.min<20),a.xp6(2),a.Q6J("disabled",e.page.max>e.setsServ.set.documents.length-20)}}function cn(e,t){if(1&e&&(a.TgZ(0,"section",15),a.TgZ(1,"article"),a.YNc(2,nn,2,1,"mat-accordion",3),a._UZ(3,"hr"),a.YNc(4,on,5,2,"div",16),a.qZA(),a.qZA()),2&e){const e=a.oxw();a.xp6(2),a.Q6J("ngIf",e.setsServ.set),a.xp6(2),a.Q6J("ngIf",e.setsServ.set)}}function sn(e,t){if(1&e){const e=a.EpF();a.TgZ(0,"section",19),a.TgZ(1,"article"),a.TgZ(2,"h2"),a._uU(3,"Etes-vous s\xfbr.e ?"),a.qZA(),a.TgZ(4,"p"),a.TgZ(5,"mat-icon",20),a.NdJ("click",function(){return a.CHM(e),a.oxw().delete=!1}),a._uU(6,"cancel"),a.qZA(),a.TgZ(7,"mat-icon",21),a.NdJ("click",function(){a.CHM(e);const t=a.oxw();return t.setsServ.supprSet(t.setsServ.set._id),t.delete=!1}),a._uU(8,"check_circle"),a.qZA(),a.qZA(),a.qZA(),a.qZA()}}function rn(e,t){if(1&e){const e=a.EpF();a.TgZ(0,"app-set",22),a.NdJ("fermer",function(){return a.CHM(e),a.oxw().masque()}),a.qZA()}if(2&e){const e=a.oxw();a.Q6J("set",e.setsServ.set)}}function ln(e,t){if(1&e){const e=a.EpF();a.TgZ(0,"app-collection",23),a.NdJ("fermer",function(){return a.CHM(e),a.oxw().masque()}),a.qZA()}2&e&&a.Q6J("idCollection",-1)}const an=[{path:"",component:x,children:[{path:"",component:kt},{path:"notices",component:Pe},{path:"notice/:id",component:I},{path:"collections",component:Be},{path:"scanner",component:de},{path:"mappages",component:Mt},{path:"mappage/:id",component:Ct},{path:"filtres",component:At},{path:"filtre/:id",component:At},{path:"sets",component:(()=>{class e{constructor(e,t,n){this.setsServ=e,this.utils=t,this.auth=n,this.afficheDocs=!1,this.creeCollec=!1,this.delete=!1,this.edit=!1}ngOnInit(){this.page={min:0,max:20}}setOnClick(e){this.idSet=e,this.setsServ.getSet(e),this.afficheDocs=!1,this.setMiniDocs()}setMiniDocs(){this.miniDocs=this.utils.tronqueTab(this.setsServ.set.documents,this.page),console.log(this.miniDocs)}getDocs(e){return"documents"!=e}masque(){this.edit=!1,this.delete=!1,this.idSet=null,this.creeCollec=!1}pagine(e){this.page.min+=e,this.page.max+=e,console.log(this.page),this.setMiniDocs()}}return e.\u0275fac=function(t){return new(t||e)(a.Y36(h),a.Y36(m.F),a.Y36(Z.e))},e.\u0275cmp=a.Xpm({type:e,selectors:[["app-sets"]],decls:16,vars:6,consts:[[1,"screen","triple"],[1,"left-panel"],[3,"click",4,"ngFor","ngForOf"],[4,"ngIf"],["class","selection",4,"ngIf"],["class","pop-up",4,"ngIf"],["class","unique",3,"set","fermer",4,"ngIf"],["class","unique",3,"idCollection","fermer",4,"ngIf"],[3,"click"],["matTooltip","Supprimer le SET",3,"click"],["matTooltip","Modifier le SET",3,"click"],[4,"ngFor","ngForOf"],[1,"flex","justify-around"],[4,"ngIf","ngIfElse"],["elseObjM",""],[1,"selection"],["class","flex justify-center",4,"ngIf"],[1,"flex","justify-center"],[3,"disabled","click"],[1,"pop-up"],["matTooltip","Annuler la destruction",1,"grand",3,"click"],["matTooltip","Valider la destruction",1,"grand","vert",3,"click"],[1,"unique",3,"set","fermer"],[1,"unique",3,"idCollection","fermer"]],template:function(e,t){1&e&&(a.TgZ(0,"section",0),a.TgZ(1,"aside",1),a.TgZ(2,"header"),a.TgZ(3,"h1"),a._uU(4,"SETS disponibles"),a.qZA(),a.TgZ(5,"p"),a._uU(6,"S\xe9lectionnez un SET pour avoir ses informations."),a.qZA(),a.qZA(),a.TgZ(7,"ul"),a.YNc(8,Yt,2,2,"li",2),a.qZA(),a.qZA(),a.TgZ(9,"section"),a.YNc(10,Vt,19,4,"div",3),a.qZA(),a.TgZ(11,"aside"),a.YNc(12,cn,5,2,"section",4),a.qZA(),a.qZA(),a.YNc(13,sn,9,0,"section",5),a.YNc(14,rn,1,1,"app-set",6),a.YNc(15,ln,1,1,"app-collection",7)),2&e&&(a.xp6(8),a.Q6J("ngForOf",t.setsServ.sets),a.xp6(2),a.Q6J("ngIf",t.setsServ.set),a.xp6(2),a.Q6J("ngIf",t.afficheDocs),a.xp6(1),a.Q6J("ngIf",t.delete),a.xp6(1),a.Q6J("ngIf",t.edit),a.xp6(1),a.Q6J("ngIf",t.creeCollec))},directives:[i.sg,i.O5,T.Hw,q.gM,j.pp,j.ib,j.yz,j.yK,Qt,ve],pipes:[i.Nd],styles:["section[_ngcontent-%COMP%]:nth-child(2){flex-grow:4;min-width:30%;background-color:rgba(235,151,78,.5);padding:0}aside[_ngcontent-%COMP%]:first-child{background-color:#eb974e}aside[_ngcontent-%COMP%]:nth-child(3){border-right:10px solid rgba(235,151,78,.5)}"]}),e})()},{path:"set/:id",component:Qt},{path:"parametres",component:Ft},{path:"profil",component:(()=>{class e{constructor(){}ngOnInit(){}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275cmp=a.Xpm({type:e,selectors:[["app-profil"]],decls:2,vars:0,template:function(e,t){1&e&&(a.TgZ(0,"p"),a._uU(1,"profil works!"),a.qZA())},styles:[""]}),e})()},{path:"aide",loadChildren:()=>n.e(545).then(n.bind(n,2545)).then(e=>e.AideModule)}]}];let un=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=a.oAB({type:e}),e.\u0275inj=a.cJS({imports:[[s.Bz.forChild(an)],s.Bz]}),e})();var gn=n(6799);let dn=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=a.oAB({type:e}),e.\u0275inj=a.cJS({providers:[d,r.a,m.F,f.s,L,gn.g,A,fe],imports:[[i.ez,un,c.q,o.u5,o.UX]]}),e})()},3192:function(e,t,n){"use strict";n.d(t,{F:function(){return o}});var i=n(7716);let o=(()=>{class e{constructor(){this.params={limite:20,langue:"fr_FR"},this.limite=30}typeOf(e){return Array.isArray(e)?"array":typeof e}tronqueTab(e,t){return e.slice(t.min,t.max)}getObj(e){return"object"!=typeof e}setFormat(e){switch(console.log(e),e){case"mp3":case"oga":case"ogg":case"aac":return"audio/"+e;case"wav":return"audio/x-wav";case"mp4":case"webm":case"ogv":case"vba":return"video/"+e;case"rtf":case"pdf":return"application/"+e;case"jpg":case"jpeg":case"gif":case"png":case"webp":return"image/"+e;default:return!1}}setNoticeBg(e){const t=e.metadonnees.dublincore.format;let n="";return n=!t||-1==t.indexOf("video")&&-1==t.indexOf("audio")?t&&-1!=t.indexOf("application")?"assets/img/pictos/picto_docs.png":e.metadonnees.media.url:e.metadonnees.dublincore.coverage?e.metadonnees.dublincore.coverage:"assets/img/pictos/picto_media.png",`url("${n}")`}play(e){if(e.currentTarget.previousElementSibling){let t=e.currentTarget.previousElementSibling;-1==t.tagName.indexOf("VIDEO")&&-1==t.tagName.indexOf("AUDIO")||t.play()}}pause(e){if(e.currentTarget.previousElementSibling){let t=e.currentTarget.previousElementSibling;-1==t.tagName.indexOf("VIDEO")&&-1==t.tagName.indexOf("AUDIO")||t.pause()}}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275prov=i.Yz7({token:e,factory:e.\u0275fac,providedIn:"root"}),e})()}}]);