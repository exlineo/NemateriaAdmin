!function(){function e(e,t){var i="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!i){if(Array.isArray(e)||(i=function(e,t){if(!e)return;if("string"==typeof e)return n(e,t);var i=Object.prototype.toString.call(e).slice(8,-1);"Object"===i&&e.constructor&&(i=e.constructor.name);if("Map"===i||"Set"===i)return Array.from(e);if("Arguments"===i||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i))return n(e,t)}(e))||t&&e&&"number"==typeof e.length){i&&(e=i);var o=0,c=function(){};return{s:c,n:function(){return o>=e.length?{done:!0}:{done:!1,value:e[o++]}},e:function(e){throw e},f:c}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var r,l=!0,s=!1;return{s:function(){i=i.call(e)},n:function(){var e=i.next();return l=e.done,e},e:function(e){s=!0,r=e},f:function(){try{l||null==i.return||i.return()}finally{if(s)throw r}}}}function n(e,n){(null==n||n>e.length)&&(n=e.length);for(var t=0,i=new Array(n);t<n;t++)i[t]=e[t];return i}function t(e,n){if(!(e instanceof n))throw new TypeError("Cannot call a class as a function")}function i(e,n){for(var t=0;t<n.length;t++){var i=n[t];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function o(e,n,t){return n&&i(e.prototype,n),t&&i(e,t),e}(self.webpackChunknemateria=self.webpackChunknemateria||[]).push([[103],{8103:function(n,i,c){"use strict";c.r(i),c.d(i,{IntranetModule:function(){return mt}});var r=c(8583),l=c(3679),s=c(2212),a=c(4655),u=c(6868),g=c(2340),f=c(7716),d=c(1841),p=c(6246),Z=function(){var e=function(){function e(n,i){t(this,e),this.http=n,this.notifServ=i,this.seriesCollec=[],this.notice={}}return o(e,[{key:"getNotices",value:function(){var e=this;this.http.get(g.N.SERV+"notices").subscribe(function(n){e.noticesAll=n.map(function(e){return e.metadonnees=e.metadonnees[0],e}),e.notifServ.notif("Notices charg\xe9es")},function(n){console.log(n),e.notifServ.notif("Erreur, les notices n'ont pu \xeatre r\xe9cup\xe9r\xe9es")})}},{key:"getNoticesByCollec",value:function(e){var n=this;this.noticesCollec=[],this.http.post(g.N.SERV+"notices/collection",e).subscribe(function(e){n.noticesCollec=Array.isArray(e[0].metadonnees)?e.map(function(e){return e.metadonnees=e.metadonnees[0],e}):e,console.log(n.noticesCollec),n.getSeries(),n.notifServ.notif("Les notices ont \xe9t\xe9 r\xe9cup\xe9r\xe9es")},function(e){console.log(e),n.notifServ.notif("Erreur dans la r\xe9cup\xe9ration des notices")})}},{key:"getNotice",value:function(e){this.notice={},this.noticesCollec&&(this.notice=this.noticesCollec.find(function(n){return n._id===e})),this.noticesAll&&(this.notice=this.noticesAll.find(function(n){return n._id===e}))}},{key:"updateNotice",value:function(e,n){var t=this;this.http.put(g.N.SERV+"notices/"+e,n).subscribe(function(e){console.log(e),t.notifServ.notif("Mise \xe0 jour de la notice effectu\xe9e")},function(e){console.log(e),t.notifServ.notif("Une erreur s'est produite dans l'enregistrement")})}},{key:"supprNotice",value:function(e){var n=this;this.http.delete(g.N.SERV+"notices/"+e).subscribe(function(e){console.log(e),n.notifServ.notif("La notice a \xe9t\xe9 supprim\xe9e")},function(e){console.log(e),n.notifServ.notif("Une erreur s'est produite dans l'enregistrement")})}},{key:"getSeries",value:function(){this.seriesCollec=[]}}]),e}();return e.\u0275fac=function(n){return new(n||e)(f.LFG(d.eN),f.LFG(p.g))},e.\u0275prov=f.Yz7({token:e,factory:e.\u0275fac,providedIn:"root"}),e}(),h=function e(){t(this,e),this.fonds="inconnu",this.prefix=["oai_dc","oai_nema"]},v=c(9956),m=c(6399),A=function(){var n=function(){function n(e,i,o){t(this,n),this.http=e,this.notifServ=i,this.auth=o,console.log("Service des connexions"),this.getSets()}return o(n,[{key:"getSets",value:function(){var e=this;this.http.get(g.N.SERV+"sets").subscribe(function(n){e.sets=n},function(n){console.log(n),e.notifServ.notif("Une erreur s'est produite dans l'enregistrement")})}},{key:"getSet",value:function(n){var t,i=e(this.sets);try{for(i.s();!(t=i.n()).done;){var o=t.value;o._id==n&&(this.set=o)}}catch(c){i.e(c)}finally{i.f()}}},{key:"supprSet",value:function(e){var n=this;this.http.delete(g.N.SERV+"sets/"+e).subscribe(function(t){n.sets.splice(n.sets.findIndex(function(n){return n._id==e}),1)},function(e){console.log(e),n.notifServ.notif("Une erreur s'est produite dans l'enregistrement")})}},{key:"majSet",value:function(e){var n=this;this.http.put(g.N.SERV+"sets/"+e._id,e).subscribe(function(e){n.notifServ.notif("Le SET a \xe9t\xe9 mis \xe0 jour")},function(e){console.log(e),n.notifServ.notif("Une erreur s'est produite dans l'enregistrement")})}},{key:"ajouteSet",value:function(e){var n=this;this.http.post(g.N.SERV+"sets",e).subscribe(function(e){console.log(e),n.notifServ.notif("Le SET a \xe9t\xe9 ajout\xe9")},function(e){console.log(e),n.notifServ.notif("Une erreur s'est produite dans l'enregistrement")})}},{key:"getFonds",value:function(e){var n=this;this.http.get(g.N.SERV+"sets/"+e).subscribe(function(e){console.log(e),n.notifServ.notif("La liste des fonds a \xe9t\xe9 obtenue")},function(e){console.log(e),n.notifServ.notif("Une erreur s'est produite dans l'enregistrement")})}}]),n}();return n.\u0275fac=function(e){return new(e||n)(f.LFG(d.eN),f.LFG(p.g),f.LFG(m.e))},n.\u0275prov=f.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n}(),q=c(3192),T=function(){var e=function(){function e(n,i,o,c,r,l){t(this,e),this.http=n,this.notifServ=i,this.utils=o,this.filtreServ=c,this.setServ=r,this.auth=l,this.dir="",this.load=!1,this.init(),this.getListeDossiers()}return o(e,[{key:"init",value:function(){this.filtre=[],this.set=new h,this.metas=null,this.dir=""}},{key:"getListeDossiers",value:function(){var e=this;this.http.get(g.N.SERV+"scans").subscribe(function(n){e.listeDossiers=n,e.notifServ.notif("Liste des dossiers r\xe9cup\xe9r\xe9e")},function(n){e.notifServ.notif("Nous n'avons pas la liste des dossiers")})}},{key:"getMetaFiles",value:function(e,n){var t=this;this.http.get(g.N.SERV+"scans/"+e,{params:{f:n}}).subscribe(function(e){t.scans=e.data,t.notifServ.notif("Metadonn\xe9es scann\xe9es")},function(e){t.notifServ.notif("Les donn\xe9es n'ont pu \xeatre scann\xe9es")})}},{key:"getDir",value:function(e){var n=this;this.scans=null,this.load=!0,this.dir=e,this.http.get(g.N.SERV+"scans/"+e).subscribe(function(e){n.scans=e.data,n.load=!1,n.notifServ.notif("Metadonn\xe9es scann\xe9es")},function(e){n.notifServ.notif("Erreur dans le scan des dossiers du serveur")})}},{key:"setMetas",value:function(e,n){var t=this;this.auth.userAuth.statut>=2&&(this.metas=e.metadonnees,this.set=n,this.set.documents=[],this.set.documents=this.scans.map(function(e){return t.filtreAPlat(e)}),this.enregistreSet())}},{key:"filtreAPlat",value:function(e){var n={};for(var t in this.metas)if("object"!=typeof this.metas[t]||Array.isArray(this.metas[t]))this.setPropriete(t,n,e);else for(var i in n[t]={},this.metas[t])if("object"!=typeof this.metas[t][i]||Array.isArray(this.metas[t][i]))this.setPropriete(i,n[t],e);else for(var o in n[t][i]={},this.metas[t][i])this.setPropriete(o,n[t][i],e);return e.identifier||(n.dublincore.identifier=e.identifiant_unique?"oai:nemateria.net/"+e.identifiant_unique:"oai:nemateria.net/"+Date.now()),e.date||(n.dublincore.date=e.date_creation_original?e.date_creation_original:Date.now()),n.dublincore.format=this.utils.setFormat(e.SourceFile.slice(e.SourceFile.lastIndexOf(".")+1,e.SourceFile.length)),!this.set.prefix||(n.prefix=this.set.prefix),n}},{key:"setPropriete",value:function(e,n,t){var i=this.cap(e);console.log(i,t[i]),"url"===e.toLowerCase()&&(t[i]=this.setURL(t.SourceFile)),"coverage"===e.toLowerCase()&&t[i]&&(t[i]=this.setURL(t[i])),"file"===e&&(t[i]=this.setFile(t.SourceFile)),t.hasOwnProperty(i)&&(n[e]=t[i])}},{key:"enregistreSet",value:function(){var e=this;this.http.post(g.N.SERV+"sets/",this.set).subscribe(function(n){e.setServ.getSets(),e.notifServ.notif("SET enregistr\xe9")},function(n){e.notifServ.notif("Erreur dans l'enregistrement du SET")})}},{key:"cap",value:function(e){return e.charAt(0).toUpperCase()+e.slice(1)}},{key:"setURL",value:function(e){return-1!=e.indexOf(g.N.DIR)&&(e=e.slice(e.lastIndexOf("/")+1,e.length)),g.N.ADR+g.N.DIR+this.dir+"/"+e}},{key:"setFile",value:function(e){return e.substr(e.lastIndexOf("/")+1,e.length)}}]),e}();return e.\u0275fac=function(n){return new(n||e)(f.LFG(d.eN),f.LFG(p.g),f.LFG(q.F),f.LFG(v.s),f.LFG(A),f.LFG(m.e))},e.\u0275prov=f.Yz7({token:e,factory:e.\u0275fac,providedIn:"root"}),e}(),_=c(1436),x=c(6627),M=function(){var e=function(){function e(n){t(this,e),this.authServ=n}return o(e,[{key:"ngOnInit",value:function(){}},{key:"toggleActif",value:function(e){}}]),e}();return e.\u0275fac=function(n){return new(n||e)(f.Y36(m.e))},e.\u0275cmp=f.Xpm({type:e,selectors:[["app-sidenav"]],decls:49,vars:0,consts:[[1,"logo"],["href","","routerLink","/intranet","title","Nemateria || Valorisation de collections num\xe9ris\xe9es"],["src","./assets/img/Logo_Nemateria_v.png","alt","Nemateria || Valorisation de collections num\xe9ris\xe9es"],["routerLinkActive","active","routerLink","/intranet","matTooltip","Retourner \xe0 l'accueil"],["routerLinkActive","active","routerLink","/intranet/collections","matTooltip","Acc\xe9der aux collections"],["routerLinkActive","active","routerLink","/intranet/notices","matTooltip","Acc\xe9der aux notices"],["routerLinkActive","active","routerLink","/intranet/scanner","matTooltip","Scanner les dossiers pour constituer des collections"],["routerLinkActive","active","routerLink","/intranet/sets","matTooltip","Liste des SETS et fonds"],["routerLinkActive","active","routerLink","/intranet/filtres","matTooltip","Cr\xe9er des filtres dans les donn\xe9es"],["routerLinkActive","active","routerLink","/intranet/mappages","matTooltip","Mapper les donn\xe9es pour un moissonnage futur"],[1,"settings"],["routerLinkActive","active","matTooltip","Se d\xe9connecter",3,"click"],["routerLinkActive","active","routerLink","/intranet/profil","matTooltip","Acc\xe9der \xe0 mon profil"],["routerLinkActive","active","routerLink","/intranet/aide","matTooltip","Un peu d'aide ?"],["routerLinkActive","active","routerLink","/intranet/parametres","matTooltip","Votre profil et vos param\xe8tres"]],template:function(e,n){1&e&&(f.TgZ(0,"header",0),f.TgZ(1,"a",1),f._UZ(2,"img",2),f.qZA(),f.qZA(),f.TgZ(3,"nav"),f.TgZ(4,"ul"),f._UZ(5,"hr"),f.TgZ(6,"li"),f.TgZ(7,"a",3),f.TgZ(8,"mat-icon"),f._uU(9,"dashboard"),f.qZA(),f.qZA(),f.qZA(),f.TgZ(10,"li"),f.TgZ(11,"a",4),f.TgZ(12,"mat-icon"),f._uU(13,"collections"),f.qZA(),f.qZA(),f.qZA(),f.TgZ(14,"li"),f.TgZ(15,"a",5),f.TgZ(16,"mat-icon"),f._uU(17,"burst_mode"),f.qZA(),f.qZA(),f.qZA(),f._UZ(18,"hr"),f.TgZ(19,"li"),f.TgZ(20,"a",6),f.TgZ(21,"mat-icon"),f._uU(22,"scanner"),f.qZA(),f.qZA(),f.qZA(),f.TgZ(23,"li"),f.TgZ(24,"a",7),f.TgZ(25,"mat-icon"),f._uU(26,"all_inbox"),f.qZA(),f.qZA(),f.qZA(),f.TgZ(27,"li"),f.TgZ(28,"a",8),f.TgZ(29,"mat-icon"),f._uU(30,"photo_filter"),f.qZA(),f.qZA(),f.qZA(),f.TgZ(31,"li"),f.TgZ(32,"a",9),f.TgZ(33,"mat-icon"),f._uU(34,"explore_off"),f.qZA(),f.qZA(),f.qZA(),f._UZ(35,"hr"),f.qZA(),f.qZA(),f.TgZ(36,"section",10),f.TgZ(37,"a",11),f.NdJ("click",function(){return n.authServ.deconnexion()}),f.TgZ(38,"mat-icon"),f._uU(39,"remove_circle_outline"),f.qZA(),f.qZA(),f.TgZ(40,"a",12),f.TgZ(41,"mat-icon"),f._uU(42,"account_circle"),f.qZA(),f.qZA(),f.TgZ(43,"a",13),f.TgZ(44,"mat-icon"),f._uU(45,"help_outline"),f.qZA(),f.qZA(),f.TgZ(46,"a",14),f.TgZ(47,"mat-icon"),f._uU(48,"settings"),f.qZA(),f.qZA(),f.qZA())},directives:[a.yS,a.Od,_.gM,x.Hw],styles:['nav[_ngcontent-%COMP%]{margin:auto 0}nav[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]{display:flex;flex-direction:column;margin:0;padding:0}nav[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]{margin:0 auto 8px;background-color:#fff;list-style:none}nav[_ngcontent-%COMP%]   li[_ngcontent-%COMP%], nav[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{width:48px;height:48px}nav[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{color:#000;display:flex;transition:all .3s ease}nav[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]:hover{background-color:#ffd600}nav[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]{margin:auto;display:block}.active[_ngcontent-%COMP%]{background-color:#eb974e}header.logo[_ngcontent-%COMP%]{width:100%;margin:15px 0;min-height:10vh}header.logo[_ngcontent-%COMP%]:hover{text-shadow:0 0 5px #000}.logo[_ngcontent-%COMP%]{display:flex;width:100%;font-size:8px;color:#ffd600}.logo[_ngcontent-%COMP%]   *[_ngcontent-%COMP%]{box-sizing:padding-box}.logo[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:100%}.logo[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{color:#ffd600;margin:auto}.logo[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]:nth-child(2){margin:auto;width:100%;line-height:75px}.logo[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{margin:auto;width:100%;text-align:center;line-height:.8em;font-family:Lora,Arial,sans-serif;font-size:14px}.logo[_ngcontent-%COMP%]   h5[_ngcontent-%COMP%]{line-height:.5em;font-weight:400}.logo[_ngcontent-%COMP%]   .square[_ngcontent-%COMP%]{height:40px;width:40px;overflow:hidden;content:"";position:absolute;margin-left:40px;margin-top:9px;transform:rotate(45deg);transform-origin:0 0}.logo[_ngcontent-%COMP%]   .square[_ngcontent-%COMP%]:after, .logo[_ngcontent-%COMP%]   .square[_ngcontent-%COMP%]:before, .logo[_ngcontent-%COMP%]   .square[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]:after, .logo[_ngcontent-%COMP%]   .square[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]:before{background-color:#ffd600;position:absolute;content:"";display:block;transition:all .4s ease-in-out}.logo[_ngcontent-%COMP%]   .square[_ngcontent-%COMP%]:after, .logo[_ngcontent-%COMP%]   .square[_ngcontent-%COMP%]:before{height:2px;width:40%}.logo[_ngcontent-%COMP%]   .square[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]:after, .logo[_ngcontent-%COMP%]   .square[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]:before{width:2px;height:40%}.logo[_ngcontent-%COMP%]   .square[_ngcontent-%COMP%]:before, .logo[_ngcontent-%COMP%]   .square[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]:before{left:0;top:0}.logo[_ngcontent-%COMP%]   .square[_ngcontent-%COMP%]:after, .logo[_ngcontent-%COMP%]   .square[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]:after{bottom:0;right:0}.settings[_ngcontent-%COMP%]{position:absolute;bottom:0;padding:10px;width:100%;display:flex;flex-flow:column nowrap;justify-content:space-between;color:#fff}.settings[_ngcontent-%COMP%] > *[_ngcontent-%COMP%]{margin:auto}.settings[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]{color:#fff}']}),e}(),C=function(){var e=function(){function e(n,i,o){t(this,e),this.colServ=n,this.noticesServ=i,this.scanServ=o}return o(e,[{key:"ngOnInit",value:function(){}}]),e}();return e.\u0275fac=function(n){return new(n||e)(f.Y36(u.a),f.Y36(Z),f.Y36(T))},e.\u0275cmp=f.Xpm({type:e,selectors:[["app-interface"]],decls:5,vars:0,template:function(e,n){1&e&&(f.TgZ(0,"main"),f.TgZ(1,"section"),f._UZ(2,"app-sidenav"),f.qZA(),f.TgZ(3,"section"),f._UZ(4,"router-outlet"),f.qZA(),f.qZA())},directives:[M,a.lC],styles:["main[_ngcontent-%COMP%]{display:inline-flex}section[_ngcontent-%COMP%]:first-child{width:90px;background-color:#304753}section[_ngcontent-%COMP%]:nth-child(2){width:calc(100% - 90px);height:100vh;flex-flow:column nowrap}app-sidenav[_ngcontent-%COMP%]{position:relative}"]}),e}(),O=c(9075);function k(e,n){if(1&e&&(f.TgZ(0,"p"),f._UZ(1,"img",3),f.qZA()),2&e){var t=f.oxw();f.xp6(1),f.Q6J("src",t.noticeServ.notice.metadonnees.media.url,f.LSH)}}function N(e,n){if(1&e&&(f.TgZ(0,"p",4),f.TgZ(1,"video",5),f._UZ(2,"source",6),f.qZA(),f.qZA()),2&e){var t=f.oxw();f.xp6(2),f.Q6J("src",t.noticeServ.notice.metadonnees.media.url,f.LSH)("type",t.noticeServ.notice.metadonnees.dublincore.format)}}function S(e,n){if(1&e&&(f.TgZ(0,"p",4),f._UZ(1,"source",6),f.qZA()),2&e){var t=f.oxw();f.xp6(1),f.Q6J("src",t.noticeServ.notice.metadonnees.media.url,f.LSH)("type",t.noticeServ.notice.metadonnees.dublincore.format)}}function y(e,n){if(1&e&&(f.TgZ(0,"p"),f._UZ(1,"iframe",3),f.qZA()),2&e){var t=f.oxw();f.xp6(1),f.Q6J("src",t.dom.bypassSecurityTrustResourceUrl(t.noticeServ.notice.metadonnees.media.url),f.uOi)}}function U(e,n){if(1&e&&(f.TgZ(0,"span"),f.TgZ(1,"strong"),f._uU(2),f.qZA(),f._uU(3),f.qZA()),2&e){var t=f.oxw().$implicit;f.xp6(2),f.Oqu(t.key),f.xp6(1),f.hij(" : ",t.value," ")}}function J(e,n){if(1&e&&(f.TgZ(0,"span"),f.TgZ(1,"strong"),f._uU(2),f.qZA(),f._uU(3),f.qZA()),2&e){var t=f.oxw().$implicit;f.xp6(2),f.Oqu(t.key),f.xp6(1),f.hij(" : ",t.value," ")}}function b(e,n){if(1&e&&(f.TgZ(0,"span"),f.TgZ(1,"strong"),f._uU(2),f.qZA(),f._uU(3),f.qZA()),2&e){var t=f.oxw().$implicit;f.xp6(2),f.Oqu(t.key),f.xp6(1),f.hij(" : ",t.value," ")}}function w(e,n){if(1&e&&(f.TgZ(0,"li"),f.TgZ(1,"strong"),f._uU(2),f.qZA(),f._uU(3),f.qZA()),2&e){var t=n.$implicit;f.xp6(2),f.Oqu(t.key),f.xp6(1),f.hij(" : ",t.value," ")}}function P(e,n){if(1&e&&(f.TgZ(0,"strong"),f._uU(1),f.qZA(),f.TgZ(2,"ul"),f.YNc(3,w,4,2,"li",7),f.ALo(4,"keyvalue"),f.qZA()),2&e){var t=f.oxw().$implicit;f.xp6(1),f.Oqu(t.key),f.xp6(2),f.Q6J("ngForOf",f.lcZ(4,2,t.value))}}function F(e,n){if(1&e&&(f.TgZ(0,"li"),f.YNc(1,b,4,2,"span",8),f.YNc(2,P,5,4,"ng-template",null,11,f.W1O),f.qZA()),2&e){var t=n.$implicit,i=f.MAs(3),o=f.oxw(6);f.xp6(1),f.Q6J("ngIf","object"!==o.utils.typeOf(t.value))("ngIfElse",i)}}function Q(e,n){if(1&e&&(f.TgZ(0,"strong"),f._uU(1),f.qZA(),f.TgZ(2,"ul"),f.YNc(3,F,4,2,"li",7),f.ALo(4,"keyvalue"),f.qZA()),2&e){var t=f.oxw().$implicit;f.xp6(1),f.Oqu(t.key),f.xp6(2),f.Q6J("ngForOf",f.lcZ(4,2,t.value))}}function Y(e,n){if(1&e&&(f.TgZ(0,"li"),f.YNc(1,J,4,2,"span",8),f.YNc(2,Q,5,4,"ng-template",null,10,f.W1O),f.qZA()),2&e){var t=n.$implicit,i=f.MAs(3),o=f.oxw(4);f.xp6(1),f.Q6J("ngIf","object"!==o.utils.typeOf(t.value))("ngIfElse",i)}}function I(e,n){if(1&e&&(f.TgZ(0,"strong"),f._uU(1),f.qZA(),f.TgZ(2,"ul"),f.YNc(3,Y,4,2,"li",7),f.ALo(4,"keyvalue"),f.qZA()),2&e){var t=f.oxw().$implicit;f.xp6(1),f.Oqu(t.key),f.xp6(2),f.Q6J("ngForOf",f.lcZ(4,2,t.value))}}function E(e,n){if(1&e&&(f.TgZ(0,"li"),f.YNc(1,U,4,2,"span",8),f.YNc(2,I,5,4,"ng-template",null,9,f.W1O),f.qZA()),2&e){var t=n.$implicit,i=f.MAs(3),o=f.oxw(2);f.xp6(1),f.Q6J("ngIf","object"!==o.utils.typeOf(t.value))("ngIfElse",i)}}function L(e,n){if(1&e&&(f.TgZ(0,"article"),f.TgZ(1,"ul"),f.YNc(2,E,4,2,"li",7),f.ALo(3,"keyvalue"),f.qZA(),f.qZA()),2&e){var t=f.oxw();f.xp6(2),f.Q6J("ngForOf",f.lcZ(3,1,t.noticeServ.notice))}}var j=function(){var e=function(){function e(n,i,o,c){t(this,e),this.noticeServ=n,this.utils=i,this.dom=o,this.auth=c,this.fermer=new f.vpe,this.update=!1,this.noticeServ.getNotice(this.idNotice)}return o(e,[{key:"ngOnInit",value:function(){console.log(this.idNotice),this.noticeServ.getNotice(this.idNotice);try{this.noticeServ.getNotice(this.idNotice),console.log("try")}catch(e){this.update=!0,this.noticeServ.notice={}}console.log(this.noticeServ.notice)}},{key:"ngOnDestroy",value:function(){this.noticeServ.notice={}}}]),e}();return e.\u0275fac=function(n){return new(n||e)(f.Y36(Z),f.Y36(q.F),f.Y36(O.H7),f.Y36(m.e))},e.\u0275cmp=f.Xpm({type:e,selectors:[["app-notice"]],inputs:{idNotice:"idNotice"},outputs:{fermer:"fermer"},decls:11,vars:6,consts:[[3,"click"],[4,"ngIf"],["class","media",4,"ngIf"],[3,"src"],[1,"media"],["controls",""],[3,"src","type"],[4,"ngFor","ngForOf"],[4,"ngIf","ngIfElse"],["elseBlockN",""],["elseObjM",""],["elseBlockL",""]],template:function(e,n){1&e&&(f.TgZ(0,"section"),f.TgZ(1,"mat-icon",0),f.NdJ("click",function(){return n.fermer.emit(!1)}),f._uU(2,"close"),f.qZA(),f.TgZ(3,"header"),f.TgZ(4,"h1"),f._uU(5),f.qZA(),f.YNc(6,k,2,1,"p",1),f.YNc(7,N,3,2,"p",2),f.YNc(8,S,2,2,"p",2),f.YNc(9,y,2,1,"p",1),f.qZA(),f.YNc(10,L,4,3,"article",1),f.qZA()),2&e&&(f.xp6(5),f.Oqu(n.noticeServ.notice.metadonnees.dublincore.title),f.xp6(1),f.Q6J("ngIf",n.noticeServ.notice.metadonnees.dublincore.format&&-1!=n.noticeServ.notice.metadonnees.dublincore.format.indexOf("image")),f.xp6(1),f.Q6J("ngIf",n.noticeServ.notice.metadonnees.dublincore.format&&-1!=n.noticeServ.notice.metadonnees.dublincore.format.indexOf("video")),f.xp6(1),f.Q6J("ngIf",n.noticeServ.notice.metadonnees.dublincore.format&&-1!=n.noticeServ.notice.metadonnees.dublincore.format.indexOf("audio")),f.xp6(1),f.Q6J("ngIf",n.noticeServ.notice.metadonnees.dublincore.format&&-1!=n.noticeServ.notice.metadonnees.dublincore.format.indexOf("application")),f.xp6(1),f.Q6J("ngIf",!n.update))},directives:[x.Hw,r.O5,r.sg],pipes:[r.Nd],styles:["section[_ngcontent-%COMP%]{padding:10px 20px;flex-flow:row wrap}section[_ngcontent-%COMP%]   article[_ngcontent-%COMP%], section[_ngcontent-%COMP%]   header[_ngcontent-%COMP%]{width:100%}section[_ngcontent-%COMP%]   header[_ngcontent-%COMP%]{display:flex}section[_ngcontent-%COMP%]   header[_ngcontent-%COMP%] > *[_ngcontent-%COMP%]{margin:auto}h1[_ngcontent-%COMP%], section[_ngcontent-%COMP%]   header[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{width:100%}h1[_ngcontent-%COMP%]{padding:10px;text-align:center}audio[_ngcontent-%COMP%], video[_ngcontent-%COMP%]{max-width:100%}iframe[_ngcontent-%COMP%]{width:100%;min-height:500px}"]}),e}(),$=c(9319),H=function(){var e=function e(){t(this,e)};return e.\u0275fac=function(n){return new(n||e)},e.\u0275prov=f.Yz7({token:e,factory:e.\u0275fac,providedIn:"root"}),e}(),D=c(171),z=c(4885);function V(e,n){if(1&e){var t=f.EpF();f.TgZ(0,"li",26),f.NdJ("click",function(){var e=f.CHM(t).$implicit;return f.oxw().scanOnClick(e)}),f._uU(1),f.qZA()}if(2&e){var i=n.$implicit;f.xp6(1),f.hij(" ",i," ")}}function R(e,n){if(1&e){var t=f.EpF();f.TgZ(0,"p"),f.TgZ(1,"button",26),f.NdJ("click",function(){return f.CHM(t),f.oxw().extraitSet()}),f._uU(2,"Extraire le sch\xe9ma des donn\xe9es pour un mappage"),f.qZA(),f.qZA()}}function B(e,n){if(1&e&&(f.TgZ(0,"span"),f.TgZ(1,"strong"),f._uU(2),f.qZA(),f._uU(3),f.qZA()),2&e){var t=f.oxw().$implicit;f.xp6(2),f.Oqu(t.key),f.xp6(1),f.hij(" : ",t.value," ")}}function X(e,n){if(1&e&&(f.TgZ(0,"span"),f.TgZ(1,"strong"),f._uU(2),f.qZA(),f._uU(3),f.qZA()),2&e){var t=f.oxw().$implicit;f.xp6(2),f.Oqu(t.key),f.xp6(1),f.hij(" : ",t.value," ")}}function G(e,n){if(1&e&&(f.TgZ(0,"li"),f.TgZ(1,"strong"),f._uU(2),f.qZA(),f._uU(3),f.qZA()),2&e){var t=n.$implicit;f.xp6(2),f.Oqu(t.key),f.xp6(1),f.hij(" : ",t.value," ")}}function W(e,n){if(1&e&&(f.TgZ(0,"strong"),f._uU(1),f.qZA(),f.TgZ(2,"ul"),f.YNc(3,G,4,2,"li",3),f.ALo(4,"keyvalue"),f.qZA()),2&e){var t=f.oxw().$implicit;f.xp6(1),f.Oqu(t.key),f.xp6(2),f.Q6J("ngForOf",f.lcZ(4,2,t.value))}}function K(e,n){if(1&e&&(f.TgZ(0,"li"),f.YNc(1,X,4,2,"span",27),f.YNc(2,W,5,4,"ng-template",null,29,f.W1O),f.qZA()),2&e){var t=n.$implicit,i=f.MAs(3),o=f.oxw(4);f.xp6(1),f.Q6J("ngIf","object"!==o.utils.typeOf(t.value))("ngIfElse",i)}}function ee(e,n){if(1&e&&(f.TgZ(0,"strong"),f._uU(1),f.qZA(),f.TgZ(2,"ul"),f.YNc(3,K,4,2,"li",3),f.ALo(4,"keyvalue"),f.qZA()),2&e){var t=f.oxw().$implicit;f.xp6(1),f.Oqu(t.key),f.xp6(2),f.Q6J("ngForOf",f.lcZ(4,2,t.value))}}function ne(e,n){if(1&e&&(f.TgZ(0,"li"),f.YNc(1,B,4,2,"span",27),f.YNc(2,ee,5,4,"ng-template",null,28,f.W1O),f.qZA()),2&e){var t=n.$implicit,i=f.MAs(3),o=f.oxw(2);f.xp6(1),f.Q6J("ngIf","object"!==o.utils.typeOf(t.value))("ngIfElse",i)}}function te(e,n){if(1&e&&(f.TgZ(0,"mat-expansion-panel"),f.TgZ(1,"mat-expansion-panel-header"),f.TgZ(2,"mat-panel-title"),f._uU(3),f.qZA(),f.qZA(),f.TgZ(4,"ul"),f.YNc(5,ne,4,2,"li",3),f.ALo(6,"keyvalue"),f.qZA(),f.qZA()),2&e){var t=n.$implicit;f.xp6(3),f.AsE(" ",t.Title," (",t.Identifiant_unique,") "),f.xp6(2),f.Q6J("ngForOf",f.lcZ(6,3,t))}}function ie(e,n){if(1&e){var t=f.EpF();f.TgZ(0,"div",30),f.TgZ(1,"button",31),f.NdJ("click",function(){return f.CHM(t),f.oxw().pagine(-20)}),f._uU(2,"<"),f.qZA(),f.TgZ(3,"button",31),f.NdJ("click",function(){return f.CHM(t),f.oxw().pagine(20)}),f._uU(4,">"),f.qZA(),f.qZA()}if(2&e){var i=f.oxw();f.xp6(1),f.Q6J("disabled",i.page.min<20),f.xp6(2),f.Q6J("disabled",i.page.max>i.scanServ.scans.length-20)}}function oe(e,n){if(1&e&&(f.TgZ(0,"option",32),f._uU(1),f.qZA()),2&e){var t=n.$implicit;f.Q6J("value",t._id),f.xp6(1),f.AsE("",t.titre," (",t.createur,")")}}function ce(e,n){if(1&e&&(f.TgZ(0,"h4"),f._uU(1),f.qZA()),2&e){var t=f.oxw();f.xp6(1),f.hij("Filtre s\xe9lectionn\xe9 : ",t.filtreChoisi.titre,"")}}function re(e,n){if(1&e&&(f.TgZ(0,"p"),f._uU(1),f.qZA()),2&e){var t=f.oxw();f.xp6(1),f.hij("Cr\xe9ateur : ",t.filtreChoisi.createur,"")}}function le(e,n){if(1&e&&(f.TgZ(0,"li"),f._uU(1),f.qZA()),2&e){var t=n.$implicit;f.xp6(1),f.AsE("",t.key," (",t.value,")")}}function se(e,n){if(1&e&&(f.TgZ(0,"ul"),f.YNc(1,le,2,2,"li",3),f.ALo(2,"keyvalue"),f.qZA()),2&e){var t=f.oxw().$implicit;f.xp6(1),f.Q6J("ngForOf",f.lcZ(2,1,t.value))}}function ae(e,n){if(1&e&&(f.TgZ(0,"span"),f._uU(1),f.qZA()),2&e){var t=f.oxw().$implicit;f.xp6(1),f.hij("(",t.value,")")}}function ue(e,n){if(1&e&&(f.TgZ(0,"li"),f._uU(1),f.YNc(2,se,3,3,"ul",2),f.YNc(3,ae,2,1,"span",2),f.qZA()),2&e){var t=n.$implicit,i=f.oxw(3);f.xp6(1),f.hij("",t.key," "),f.xp6(1),f.Q6J("ngIf","object"!==i.utils.typeOf(t.value)),f.xp6(1),f.Q6J("ngIf","object"===i.utils.typeOf(t.value))}}function ge(e,n){if(1&e&&(f.TgZ(0,"ul"),f.YNc(1,ue,4,3,"li",3),f.ALo(2,"keyvalue"),f.qZA()),2&e){var t=f.oxw().$implicit;f.xp6(1),f.Q6J("ngForOf",f.lcZ(2,1,t.value))}}function fe(e,n){if(1&e&&(f.TgZ(0,"span"),f._uU(1),f.qZA()),2&e){var t=f.oxw().$implicit;f.xp6(1),f.Oqu(t.value)}}function de(e,n){if(1&e&&(f.TgZ(0,"li"),f._uU(1),f.YNc(2,ge,3,3,"ul",2),f.YNc(3,fe,2,1,"span",2),f.qZA()),2&e){var t=n.$implicit,i=f.oxw();f.xp6(1),f.hij(" ",t.key," : "),f.xp6(1),f.Q6J("ngIf","object"!==i.utils.typeOf(t.value)),f.xp6(1),f.Q6J("ngIf","object"===i.utils.typeOf(t.value))}}function pe(e,n){1&e&&(f.TgZ(0,"section",33),f.TgZ(1,"article"),f.TgZ(2,"h2"),f._uU(3,"Scan des donn\xe9es"),f.qZA(),f._UZ(4,"mat-progress-spinner",34),f.qZA(),f.qZA())}var Ze=function(){var e=function(){function e(n,i,o,c,r,l){t(this,e),this.scanServ=n,this.filtresServ=i,this.mapServ=o,this.utils=c,this.router=r,this.auth=l}return o(e,[{key:"ngOnInit",value:function(){this.set=new h,this.set.date=Date.now(),this.filtreChoisi=new $.F,this.page={min:0,max:20}}},{key:"scanOnClick",value:function(e){this.set.titre=e,this.set.alias=e.toLowerCase(),this.set.origine={dir:g.N.DIR+e,url:g.N.SERV},this.scanServ.getDir(e)}},{key:"extraitSet",value:function(){this.mapServ.set.documents=this.scanServ.scans[0],this.router.navigateByUrl("/intranet/mappages")}},{key:"choixFiltre",value:function(){var e=this;this.filtreChoisi=this.filtresServ.filtres.find(function(n){return n._id==e._idFiltre}),console.log(this.filtreChoisi)}},{key:"creeSet",value:function(e){console.log(e.value),this.scanServ.setMetas(this.filtreChoisi,this.set)}},{key:"pagine",value:function(e){this.page.min+=e,this.page.max+=e,console.log(this.page)}},{key:"ngOnDestroy",value:function(){this.scanServ.scans=[]}}]),e}();return e.\u0275fac=function(n){return new(n||e)(f.Y36(T),f.Y36(v.s),f.Y36(H),f.Y36(q.F),f.Y36(a.F0),f.Y36(m.e))},e.\u0275cmp=f.Xpm({type:e,selectors:[["app-scanner"]],decls:74,vars:24,consts:[[1,"screen","triple"],[3,"click",4,"ngFor","ngForOf"],[4,"ngIf"],[4,"ngFor","ngForOf"],["class","flex justify-center",4,"ngIf"],[3,"ngSubmit"],["setfiltre","ngForm"],["for","fil"],["name","fil","required","",3,"ngModel","ngModelChange","change"],["ctlfil","ngModel"],["value","null"],[3,"value",4,"ngFor","ngForOf"],["for","titre"],["name","titre","placeholder","Le titre qui appara\xeetra dans l'adminitration","required","",3,"ngModel","ngModelChange"],["for","alias"],["name","alias","type","text","placeholder","Sans espaces, ni majuscules, ni caract\xe8res sp\xe9ciaux","required","",3,"ngModel","ngModelChange"],["for","fonds"],["name","fonds","type","text","placeholder","Saisissez le nom du fonds","required","",3,"ngModel","ngModelChange"],["for","desc"],["name","desc","placeholder","Donnez des informations g\xe9n\xe9rales sur le SET",3,"ngModel","ngModelChange"],["for","createur"],["name","createur","placeholder","Nom de la ou des personne(s)",3,"ngModel","ngModelChange"],["for","gestion"],["name","gestion","placeholder","Organiation et/ou personne(s) g\xe9rant le SET",3,"ngModel","ngModelChange"],[3,"disabled"],["class","pop-up",4,"ngIf"],[3,"click"],[4,"ngIf","ngIfElse"],["elseObjM",""],["elseBlockL",""],[1,"flex","justify-center"],[3,"disabled","click"],[3,"value"],[1,"pop-up"],["mode","indeterminate"]],template:function(e,n){if(1&e){var t=f.EpF();f.TgZ(0,"section",0),f.TgZ(1,"aside"),f.TgZ(2,"header"),f.TgZ(3,"h1"),f._uU(4,"Sets de donn\xe9es"),f.qZA(),f.TgZ(5,"h2"),f._uU(6,"Liste des dossiers de votre serveur"),f.qZA(),f._UZ(7,"hr"),f.TgZ(8,"p"),f._uU(9,"En cliquant sur un dossier vous pourrez afficher les m\xe9tadonn\xe9es des fichiers qu'il contient pour en v\xe9rifier la qualit\xe9"),f.qZA(),f.qZA(),f.TgZ(10,"ul"),f.YNc(11,V,2,1,"li",1),f.qZA(),f.qZA(),f.TgZ(12,"section"),f.TgZ(13,"header"),f.TgZ(14,"h2"),f._uU(15,"M\xe9tadonn\xe9es"),f.qZA(),f._UZ(16,"hr"),f.TgZ(17,"p"),f._uU(18,"Liste des m\xe9tadonn\xe9es scann\xe9es dans le dossier s\xe9lectionn\xe9"),f.qZA(),f.YNc(19,R,3,0,"p",2),f.qZA(),f._UZ(20,"hr"),f.TgZ(21,"mat-accordion"),f.YNc(22,te,7,5,"mat-expansion-panel",3),f.ALo(23,"slice"),f.qZA(),f._UZ(24,"hr"),f.YNc(25,ie,5,2,"div",4),f.qZA(),f.TgZ(26,"aside"),f.TgZ(27,"header"),f.TgZ(28,"h2"),f._uU(29,"Appliquer un filtre aux donn\xe9es"),f.qZA(),f._UZ(30,"hr"),f.TgZ(31,"p"),f._uU(32,"Choisissez une filtre dans la liste ci-dessous, v\xe9rifiez le r\xe9sulat et cliquez sur 'enregistrer les donn\xe9es filtr\xe9es' pour les stocker formatt\xe9es dans la base."),f.qZA(),f.qZA(),f.TgZ(33,"article"),f.TgZ(34,"form",5,6),f.NdJ("ngSubmit",function(){f.CHM(t);var e=f.MAs(35);return n.creeSet(e)}),f.TgZ(36,"label",7),f._uU(37,"Choissez un filtre pour les donn\xe9es *"),f.qZA(),f.TgZ(38,"select",8,9),f.NdJ("ngModelChange",function(e){return n._idFiltre=e})("change",function(){return n.choixFiltre()}),f.TgZ(40,"option",10),f._uU(41,"--------------"),f.qZA(),f.YNc(42,oe,2,3,"option",11),f.qZA(),f.TgZ(43,"label",12),f._uU(44,"Donnez ou modifiez le nom du SET de donn\xe9es \xe0 enregistrer *"),f.qZA(),f.TgZ(45,"input",13),f.NdJ("ngModelChange",function(e){return n.set.titre=e}),f.qZA(),f.TgZ(46,"label",14),f._uU(47,"Donnez un alias *"),f.qZA(),f.TgZ(48,"input",15),f.NdJ("ngModelChange",function(e){return n.set.alias=e}),f.qZA(),f.TgZ(49,"label",16),f._uU(50,"Fonds *"),f.qZA(),f.TgZ(51,"input",17),f.NdJ("ngModelChange",function(e){return n.set.fonds=e}),f.qZA(),f.TgZ(52,"label",18),f._uU(53,"Inidiquez des informations compl\xe9mentaires sur le SET scann\xe9"),f.qZA(),f.TgZ(54,"input",19),f.NdJ("ngModelChange",function(e){return n.set.description=e}),f.qZA(),f.TgZ(55,"label",20),f._uU(56,"Qui a cr\xe9\xe9 le SET ?"),f.qZA(),f.TgZ(57,"input",21),f.NdJ("ngModelChange",function(e){return n.set.createur=e}),f.qZA(),f.TgZ(58,"label",22),f._uU(59,"Qui g\xe8re ce SET ?"),f.qZA(),f.TgZ(60,"input",23),f.NdJ("ngModelChange",function(e){return n.set.gestionnaire=e}),f.qZA(),f.TgZ(61,"button",24),f._uU(62,"Enregistrer les donn\xe9es filtr\xe9es"),f.qZA(),f.qZA(),f.qZA(),f.TgZ(63,"blockquote"),f.YNc(64,ce,2,1,"h4",2),f.YNc(65,re,2,1,"p",2),f.TgZ(66,"p"),f._uU(67),f.qZA(),f.TgZ(68,"p"),f._uU(69,"Les donn\xe9es des documents sauvegard\xe9es seront celles inclues ci-dessous si elles sont pr\xe9sentes dans les m\xe9tadonn\xe9es. Les autres ne seront pas dans la base moissonnable mais resteront accessibles dans les documents avec un autre filtre."),f.qZA(),f.TgZ(70,"ul"),f.YNc(71,de,4,3,"li",3),f.ALo(72,"keyvalue"),f.qZA(),f.qZA(),f.qZA(),f.qZA(),f.YNc(73,pe,5,0,"section",25)}if(2&e){var i=f.MAs(35);f.xp6(11),f.Q6J("ngForOf",n.scanServ.listeDossiers),f.xp6(8),f.Q6J("ngIf",n.scanServ.scans),f.xp6(3),f.Q6J("ngForOf",f.Dn7(23,18,n.scanServ.scans,n.page.min,n.page.max)),f.xp6(3),f.Q6J("ngIf",n.scanServ.scans),f.xp6(13),f.Q6J("ngModel",n._idFiltre),f.xp6(4),f.Q6J("ngForOf",n.filtresServ.filtres),f.xp6(3),f.Q6J("ngModel",n.set.titre),f.xp6(3),f.Q6J("ngModel",n.set.alias),f.xp6(3),f.Q6J("ngModel",n.set.fonds),f.xp6(3),f.Q6J("ngModel",n.set.description),f.xp6(3),f.Q6J("ngModel",n.set.createur),f.xp6(3),f.Q6J("ngModel",n.set.gestionnaire),f.xp6(1),f.Q6J("disabled",i.invalid),f.xp6(3),f.Q6J("ngIf",n.filtreChoisi.titre),f.xp6(1),f.Q6J("ngIf",n.filtreChoisi.createur),f.xp6(2),f.Oqu(n.filtreChoisi.description),f.xp6(4),f.Q6J("ngForOf",f.lcZ(72,22,n.filtreChoisi.metadonnees)),f.xp6(2),f.Q6J("ngIf",n.scanServ.load)}},directives:[r.sg,r.O5,D.pp,l._Y,l.JL,l.F,l.EJ,l.Q7,l.JJ,l.On,l.YN,l.Kr,l.Fj,D.ib,D.yz,D.yK,z.Ou],pipes:[r.OU,r.Nd],styles:["section[_ngcontent-%COMP%] > aside[_ngcontent-%COMP%]:first-child{flex:1;background-color:#6ebada}section[_ngcontent-%COMP%]   header[_ngcontent-%COMP%]{flex-direction:column;padding:0 10px}section[_ngcontent-%COMP%] > section[_ngcontent-%COMP%]{flex:2;background-color:rgba(110,186,218,.5)}section[_ngcontent-%COMP%] > aside[_ngcontent-%COMP%]:nth-child(3){flex:3}section[_ngcontent-%COMP%] > aside[_ngcontent-%COMP%]:nth-child(3)   form[_ngcontent-%COMP%]{display:flex;flex-direction:column}"]}),e}(),he=function e(){t(this,e),this.libre="",this.dateDebut="",this.dateFin="",this.type=""},ve=function(){var e=function(){function e(){t(this,e)}return o(e,[{key:"transform",value:function(e,n){return e&&e.length?n?n.libre.length>2?e.filter(function(e){if(-1!==JSON.stringify(e).toLowerCase().indexOf(n.libre))return e}):n.type?e.filter(function(e){if(-1!==e.metadonnees.dublincore.format.indexOf(n.type))return e}):n.dateDebut?e.filter(function(e){var t=Date.parse(n.dateDebut);if(e.metadonnees.dublincore.date>=t)return e}):n.dateFin?e.filter(function(e){var t=Date.parse(n.dateFin);if(e.metadonnees.dublincore.date<=t)return e}):e:e:[]}}]),e}();return e.\u0275fac=function(n){return new(n||e)},e.\u0275pipe=f.Yjl({name:"filtreNotices",type:e,pure:!1}),e}(),me=c(9413),Ae=c(8341),qe=function e(){t(this,e),this.titre="",this.alias="",this.description="",this.type="",this.createur="",this.date=Date.now(),this.fonds="",this.langue="",this.groupe=[],this.notices=[],this.series=[],this.selected=!1};function Te(e,n){if(1&e&&(f.TgZ(0,"li"),f._uU(1),f.qZA()),2&e){var t=n.$implicit;f.xp6(1),f.hij(" ",t," ")}}function _e(e,n){if(1&e&&(f.TgZ(0,"li"),f._uU(1),f.TgZ(2,"mat-icon",23),f._uU(3,"delete"),f.qZA(),f.qZA()),2&e){var t=n.$implicit;f.xp6(1),f.hij(" ",t.metadonnees.dublincore.title," ")}}function xe(e,n){if(1&e&&(f.TgZ(0,"section"),f.TgZ(1,"h3"),f._uU(2,"Notices"),f.qZA(),f.TgZ(3,"ul"),f.YNc(4,_e,4,1,"li",19),f.qZA(),f.qZA()),2&e){var t=f.oxw();f.xp6(4),f.Q6J("ngForOf",t.colServ.notices)}}function Me(e,n){if(1&e&&(f.TgZ(0,"li"),f._uU(1),f.TgZ(2,"mat-icon",23),f._uU(3,"delete"),f.qZA(),f.qZA()),2&e){var t=n.$implicit;f.xp6(1),f.hij(" ",t.metadonnees.dublincore.title," ")}}function Ce(e,n){if(1&e&&(f.TgZ(0,"section"),f.TgZ(1,"h3"),f._uU(2,"Notices"),f.qZA(),f.TgZ(3,"ul"),f.YNc(4,Me,4,1,"li",19),f.qZA(),f.qZA()),2&e){var t=f.oxw();f.xp6(4),f.Q6J("ngForOf",t.colServ.notices)}}var Oe=function(){var e=function(){function e(n,i,o,c){t(this,e),this.colServ=n,this.setsServ=i,this.noticesServ=o,this.tokenServ=c,this.fermer=new f.vpe,this.affiche=!1,this.maj=!1,this.cree=!1}return o(e,[{key:"ngOnInit",value:function(){console.log(this.idCollection),"string"==typeof this.idCollection?this.colServ.getCollection(this.idCollection):-1==this.idCollection&&this.setsServ.set?(this.cree=!0,this.colServ.collection=this.mapSet(this.setsServ.set),this.genereNotices()):this.colServ.collection=new qe}},{key:"collectionOnClick",value:function(){this.affiche=!0}},{key:"afficheMaj",value:function(){this.maj=!this.maj}},{key:"ecrire",value:function(){this.colServ.collection._id?this.colServ.majCollection():this.colServ.ajouteNoticeAvantCollection()}},{key:"mapSet",value:function(e){var n=new qe;for(var t in e)n.hasOwnProperty(t)&&"_id"!=t&&(n[t]=e[t]);return console.log(n),n.series=[],e.documents.forEach(function(e){e.nemateria.serie&&!n.series.includes(e.nemateria.serie.serie)&&n.series.push(e.nemateria.serie.serie)}),n}},{key:"genereNotices",value:function(){var e=this;this.colServ.notices=[],this.setsServ.set.documents.map(function(n){n.nemateria.collection||(n.nemateria.collection={nom_collection:e.colServ.collection.titre,fonds:e.colServ.collection.fonds}),e.colServ.notices.push({metadonnees:n})}),this.colServ.notifServ.notif("Les notices ont \xe9t\xe9 int\xe9gr\xe9es dans la collection.")}},{key:"supprimeNotice",value:function(e){}}]),e}();return e.\u0275fac=function(n){return new(n||e)(f.Y36(u.a),f.Y36(A),f.Y36(Z),f.Y36(me.B))},e.\u0275cmp=f.Xpm({type:e,selectors:[["app-collection"]],inputs:{collection:"collection",idCollection:"idCollection"},outputs:{fermer:"fermer"},decls:54,vars:12,consts:[[1,"unique"],[3,"click"],["f","ngForm"],["for","titre"],["name","titre","required","",3,"ngModel","ngModelChange"],["for","alias"],["name","alias","required","","pattern","[a-z0-9-]+",3,"ngModel","ngModelChange"],["for","description"],["mat-input","","name","description","required","",3,"ngModel","ngModelChange"],["for","type"],["name","type","required","",3,"ngModel","ngModelChange"],["value","images"],["value","multimedia"],["for","createur"],["name","createur","required","",3,"ngModel","ngModelChange"],["for","fonds"],["name","fonds",3,"ngModel","ngModelChange"],["for","langue"],["name","langue",3,"ngModel","ngModelChange"],[4,"ngFor","ngForOf"],[1,"invalid",3,"click"],[1,"valid",3,"disabled","click"],[4,"ngIf"],["matTooltip","Enlever cette notice"]],template:function(e,n){if(1&e&&(f.TgZ(0,"section",0),f.TgZ(1,"header"),f.TgZ(2,"h3"),f._uU(3,"Informations sur la collection "),f.TgZ(4,"mat-icon",1),f.NdJ("click",function(){return n.fermer.emit(!1)}),f._uU(5,"close"),f.qZA(),f.qZA(),f.TgZ(6,"h2"),f._uU(7),f.qZA(),f.qZA(),f.TgZ(8,"form"),f.TgZ(9,"section"),f.TgZ(10,"form",null,2),f.TgZ(12,"article"),f.TgZ(13,"label",3),f._uU(14,"Titre"),f.qZA(),f.TgZ(15,"input",4),f.NdJ("ngModelChange",function(e){return n.colServ.collection.titre=e}),f.qZA(),f.TgZ(16,"label",5),f._uU(17,"Alias"),f.qZA(),f.TgZ(18,"input",6),f.NdJ("ngModelChange",function(e){return n.colServ.collection.alias=e}),f.qZA(),f.TgZ(19,"label",7),f._uU(20,"Description"),f.qZA(),f.TgZ(21,"textarea",8),f.NdJ("ngModelChange",function(e){return n.colServ.collection.description=e}),f._uU(22,"                    "),f.qZA(),f.TgZ(23,"label",9),f._uU(24,"Type"),f.qZA(),f.TgZ(25,"select",10),f.NdJ("ngModelChange",function(e){return n.colServ.collection.type=e}),f.TgZ(26,"option",11),f._uU(27,"Images"),f.qZA(),f.TgZ(28,"option",12),f._uU(29,"Multim\xe9dia"),f.qZA(),f.qZA(),f.TgZ(30,"label",13),f._uU(31,"Cr\xe9ateur"),f.qZA(),f.TgZ(32,"input",14),f.NdJ("ngModelChange",function(e){return n.colServ.collection.createur=e}),f.qZA(),f.TgZ(33,"label",15),f._uU(34,"Fonds"),f.qZA(),f.TgZ(35,"input",16),f.NdJ("ngModelChange",function(e){return n.colServ.collection.fonds=e}),f.qZA(),f.TgZ(36,"label",17),f._uU(37,"Langue"),f.qZA(),f.TgZ(38,"input",18),f.NdJ("ngModelChange",function(e){return n.colServ.collection.langue=e}),f.qZA(),f.qZA(),f.qZA(),f.TgZ(39,"article"),f.TgZ(40,"h3"),f._uU(41,"S\xe9ries"),f.qZA(),f.TgZ(42,"mat-icon"),f._uU(43,"add"),f.qZA(),f.TgZ(44,"ul"),f.YNc(45,Te,2,1,"li",19),f.qZA(),f._UZ(46,"hr"),f.TgZ(47,"p"),f.TgZ(48,"button",20),f.NdJ("click",function(){return n.fermer.emit(!1)}),f._uU(49,"Annuler"),f.qZA(),f.TgZ(50,"button",21),f.NdJ("click",function(){return n.ecrire()}),f._uU(51,"Enregistrer la collection"),f.qZA(),f.qZA(),f.qZA(),f.qZA(),f.YNc(52,xe,5,1,"section",22),f.YNc(53,Ce,5,1,"section",22),f.qZA(),f.qZA()),2&e){var t=f.MAs(11);f.xp6(7),f.Oqu(n.colServ.collection.titre),f.xp6(8),f.Q6J("ngModel",n.colServ.collection.titre),f.xp6(3),f.Q6J("ngModel",n.colServ.collection.alias),f.xp6(3),f.Q6J("ngModel",n.colServ.collection.description),f.xp6(4),f.Q6J("ngModel",n.colServ.collection.type),f.xp6(7),f.Q6J("ngModel",n.colServ.collection.createur),f.xp6(3),f.Q6J("ngModel",n.colServ.collection.fonds),f.xp6(3),f.Q6J("ngModel",n.colServ.collection.langue),f.xp6(7),f.Q6J("ngForOf",n.colServ.collection.series),f.xp6(5),f.Q6J("disabled",t.invalid||n.tokenServ.statut<2),f.xp6(2),f.Q6J("ngIf",n.colServ.notices),f.xp6(1),f.Q6J("ngIf",!n.cree)}},directives:[x.Hw,l._Y,l.JL,l.F,l.Fj,l.Q7,l.JJ,l.On,l.c5,l.EJ,l.YN,l.Kr,r.sg,r.O5,_.gM],styles:[""]}),e}();function ke(e,n){if(1&e&&(f.TgZ(0,"video",33),f._UZ(1,"source",34),f.qZA()),2&e){var t=f.oxw().$implicit;f.Q6J("poster",t.metadonnees.dublincore.coverage,f.LSH),f.xp6(1),f.Q6J("src",t.metadonnees.media.url,f.LSH)("type",t.metadonnees.dublincore.format)}}function Ne(e,n){if(1&e&&(f.TgZ(0,"audio"),f._UZ(1,"source",34),f.qZA()),2&e){var t=f.oxw().$implicit;f.xp6(1),f.Q6J("src",t.metadonnees.media.url,f.LSH)("type",t.metadonnees.dublincore.format)}}function Se(e,n){1&e&&(f.TgZ(0,"mat-icon"),f._uU(1,"check_circle"),f.qZA())}function ye(e,n){1&e&&(f.TgZ(0,"mat-icon"),f._uU(1,"check_circle_outline"),f.qZA())}function Ue(e,n){if(1&e){var t=f.EpF();f.TgZ(0,"li",26),f.TgZ(1,"div"),f.YNc(2,ke,2,3,"video",27),f.YNc(3,Ne,2,2,"audio",23),f.TgZ(4,"div",28),f.NdJ("mouseenter",function(e){return f.CHM(t),f.oxw().utils.play(e)})("mouseleave",function(e){return f.CHM(t),f.oxw().utils.pause(e)})("click",function(){return f.CHM(t),f.oxw().fake()}),f.TgZ(5,"div"),f.TgZ(6,"mat-icon",29),f.NdJ("click",function(){var e=f.CHM(t).$implicit;return f.oxw().noticeOnAffiche(e._id)}),f._uU(7,"visibility"),f.qZA(),f.TgZ(8,"mat-icon",30),f.NdJ("click",function(){var e=f.CHM(t).$implicit;return f.oxw().noticeSelectionnee(e._id)}),f._uU(9,"add_circle"),f.qZA(),f.TgZ(10,"mat-icon",31),f.NdJ("click",function(){var e=f.CHM(t).$implicit;return f.oxw().noticeSelectionRemove(e._id)}),f._uU(11,"remove_circle"),f.qZA(),f.TgZ(12,"mat-icon",32),f.NdJ("click",function(){var e=f.CHM(t).$implicit;return f.oxw().noticeOnInfo(e._id)}),f._uU(13,"info"),f.qZA(),f.qZA(),f.qZA(),f.qZA(),f.TgZ(14,"div"),f.TgZ(15,"h3"),f._uU(16),f.qZA(),f.TgZ(17,"p"),f._uU(18),f.qZA(),f.TgZ(19,"div"),f.YNc(20,Se,2,0,"mat-icon",23),f.YNc(21,ye,2,0,"mat-icon",23),f.qZA(),f.qZA(),f.qZA()}if(2&e){var i=n.$implicit,o=f.oxw();f.xp6(1),f.Udp("background-image",o.utils.setNoticeBg(i)),f.ekj("choix",i.selected),f.xp6(1),f.Q6J("ngIf",i.metadonnees.dublincore.format&&-1!=i.metadonnees.dublincore.format.indexOf("video")),f.xp6(1),f.Q6J("ngIf",i.metadonnees.dublincore.format&&-1!=i.metadonnees.dublincore.format.indexOf("audio")),f.xp6(13),f.Oqu(i.metadonnees.dublincore.title),f.xp6(2),f.Oqu(i.metadonnees.dublincore.description),f.xp6(2),f.Q6J("ngIf",i.selected),f.xp6(1),f.Q6J("ngIf",!i.selected)}}function Je(e,n){if(1&e){var t=f.EpF();f.TgZ(0,"mat-icon",35),f.NdJ("click",function(){return f.CHM(t),f.oxw().noticesSuppr()}),f._uU(1,"delete_forever"),f.qZA()}}function be(e,n){if(1&e){var t=f.EpF();f.TgZ(0,"li"),f.TgZ(1,"mat-chip-list"),f.TgZ(2,"mat-chip",36),f.NdJ("removed",function(){var e=f.CHM(t).$implicit;return f.oxw().noticeSelectionRemove(e._id)}),f._uU(3),f.TgZ(4,"mat-icon",37),f._uU(5,"cancel"),f.qZA(),f.qZA(),f.qZA(),f.qZA()}if(2&e){var i=n.$implicit;f.xp6(3),f.hij(" ",i.metadonnees.dublincore.title," ")}}function we(e,n){if(1&e&&(f.TgZ(0,"article"),f.TgZ(1,"h3"),f._uU(2),f.qZA(),f.TgZ(3,"ul"),f.TgZ(4,"li"),f._uU(5),f.qZA(),f.TgZ(6,"li"),f._uU(7),f.qZA(),f.TgZ(8,"li"),f._uU(9),f.qZA(),f.qZA(),f.qZA()),2&e){var t=f.oxw();f.xp6(2),f.Oqu(t.noticeChoisie.metadonnees.dublincore.title),f.xp6(3),f.Oqu(t.noticeChoisie.metadonnees.dublincore.description),f.xp6(2),f.Oqu(t.noticeChoisie.metadonnees.media.file),f.xp6(2),f.Oqu(t.noticeChoisie.metadonnees.media.url)}}function Pe(e,n){if(1&e){var t=f.EpF();f.TgZ(0,"app-notice",38),f.NdJ("fermer",function(){return f.CHM(t),f.oxw().masque()}),f.qZA()}if(2&e){var i=f.oxw();f.Q6J("idNotice",i.idNotice)}}function Fe(e,n){if(1&e){var t=f.EpF();f.TgZ(0,"app-collection",39),f.NdJ("fermer",function(){return f.CHM(t),f.oxw().masque()}),f.qZA()}if(2&e){var i=f.oxw();f.Q6J("idCollection",i.idCollection)}}var Qe=function(){var e=function(){function e(n,i,o,c){t(this,e),this.noticesServ=n,this.utils=i,this.noticesPipe=o,this.tokenServ=c,this.noticeListe=[],this.noticeSelection=[],this.noticeAffiche=!1,this.afficheDetailNotice=!1,this.afficheDetailCollec=!1}return o(e,[{key:"ngOnInit",value:function(){this.idNotice=-1,this.noticesServ.getNotices(),this.filtre=new he}},{key:"noticeOnAffiche",value:function(e){this.idNotice=e,this.afficheDetailNotice=!this.afficheDetailNotice}},{key:"noticeSelectionnee",value:function(e){this.idNotice=e,this.noticeSelection.find(function(n){return n._id==e})?this.noticeSelectionRemove(e):this.noticeSelection.push(this.noticesServ.noticesAll.find(function(n){if(n._id==e)return n.selected=!0,n}))}},{key:"noticeOnInfo",value:function(e){this.noticeChoisie==this.noticesServ.noticesAll.find(function(n){return n._id==e})?(this.noticeAffiche=!1,this.noticeChoisie=null):(this.noticeChoisie=this.noticesServ.noticesAll.find(function(n){return n._id==e}),this.noticeAffiche=!0)}},{key:"noticeSelectionDump",value:function(){this.noticeAffiche=!1,this.noticeSelection=[]}},{key:"noticeSelectionRemove",value:function(e){for(var n=0;n<this.noticeSelection.length;n++){var t=this.noticeSelection[n];t.selected=!1,t._id==e&&this.noticeSelection.splice(n,1)}}},{key:"noticesToutesChoisies",value:function(){this.noticeSelection=this.noticesPipe.transform(this.noticesServ.noticesAll,this.filtre),this.noticeSelection.forEach(function(e){e.selected=!0})}},{key:"noticesAucuneChoisie",value:function(){this.noticesServ.noticesAll.forEach(function(e){e.selected=!1}),this.noticeSelection=[]}},{key:"masque",value:function(e){this.afficheDetailNotice=e,this.afficheDetailCollec=e,this.idNotice=-1,this.idCollection=-1}},{key:"collectionOnAffiche",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:-1;this.idCollection=e,this.afficheDetailCollec=!0}},{key:"fake",value:function(){}},{key:"noticesSuppr",value:function(){}}]),e}();return e.\u0275fac=function(n){return new(n||e)(f.Y36(Z),f.Y36(q.F),f.Y36(ve),f.Y36(me.B))},e.\u0275cmp=f.Xpm({type:e,selectors:[["app-notices"]],decls:51,vars:13,consts:[[1,"screen","double"],[1,"filtre"],["for","libre"],["name","libre","placeholder","Filtre libre",3,"ngModel","ngModelChange"],["for","dateDebut"],["name","dateDebut","type","date","placeholder","A partir de...",3,"ngModel","ngModelChange"],["for","dateFin"],["name","dateFin","type","date","placeholder","... jusqu'\xe0",3,"ngModel","ngModelChange"],["for","type"],["name","type","placeholder","Type de fichiers",3,"ngModel","ngModelChange"],["value","image"],["value","video"],["value","audio"],["value","application"],[1,"notice-liste"],["class","notice",4,"ngFor","ngForOf"],[1,"right-panel"],[1,"demi"],["matTooltip","S\xe9lectionner toutes les notices",3,"click"],["matTooltip","D\xe9selectionner toutes les notices",3,"click"],["matTooltip","Cr\xe9er une collection \xe0 partir de la s\xe9lection",3,"click"],["matTooltip","Supprimer les notices s\xe9lectionn\xe9es",3,"click",4,"ngIf"],[4,"ngFor","ngForOf"],[4,"ngIf"],["class","unique",3,"idNotice","fermer",4,"ngIf"],["class","unique",3,"idCollection","fermer",4,"ngIf"],[1,"notice"],[3,"poster",4,"ngIf"],[3,"mouseenter","mouseleave","click"],["matTooltip","Voir la fiche de la notice",3,"click"],["matTooltip","Ajouter cette notice \xe0 la liste s\xe9lectionn\xe9e",3,"click"],["matTooltip","Supprimer la notice",3,"click"],["matTooltip","Informations rapides sur la notice",3,"click"],[3,"poster"],[3,"src","type"],["matTooltip","Supprimer les notices s\xe9lectionn\xe9es",3,"click"],[3,"removed"],["matChipRemove",""],[1,"unique",3,"idNotice","fermer"],[1,"unique",3,"idCollection","fermer"]],template:function(e,n){1&e&&(f.TgZ(0,"section",0),f.TgZ(1,"section"),f.TgZ(2,"header",1),f.TgZ(3,"h2"),f._uU(4,"Filtrer les notices"),f.qZA(),f.TgZ(5,"form"),f.TgZ(6,"label",2),f._uU(7,"Filtre libre "),f.TgZ(8,"input",3),f.NdJ("ngModelChange",function(e){return n.filtre.libre=e}),f.qZA(),f.qZA(),f.TgZ(9,"label",4),f._uU(10,"Date de cr\xe9ation (d\xe9but) "),f.TgZ(11,"input",5),f.NdJ("ngModelChange",function(e){return n.filtre.dateDebut=e}),f.qZA(),f.qZA(),f.TgZ(12,"label",6),f._uU(13,"Date de cr\xe9ation (fin) "),f.TgZ(14,"input",7),f.NdJ("ngModelChange",function(e){return n.filtre.dateFin=e}),f.qZA(),f.qZA(),f.TgZ(15,"label",8),f._uU(16,"Types de fichiers "),f.TgZ(17,"select",9),f.NdJ("ngModelChange",function(e){return n.filtre.type=e}),f.TgZ(18,"option",10),f._uU(19,"Images"),f.qZA(),f.TgZ(20,"option",11),f._uU(21,"Vid\xe9os"),f.qZA(),f.TgZ(22,"option",12),f._uU(23,"Audio"),f.qZA(),f.TgZ(24,"option",13),f._uU(25,"Textes"),f.qZA(),f.qZA(),f.qZA(),f.qZA(),f.qZA(),f.TgZ(26,"ul",14),f.YNc(27,Ue,22,10,"li",15),f.ALo(28,"filtreNotices"),f.qZA(),f.qZA(),f.TgZ(29,"aside",16),f.TgZ(30,"section",17),f.TgZ(31,"header"),f.TgZ(32,"h4"),f._uU(33,"Actions group\xe9es : "),f.qZA(),f.TgZ(34,"mat-icon",18),f.NdJ("click",function(){return n.noticesToutesChoisies()}),f._uU(35,"filter"),f.qZA(),f.TgZ(36,"mat-icon",19),f.NdJ("click",function(){return n.noticesAucuneChoisie()}),f._uU(37,"filter_none"),f.qZA(),f.TgZ(38,"mat-icon",20),f.NdJ("click",function(){return n.collectionOnAffiche()}),f._uU(39,"collections"),f.qZA(),f.YNc(40,Je,2,0,"mat-icon",21),f.qZA(),f.TgZ(41,"h2"),f._uU(42,"Liste des notices s\xe9lectionn\xe9es"),f.qZA(),f.TgZ(43,"ul"),f.YNc(44,be,6,1,"li",22),f.qZA(),f.qZA(),f.TgZ(45,"section",17),f.TgZ(46,"h2"),f._uU(47,"M\xe9tadonn\xe9es d\u2019une notice s\xe9lectionn\xe9e"),f.qZA(),f.YNc(48,we,10,4,"article",23),f.qZA(),f.qZA(),f.qZA(),f.YNc(49,Pe,1,1,"app-notice",24),f.YNc(50,Fe,1,1,"app-collection",25)),2&e&&(f.xp6(8),f.Q6J("ngModel",n.filtre.libre),f.xp6(3),f.Q6J("ngModel",n.filtre.dateDebut),f.xp6(3),f.Q6J("ngModel",n.filtre.dateFin),f.xp6(3),f.Q6J("ngModel",n.filtre.type),f.xp6(10),f.Q6J("ngForOf",f.xi3(28,10,n.noticesServ.noticesAll,n.filtre)),f.xp6(13),f.Q6J("ngIf",n.tokenServ.statut>=2),f.xp6(4),f.Q6J("ngForOf",n.noticeSelection),f.xp6(4),f.Q6J("ngIf",n.noticeAffiche),f.xp6(1),f.Q6J("ngIf",n.afficheDetailNotice),f.xp6(1),f.Q6J("ngIf",n.afficheDetailCollec))},directives:[l._Y,l.JL,l.F,l.Fj,l.JJ,l.On,l.EJ,l.YN,l.Kr,r.sg,x.Hw,_.gM,r.O5,Ae.qn,Ae.HS,Ae.qH,j,Oe],pipes:[ve],styles:["section[_ngcontent-%COMP%] > section[_ngcontent-%COMP%] > ul[_ngcontent-%COMP%]{padding:0;margin:0}aside[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]{list-style:none;display:inline-block;margin:5px}aside[_ngcontent-%COMP%] > section[_ngcontent-%COMP%]:first-child{background-color:#a3c6c2}aside[_ngcontent-%COMP%] > section[_ngcontent-%COMP%]:nth-child(2){background-color:#13c7af}"]}),e}();function Ye(e,n){if(1&e){var t=f.EpF();f.TgZ(0,"li",11),f.NdJ("click",function(){var e=f.CHM(t).$implicit;return f.oxw().collectionOnClick(e._id)}),f._uU(1),f.qZA()}if(2&e){var i=n.$implicit;f.xp6(1),f.AsE(" ",i.titre," (",i.fonds,") ")}}function Ie(e,n){if(1&e){var t=f.EpF();f.TgZ(0,"div"),f.TgZ(1,"mat-icon",12),f.NdJ("click",function(){return f.CHM(t),f.oxw().delete=!0}),f._uU(2,"delete"),f.qZA(),f.TgZ(3,"mat-icon",13),f.NdJ("click",function(){return f.CHM(t),f.oxw().detailsCollec=!0}),f._uU(4,"edit"),f.qZA(),f.qZA()}}function Ee(e,n){if(1&e&&(f.TgZ(0,"li"),f.TgZ(1,"strong"),f._uU(2),f.qZA(),f._uU(3),f.qZA()),2&e){var t=f.oxw().$implicit;f.xp6(2),f.Oqu(t.key),f.xp6(1),f.hij(" : ",t.value," ")}}function Le(e,n){if(1&e&&(f.TgZ(0,"div"),f.YNc(1,Ee,4,2,"li",4),f.qZA()),2&e){var t=n.$implicit;f.xp6(1),f.Q6J("ngIf","notices"!=t.key)}}function je(e,n){if(1&e&&(f.TgZ(0,"article"),f.TgZ(1,"ul"),f.YNc(2,Le,2,1,"div",14),f.ALo(3,"keyvalue"),f.qZA(),f.qZA()),2&e){var t=f.oxw();f.xp6(2),f.Q6J("ngForOf",f.lcZ(3,1,t.colServ.collection))}}function $e(e,n){if(1&e&&(f.TgZ(0,"li"),f._uU(1),f.qZA()),2&e){var t=n.$implicit;f.xp6(1),f.hij(" ",t," ")}}function He(e,n){if(1&e&&(f.TgZ(0,"article"),f.TgZ(1,"h3"),f._uU(2,"S\xe9ries de la collection"),f.qZA(),f.TgZ(3,"ul"),f.YNc(4,$e,2,1,"li",14),f.qZA(),f.qZA()),2&e){var t=f.oxw();f.xp6(4),f.Q6J("ngForOf",t.noticesServ.seriesCollec)}}function De(e,n){if(1&e&&(f.TgZ(0,"video",20),f._UZ(1,"source",21),f.qZA()),2&e){var t=f.oxw().$implicit;f.Q6J("poster",t.metadonnees.dublincore.coverage,f.LSH),f.xp6(1),f.Q6J("src",t.metadonnees.media.url,f.LSH)("type",t.metadonnees.dublincore.format)}}function ze(e,n){if(1&e&&(f.TgZ(0,"audio"),f._UZ(1,"source",21),f.qZA()),2&e){var t=f.oxw().$implicit;f.xp6(1),f.Q6J("src",t.metadonnees.media.url,f.LSH)("type",t.metadonnees.dublincore.format)}}function Ve(e,n){if(1&e){var t=f.EpF();f.TgZ(0,"li",15),f.TgZ(1,"div"),f.YNc(2,De,2,3,"video",16),f.YNc(3,ze,2,2,"audio",4),f.TgZ(4,"div",17),f.NdJ("mouseenter",function(e){return f.CHM(t),f.oxw().utils.play(e)})("mouseleave",function(e){return f.CHM(t),f.oxw().utils.pause(e)}),f.TgZ(5,"div"),f.TgZ(6,"mat-icon",18),f.NdJ("click",function(){var e=f.CHM(t).$implicit;return f.oxw().idNotice=e._id}),f._uU(7," visibility"),f.qZA(),f.TgZ(8,"mat-icon",19),f.NdJ("click",function(){var e=f.CHM(t).$implicit;return f.oxw().noticeOnEnlever(e._id)}),f._uU(9,"remove_circle"),f.qZA(),f.qZA(),f.qZA(),f.qZA(),f.TgZ(10,"div"),f.TgZ(11,"h3"),f._uU(12),f.qZA(),f.TgZ(13,"p"),f._uU(14),f.qZA(),f.qZA(),f.qZA()}if(2&e){var i=n.$implicit,o=f.oxw();f.xp6(1),f.Udp("background-image",o.utils.setNoticeBg(i)),f.xp6(1),f.Q6J("ngIf",i.metadonnees.dublincore.format&&-1!=i.metadonnees.dublincore.format.indexOf("video")),f.xp6(1),f.Q6J("ngIf",i.metadonnees.dublincore.format&&-1!=i.metadonnees.dublincore.format.indexOf("audio")),f.xp6(9),f.Oqu(i.metadonnees.dublincore.title),f.xp6(2),f.Oqu(i.metadonnees.dublincore.description)}}function Re(e,n){if(1&e){var t=f.EpF();f.TgZ(0,"section",22),f.TgZ(1,"article"),f.TgZ(2,"h3"),f._uU(3,"Supprimer une notice"),f.qZA(),f.TgZ(4,"p"),f._uU(5,"En cliquant sur valider la suppression vous enleverez la notice de cette collection."),f.qZA(),f.TgZ(6,"p"),f._uU(7,"Elle restera n\xe9anmoins disponible dans les autres collections ou pourra \xeatre int\xe9gr\xe9e dans une autre s\xe9lection. "),f.qZA(),f.TgZ(8,"button"),f._uU(9,"Valider la suppression"),f.qZA(),f.TgZ(10,"button",11),f.NdJ("click",function(){return f.CHM(t),f.oxw().masque()}),f._uU(11,"Annuler"),f.qZA(),f.qZA(),f.qZA()}}function Be(e,n){if(1&e){var t=f.EpF();f.TgZ(0,"section",22),f.TgZ(1,"article"),f.TgZ(2,"h2"),f._uU(3,"Etes-vous s\xfbr.e ?"),f.qZA(),f.TgZ(4,"p"),f.TgZ(5,"mat-icon",23),f.NdJ("click",function(){return f.CHM(t),f.oxw().delete=!1}),f._uU(6,"cancel"),f.qZA(),f.TgZ(7,"mat-icon",24),f.NdJ("click",function(){f.CHM(t);var e=f.oxw();return e.colServ.supprCollec(e.colServ.collection._id),e.delete=!1}),f._uU(8,"check_circle"),f.qZA(),f.qZA(),f.qZA(),f.qZA()}}function Xe(e,n){if(1&e){var t=f.EpF();f.TgZ(0,"app-collection",25),f.NdJ("fermer",function(){return f.CHM(t),f.oxw().masque()}),f.qZA()}if(2&e){var i=f.oxw();f.Q6J("idCollection",i.idCollection)}}function Ge(e,n){if(1&e){var t=f.EpF();f.TgZ(0,"app-notice",26),f.NdJ("fermer",function(){return f.CHM(t),f.oxw().masque()}),f.qZA()}if(2&e){var i=f.oxw();f.Q6J("idNotice",i.idNotice)}}var We=function(){var e=function(){function e(n,i,o,c){t(this,e),this.colServ=n,this.noticesServ=i,this.utils=o,this.tokenServ=c,this.collectionListe=[],this.detailsCollec=!1,this.afficheEnlever=!1,this.delete=!1,this.filtreSerie=""}return o(e,[{key:"ngOnInit",value:function(){}},{key:"collectionOnClick",value:function(e){this.idCollection=e,this.colServ.getCollection(e),this.noticesServ.getNoticesByCollec(this.colServ.collection.notices)}},{key:"noticeOnEnlever",value:function(e){console.log("Notice \xe0 enlever",e),this.idNotice=e,this.afficheEnlever=!0}},{key:"masque",value:function(){this.detailsCollec=!1,this.afficheEnlever=!1,this.idNotice=null,this.idCollection=null}}]),e}();return e.\u0275fac=function(n){return new(n||e)(f.Y36(u.a),f.Y36(Z),f.Y36(q.F),f.Y36(me.B))},e.\u0275cmp=f.Xpm({type:e,selectors:[["app-collections"]],decls:24,vars:9,consts:[[1,"screen","triple"],[1,"left-panel"],["matTooltip","Ajouter une collection",3,"click"],[3,"click",4,"ngFor","ngForOf"],[4,"ngIf"],[1,"selection"],[1,"notice-liste"],["class","notice",4,"ngFor","ngForOf"],["class","pop-up",4,"ngIf"],["class","unique",3,"idCollection","fermer",4,"ngIf"],["class","unique",3,"idNotice","fermer",4,"ngIf"],[3,"click"],["matTooltip","Supprimer le SET",3,"click"],["matTooltip","Modifier la collection",3,"click"],[4,"ngFor","ngForOf"],[1,"notice"],[3,"poster",4,"ngIf"],[3,"mouseenter","mouseleave"],["matTooltip","Voir la fiche de la notice",3,"click"],["matTooltip","Enlever cette notice de la collection",3,"click"],[3,"poster"],[3,"src","type"],[1,"pop-up"],["matTooltip","Annuler la destruction",1,"grand",3,"click"],["matTooltip","Valider la destruction",1,"grand",3,"click"],[1,"unique",3,"idCollection","fermer"],[1,"unique",3,"idNotice","fermer"]],template:function(e,n){1&e&&(f.TgZ(0,"section",0),f.TgZ(1,"aside",1),f.TgZ(2,"header"),f.TgZ(3,"h1"),f._uU(4,"Collections disponibles"),f.qZA(),f.TgZ(5,"mat-icon",2),f.NdJ("click",function(){return n.detailsCollec=!0,n.idCollection=null}),f._uU(6,"playlist_add"),f.qZA(),f.qZA(),f.TgZ(7,"ul"),f.YNc(8,Ye,2,2,"li",3),f.qZA(),f.qZA(),f.TgZ(9,"section"),f.TgZ(10,"header"),f.YNc(11,Ie,5,0,"div",4),f.TgZ(12,"h2"),f._uU(13,"Informations sur la collection choisie"),f.qZA(),f.qZA(),f.YNc(14,je,4,3,"article",4),f.YNc(15,He,5,1,"article",4),f.qZA(),f.TgZ(16,"aside"),f.TgZ(17,"section",5),f.TgZ(18,"ul",6),f.YNc(19,Ve,15,6,"li",7),f.qZA(),f.qZA(),f.qZA(),f.qZA(),f.YNc(20,Re,12,0,"section",8),f.YNc(21,Be,9,0,"section",8),f.YNc(22,Xe,1,1,"app-collection",9),f.YNc(23,Ge,1,1,"app-notice",10)),2&e&&(f.xp6(8),f.Q6J("ngForOf",n.colServ.collections),f.xp6(3),f.Q6J("ngIf",n.tokenServ.statut>=2),f.xp6(3),f.Q6J("ngIf",n.colServ.collection),f.xp6(1),f.Q6J("ngIf",n.noticesServ.seriesCollec.length>0),f.xp6(4),f.Q6J("ngForOf",n.noticesServ.noticesCollec),f.xp6(1),f.Q6J("ngIf",n.afficheEnlever),f.xp6(1),f.Q6J("ngIf",n.delete&&n.tokenServ.statut>=2),f.xp6(1),f.Q6J("ngIf",n.detailsCollec),f.xp6(1),f.Q6J("ngIf",n.idNotice))},directives:[x.Hw,_.gM,r.sg,r.O5,Oe,j],pipes:[r.Nd],styles:["section.screen[_ngcontent-%COMP%]   section[_ngcontent-%COMP%]{padding:10px 15px}section.screen[_ngcontent-%COMP%]   section[_ngcontent-%COMP%]   header[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]{float:right}section.screen[_ngcontent-%COMP%] > section[_ngcontent-%COMP%]{flex-grow:3;min-width:30%}aside[_ngcontent-%COMP%]:nth-child(3){flex-grow:4;min-width:40%;background-color:rgba(255,213,0,.5);padding:0}aside[_ngcontent-%COMP%]:nth-child(3)   .notice[_ngcontent-%COMP%]{width:50%}aside[_ngcontent-%COMP%]:nth-child(3)   section[_ngcontent-%COMP%], aside[_ngcontent-%COMP%]:nth-child(3)   ul[_ngcontent-%COMP%]{padding:0;margin:0}"]}),e}(),Ke=c(7539);function en(e,n){if(1&e&&(f.TgZ(0,"mat-checkbox",16),f._uU(1),f.qZA()),2&e){var t=n.$implicit;f.Q6J("value",t.alias),f.xp6(1),f.Oqu(t.titre)}}function nn(e,n){if(1&e){var t=f.EpF();f.TgZ(0,"li"),f._uU(1),f.TgZ(2,"mat-icon",1),f.NdJ("click",function(){var e=f.CHM(t).index;return f.oxw().filtre.metadonnees.splice(e,1)}),f._uU(3,"delete"),f.qZA(),f.qZA()}if(2&e){var i=n.$implicit;f.xp6(1),f.hij("",i," ")}}var tn=function(){var e=function(){function e(n){t(this,e),this.filtreServ=n,this.fermer=new f.vpe,this.prefix="oai_nema"}return o(e,[{key:"ngOnInit",value:function(){this.meta=""}},{key:"ecrire",value:function(){console.log(this.filtre),this.filtre.prefix=this.prefix.replace(" ","").split(","),this.filtre._id?this.filtreServ.majFiltre(this.filtre):this.filtreServ.ajouteFiltre(this.filtre)}},{key:"ajouteMeta",value:function(){console.log("ajoute meta",this.meta),this.filtre.metadonnees.push(this.meta)}}]),e}();return e.\u0275fac=function(n){return new(n||e)(f.Y36(v.s))},e.\u0275cmp=f.Xpm({type:e,selectors:[["app-filtre"]],inputs:{filtre:"filtre"},outputs:{fermer:"fermer"},decls:42,vars:8,consts:[[1,"unique"],[3,"click"],["for","titre"],["name","titre","required","","placeholder","Titre du filtre",3,"ngModel","ngModelChange"],["for","alias"],["name","alias","required","","pattern","[a-z0-9-]+","placeholder","Sans espaces ou caract\xe8res sp\xe9ciaux",3,"ngModel","ngModelChange"],["for","createur"],["name","createur","required","","placeholder","Qui a cr\xe9\xe9 le filtre ?",3,"ngModel","ngModelChange"],["for","description"],["mat-input","","name","description","required","","placeholder","Quelques explications",3,"ngModel","ngModelChange"],["for","prefix"],[3,"value",4,"ngFor","ngForOf"],["name","meta",3,"ngModel","ngModelChange"],[4,"ngFor","ngForOf"],[1,"invalid",3,"click"],[1,"valid",3,"click"],[3,"value"]],template:function(e,n){1&e&&(f.TgZ(0,"section",0),f.TgZ(1,"header"),f.TgZ(2,"h3"),f._uU(3,"Informations sur la filtre "),f.TgZ(4,"mat-icon",1),f.NdJ("click",function(){return n.fermer.emit(!1)}),f._uU(5,"close"),f.qZA(),f.qZA(),f.TgZ(6,"h2"),f._uU(7),f.qZA(),f.qZA(),f.TgZ(8,"form"),f.TgZ(9,"section"),f.TgZ(10,"form"),f.TgZ(11,"label",2),f._uU(12,"Titre "),f.TgZ(13,"input",3),f.NdJ("ngModelChange",function(e){return n.filtre.titre=e}),f.qZA(),f.qZA(),f.TgZ(14,"label",4),f._uU(15,"Alias "),f.TgZ(16,"input",5),f.NdJ("ngModelChange",function(e){return n.filtre.alias=e}),f.qZA(),f.qZA(),f.TgZ(17,"label",6),f._uU(18,"Cr\xe9ateur "),f.TgZ(19,"input",7),f.NdJ("ngModelChange",function(e){return n.filtre.createur=e}),f.qZA(),f.qZA(),f.TgZ(20,"label",8),f._uU(21,"Description"),f.qZA(),f.TgZ(22,"textarea",9),f.NdJ("ngModelChange",function(e){return n.filtre.description=e}),f._uU(23,"                "),f.qZA(),f.TgZ(24,"label",10),f._uU(25,"Prefix"),f.qZA(),f.YNc(26,en,2,2,"mat-checkbox",11),f.qZA(),f.qZA(),f.TgZ(27,"section"),f.TgZ(28,"h3"),f._uU(29,"M\xe9tadonn\xe9es filtr\xe9es"),f.qZA(),f.TgZ(30,"p"),f.TgZ(31,"input",12),f.NdJ("ngModelChange",function(e){return n.meta=e}),f.qZA(),f.TgZ(32,"mat-icon",1),f.NdJ("click",function(){return n.ajouteMeta()}),f._uU(33,"add"),f.qZA(),f.qZA(),f.TgZ(34,"ul"),f.YNc(35,nn,4,1,"li",13),f.qZA(),f._UZ(36,"hr"),f.TgZ(37,"p"),f.TgZ(38,"button",14),f.NdJ("click",function(){return n.fermer.emit(!1)}),f._uU(39,"Annuler"),f.qZA(),f.TgZ(40,"button",15),f.NdJ("click",function(){return n.ecrire()}),f._uU(41,"Valider"),f.qZA(),f.qZA(),f.qZA(),f.qZA(),f.qZA()),2&e&&(f.xp6(7),f.Oqu(n.filtre.titre),f.xp6(6),f.Q6J("ngModel",n.filtre.titre),f.xp6(3),f.Q6J("ngModel",n.filtre.alias),f.xp6(3),f.Q6J("ngModel",n.filtre.createur),f.xp6(3),f.Q6J("ngModel",n.filtre.description),f.xp6(4),f.Q6J("ngForOf",n.filtreServ.prefix),f.xp6(5),f.Q6J("ngModel",n.meta),f.xp6(4),f.Q6J("ngForOf",n.filtre.metadonnees))},directives:[x.Hw,l._Y,l.JL,l.F,l.Fj,l.Q7,l.JJ,l.On,l.c5,r.sg,Ke.oG],styles:[""]}),e}();function on(e,n){if(1&e){var t=f.EpF();f.TgZ(0,"li",12),f.NdJ("click",function(){var e=f.CHM(t).$implicit;return f.oxw().filtreOnClick(e._id)}),f._uU(1),f.qZA()}if(2&e){var i=n.$implicit;f.xp6(1),f.AsE(" ",i.titre," (",i.createur,") ")}}function cn(e,n){if(1&e){var t=f.EpF();f.TgZ(0,"div"),f.TgZ(1,"mat-icon",13),f.NdJ("click",function(){f.CHM(t);var e=f.oxw();return e.supprime=!e.supprime}),f._uU(2,"delete"),f.qZA(),f.TgZ(3,"mat-icon",14),f.NdJ("click",function(){f.CHM(t);var e=f.oxw();return e.edition=!e.edition}),f._uU(4,"edit"),f.qZA(),f.TgZ(5,"mat-icon",15),f.NdJ("click",function(){return f.CHM(t),f.oxw().ajouteFiltre()}),f._uU(6,"add"),f.qZA(),f.qZA()}}function rn(e,n){1&e&&(f.TgZ(0,"mat-icon",16),f._uU(1,"edit"),f.qZA())}function ln(e,n){1&e&&(f.TgZ(0,"mat-icon",17),f._uU(1,"edit"),f.qZA())}function sn(e,n){1&e&&(f.TgZ(0,"mat-icon",18),f._uU(1,"edit"),f.qZA())}function an(e,n){1&e&&(f.TgZ(0,"mat-icon",19),f._uU(1,"edit"),f.qZA())}function un(e,n){if(1&e){var t=f.EpF();f.TgZ(0,"mat-icon",21),f.NdJ("click",function(){f.CHM(t);var e=f.oxw().$implicit;return f.oxw(5).supprMeta(e.key)}),f._uU(1,"delete"),f.qZA()}}function gn(e,n){if(1&e&&(f.TgZ(0,"li"),f._uU(1),f.YNc(2,un,2,0,"mat-icon",20),f.qZA()),2&e){var t=n.$implicit,i=f.oxw(5);f.xp6(1),f.AsE("",t.key," (",t.value,") "),f.xp6(1),f.Q6J("ngIf",i.edition)}}function fn(e,n){if(1&e&&(f.TgZ(0,"ul"),f.YNc(1,gn,3,3,"li",9),f.ALo(2,"keyvalue"),f.qZA()),2&e){var t=f.oxw().$implicit;f.xp6(1),f.Q6J("ngForOf",f.lcZ(2,1,t.value))}}function dn(e,n){if(1&e&&(f.TgZ(0,"span"),f._uU(1),f.qZA()),2&e){var t=f.oxw().$implicit;f.xp6(1),f.hij("(",t.value,")")}}function pn(e,n){if(1&e){var t=f.EpF();f.TgZ(0,"mat-icon",21),f.NdJ("click",function(){f.CHM(t);var e=f.oxw().$implicit;return f.oxw(3).supprMeta(e.key)}),f._uU(1,"delete"),f.qZA()}}function Zn(e,n){if(1&e&&(f.TgZ(0,"li"),f._uU(1),f.YNc(2,fn,3,3,"ul",4),f.YNc(3,dn,2,1,"span",4),f.YNc(4,pn,2,0,"mat-icon",20),f.qZA()),2&e){var t=n.$implicit,i=f.oxw(3);f.xp6(1),f.hij("",t.key," "),f.xp6(1),f.Q6J("ngIf",!t.value.length),f.xp6(1),f.Q6J("ngIf",t.value.length),f.xp6(1),f.Q6J("ngIf",i.edition)}}function hn(e,n){if(1&e&&(f.TgZ(0,"ul"),f.YNc(1,Zn,5,4,"li",9),f.ALo(2,"keyvalue"),f.qZA()),2&e){var t=f.oxw().$implicit;f.xp6(1),f.Q6J("ngForOf",f.lcZ(2,1,t.value))}}function vn(e,n){if(1&e&&(f.TgZ(0,"span"),f._uU(1),f.qZA()),2&e){var t=f.oxw().$implicit;f.xp6(1),f.Oqu(t.value)}}function mn(e,n){if(1&e){var t=f.EpF();f.TgZ(0,"mat-icon",21),f.NdJ("click",function(){f.CHM(t);var e=f.oxw().$implicit;return f.oxw().supprMeta(e.key)}),f._uU(1,"delete"),f.qZA()}}function An(e,n){if(1&e&&(f.TgZ(0,"li"),f._uU(1),f.YNc(2,hn,3,3,"ul",4),f.YNc(3,vn,2,1,"span",4),f.YNc(4,mn,2,0,"mat-icon",20),f.qZA()),2&e){var t=n.$implicit,i=f.oxw();f.xp6(1),f.hij(" ",t.key," : "),f.xp6(1),f.Q6J("ngIf",!t.value.length),f.xp6(1),f.Q6J("ngIf",t.value.length),f.xp6(1),f.Q6J("ngIf",i.edition)}}function qn(e,n){if(1&e){var t=f.EpF();f.TgZ(0,"app-filtre",22),f.NdJ("fermer",function(){return f.CHM(t),f.oxw().masque()}),f.qZA()}if(2&e){var i=f.oxw();f.Q6J("filtre",i.filtre)}}function Tn(e,n){if(1&e){var t=f.EpF();f.TgZ(0,"section",23),f.NdJ("fermer",function(){return f.CHM(t),f.oxw().masque()}),f.TgZ(1,"article"),f.TgZ(2,"h3"),f._uU(3,"Souhaitez-vous supprimer ce filte ?"),f.qZA(),f.TgZ(4,"p"),f._uU(5,"Cette suppression sera d\xe9finitive"),f.qZA(),f.TgZ(6,"button",24),f.NdJ("click",function(){return f.CHM(t),f.oxw().masque()}),f._uU(7,"Annuler"),f.qZA(),f.TgZ(8,"button",25),f.NdJ("click",function(){return f.CHM(t),f.oxw().supprimeFiltre()}),f._uU(9,"Valider"),f.qZA(),f.qZA(),f.qZA()}}var _n=function(){var e=function(){function e(n,i,o){t(this,e),this.filtresServ=n,this.rendu=i,this.tokenServ=o,this.filtreSerie=""}return o(e,[{key:"ngOnInit",value:function(){this.filtre=new $.F,this.edition=!1,this.afficheFiltre=!1}},{key:"filtreOnClick",value:function(e){var n=this;this.filtresServ.filtres.forEach(function(t){t._id==e&&(n.filtre=t)}),console.log(this.filtre)}},{key:"setEdit",value:function(){this.edition=!this.edition}},{key:"supprMeta",value:function(e){console.log("Cl\xe9 \xe0 supprimer")}},{key:"masque",value:function(){this.edition=!1,this.supprime=!1}},{key:"ajouteFiltre",value:function(){this.filtre=new $.F,this.edition=!0}},{key:"supprimeFiltre",value:function(){console.log(this.filtre),this.filtre._id?this.filtresServ.supprimeFiltre(this.filtre._id):this.filtresServ.notif("Merci de s\xe9lectionner un filtre \xe0 supprimer...")}}]),e}();return e.\u0275fac=function(n){return new(n||e)(f.Y36(v.s),f.Y36(f.Qsj),f.Y36(me.B))},e.\u0275cmp=f.Xpm({type:e,selectors:[["app-filtres"]],decls:34,vars:15,consts:[[1,"screen"],[1,"left-panel"],["matTooltip","Ajouter un filtre"],[3,"click",4,"ngFor","ngForOf"],[4,"ngIf"],["matTooltip","Modifier le nom du filtre",4,"ngIf"],["matTooltip","Modifier l'auteur",4,"ngIf"],["matTooltip","Modifier la description du filtre",4,"ngIf"],["matTooltip","Modifier le prefix du filtre (ex. : oai_dc, oai_nema...)",4,"ngIf"],[4,"ngFor","ngForOf"],["class","unique",3,"filtre","fermer",4,"ngIf"],["class","pop-up",3,"fermer",4,"ngIf"],[3,"click"],["matTooltip","Supprimer le filtre",3,"click"],["matTooltip","Modifier le filtre",3,"click"],["matTooltip","Ajouter un filtre",3,"click"],["matTooltip","Modifier le nom du filtre"],["matTooltip","Modifier l'auteur"],["matTooltip","Modifier la description du filtre"],["matTooltip","Modifier le prefix du filtre (ex. : oai_dc, oai_nema...)"],["matTooltip","Supprimer la m\xe9tadonn\xe9e",3,"click",4,"ngIf"],["matTooltip","Supprimer la m\xe9tadonn\xe9e",3,"click"],[1,"unique",3,"filtre","fermer"],[1,"pop-up",3,"fermer"],[1,"invalid",3,"click"],[1,"valid",3,"click"]],template:function(e,n){1&e&&(f.TgZ(0,"section",0),f.TgZ(1,"aside",1),f.TgZ(2,"header"),f.TgZ(3,"h2"),f._uU(4,"Filtres disponibles"),f.qZA(),f.TgZ(5,"mat-icon",2),f._uU(6,"playlist_add"),f.qZA(),f.qZA(),f.TgZ(7,"ul"),f.YNc(8,on,2,2,"li",3),f.qZA(),f.qZA(),f.TgZ(9,"section"),f.TgZ(10,"header"),f.YNc(11,cn,7,0,"div",4),f.TgZ(12,"h2"),f._uU(13,"D\xe9tails sur le filtre"),f.qZA(),f.qZA(),f.TgZ(14,"article"),f.TgZ(15,"h3"),f._uU(16),f.YNc(17,rn,2,0,"mat-icon",5),f.qZA(),f.TgZ(18,"p"),f._uU(19),f.YNc(20,ln,2,0,"mat-icon",6),f.qZA(),f.TgZ(21,"p"),f._uU(22),f.YNc(23,sn,2,0,"mat-icon",7),f.qZA(),f.TgZ(24,"p"),f._uU(25),f.YNc(26,an,2,0,"mat-icon",8),f.qZA(),f.TgZ(27,"h5"),f._uU(28,"M\xe9tadonn\xe9es trait\xe9es par le filtre"),f.qZA(),f.TgZ(29,"ul"),f.YNc(30,An,5,4,"li",9),f.ALo(31,"keyvalue"),f.qZA(),f.qZA(),f.qZA(),f.qZA(),f.YNc(32,qn,1,1,"app-filtre",10),f.YNc(33,Tn,10,0,"section",11)),2&e&&(f.xp6(8),f.Q6J("ngForOf",n.filtresServ.filtres),f.xp6(3),f.Q6J("ngIf",n.tokenServ.statut>=2),f.xp6(5),f.hij("",n.filtre.titre," "),f.xp6(1),f.Q6J("ngIf",n.edition),f.xp6(2),f.hij("Auteur : ",n.filtre.createur," "),f.xp6(1),f.Q6J("ngIf",n.edition),f.xp6(2),f.hij("",n.filtre.description," "),f.xp6(1),f.Q6J("ngIf",n.edition),f.xp6(2),f.hij("",n.filtre.prefix.toString()," "),f.xp6(1),f.Q6J("ngIf",n.edition),f.xp6(4),f.Q6J("ngForOf",f.lcZ(31,13,n.filtre.metadonnees)),f.xp6(2),f.Q6J("ngIf",n.edition),f.xp6(1),f.Q6J("ngIf",n.supprime))},directives:[x.Hw,_.gM,r.sg,r.O5,tn],pipes:[r.Nd],styles:["section.screen[_ngcontent-%COMP%]   section[_ngcontent-%COMP%]{padding:10px 15px}section.screen[_ngcontent-%COMP%]   section[_ngcontent-%COMP%]   header[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]{float:right}.left-panel[_ngcontent-%COMP%]{flex-grow:1;min-width:150px}.left-panel[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]{cursor:pointer;padding:10px;margin-bottom:5px;background:#fff;transition:all .3s ease}.left-panel[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]{margin-top:-5px;float:right}.left-panel[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]:hover{background:grey}.left-panel[_ngcontent-%COMP%] > *[_ngcontent-%COMP%]{width:100%}section.screen[_ngcontent-%COMP%] > section[_ngcontent-%COMP%]{flex-grow:3;min-width:30%}.right-panel[_ngcontent-%COMP%]{flex-grow:4;min-width:40%}.right-panel[_ngcontent-%COMP%]   .notice[_ngcontent-%COMP%]{width:50%}"]}),e}(),xn=c(3461);function Mn(e,n){if(1&e){var t=f.EpF();f.TgZ(0,"li",5),f.NdJ("click",function(){var e=f.CHM(t).$implicit;return f.oxw().selectItem(e.key)}),f._uU(1),f.qZA()}if(2&e){var i=n.$implicit;f.xp6(1),f.AsE(" ",i.key," (ex. : ",i.value,") ")}}function Cn(e,n){if(1&e){var t=f.EpF();f.TgZ(0,"li",6),f._uU(1),f._UZ(2,"br"),f.TgZ(3,"input",7),f.NdJ("ngModelChange",function(e){return n.$implicit[1]=e}),f.qZA(),f.TgZ(4,"mat-icon",8),f.NdJ("click",function(){var e=f.CHM(t).index;return f.oxw().supprime(e)}),f._uU(5,"delete"),f.qZA(),f.qZA()}if(2&e){var i=n.$implicit;f.xp6(1),f.hij(" ",i[0]," : "),f.xp6(2),f.Q6J("ngModel",i[1])}}function On(e,n){if(1&e&&(f.TgZ(0,"li"),f._uU(1),f.qZA()),2&e){var t=n.$implicit;f.xp6(1),f.hij(" ",t[1]," ")}}function kn(e,n){if(1&e){var t=f.EpF();f.TgZ(0,"form",9),f.NdJ("submit",function(){return f.CHM(t),f.oxw().valideFiltre()}),f.TgZ(1,"label",10),f._uU(2,"Titre*"),f.qZA(),f.TgZ(3,"input",11),f.NdJ("ngModelChange",function(e){return f.CHM(t),f.oxw().filtre.titre=e}),f.qZA(),f.TgZ(4,"label",12),f._uU(5,"Alias*"),f.qZA(),f.TgZ(6,"input",13),f.NdJ("ngModelChange",function(e){return f.CHM(t),f.oxw().filtre.alias=e}),f.qZA(),f.TgZ(7,"label",14),f._uU(8,"Description*"),f.qZA(),f.TgZ(9,"input",15),f.NdJ("ngModelChange",function(e){return f.CHM(t),f.oxw().filtre.description=e}),f.qZA(),f.TgZ(10,"label",16),f._uU(11,"Cr\xe9ateur"),f.qZA(),f.TgZ(12,"input",17),f.NdJ("ngModelChange",function(e){return f.CHM(t),f.oxw().filtre.createur=e}),f.qZA(),f.TgZ(13,"label",18),f._uU(14,"Donn\xe9es du filtre"),f.qZA(),f.TgZ(15,"ul"),f.YNc(16,On,2,1,"li",19),f.qZA(),f.TgZ(17,"button"),f._uU(18,"Valider ce filtre"),f.qZA(),f.qZA()}if(2&e){var i=f.oxw();f.xp6(3),f.Q6J("ngModel",i.filtre.titre),f.xp6(3),f.Q6J("ngModel",i.filtre.alias),f.xp6(3),f.Q6J("ngModel",i.filtre.description),f.xp6(3),f.Q6J("ngModel",i.filtre.createur),f.xp6(4),f.Q6J("ngForOf",i.maps)}}var Nn=function(){var n=function(){function n(e,i,o,c){t(this,n),this.mapServ=e,this.utils=i,this.filtreServ=o,this.auth=c,this.maps=[]}return o(n,[{key:"ngOnInit",value:function(){this.filtre=new $.F}},{key:"drop",value:function(e){console.log("Maps",this.maps),(0,xn.bA)(this.maps,e.previousIndex,e.currentIndex)}},{key:"selectItem",value:function(e){this.maps.push([e,e])}},{key:"supprime",value:function(e){this.maps.splice(e,1)}},{key:"valideFiltre",value:function(e){this.filtre.metadonnees=this.triMaps(),this.filtreServ.ajouteFiltre(this.filtre)}},{key:"triMaps",value:function(){var n,t=[],i=e(this.maps);try{for(i.s();!(n=i.n()).done;){var o=n.value;t.push(o[1])}}catch(c){i.e(c)}finally{i.f()}return t}}]),n}();return n.\u0275fac=function(e){return new(e||n)(f.Y36(H),f.Y36(q.F),f.Y36(v.s),f.Y36(m.e))},n.\u0275cmp=f.Xpm({type:n,selectors:[["app-mappages"]],decls:31,vars:5,consts:[[1,"screen"],[3,"click",4,"ngFor","ngForOf"],["cdkDropList","",3,"cdkDropListDropped"],["cdkDrag","",4,"ngFor","ngForOf"],[3,"submit",4,"ngIf"],[3,"click"],["cdkDrag",""],["name","m[0]",3,"ngModel","ngModelChange"],[1,"icone","ferme",3,"click"],[3,"submit"],["for","titre"],["name","titre","placeholder","Saisir un titre","required","",3,"ngModel","ngModelChange"],["for","alias"],["name","alias","placeholder","Saisir un alias","required","","pattern","[a-z0-9-]+",3,"ngModel","ngModelChange"],["for","description"],["name","description","placeholder","Saisir une description","required","",3,"ngModel","ngModelChange"],["for","createur"],["name","createur","placeholder","Saisir un cr\xe9ateur",3,"ngModel","ngModelChange"],["for","donnees"],[4,"ngFor","ngForOf"]],template:function(e,n){1&e&&(f.TgZ(0,"section",0),f.TgZ(1,"aside"),f.TgZ(2,"header"),f.TgZ(3,"h2"),f._uU(4,"Set de donn\xe9es"),f.qZA(),f._UZ(5,"hr"),f.TgZ(6,"p"),f._uU(7,"Set de m\xe9tadonn\xe9es scann\xe9/ Cliquez sur celles que vous souhaitez ajouter \xe0 votre mappage."),f.qZA(),f.qZA(),f.TgZ(8,"article"),f.TgZ(9,"ul"),f.YNc(10,Mn,2,2,"li",1),f.ALo(11,"keyvalue"),f.qZA(),f.qZA(),f.qZA(),f.TgZ(12,"section"),f.TgZ(13,"header"),f.TgZ(14,"h2"),f._uU(15,"Mappage"),f.qZA(),f._UZ(16,"hr"),f.TgZ(17,"p"),f._uU(18,"Modifiez les valeurs des champs s\xe9lectionn\xe9s. Vous pouvez les trier en les faisant glisser."),f.qZA(),f.qZA(),f.TgZ(19,"article"),f.TgZ(20,"ul",2),f.NdJ("cdkDropListDropped",function(e){return n.drop(e)}),f.YNc(21,Cn,6,2,"li",3),f.qZA(),f.qZA(),f.qZA(),f.TgZ(22,"aside"),f.TgZ(23,"header"),f.TgZ(24,"h2"),f._uU(25,"Filtre g\xe9n\xe9r\xe9"),f.qZA(),f._UZ(26,"hr"),f.TgZ(27,"p"),f._uU(28,"Ce filtre, si vous le validez, pourra servir de tri dans les donn\xe9es brutes scann\xe9es sur votre serveur."),f.qZA(),f.qZA(),f.TgZ(29,"article"),f.YNc(30,kn,19,5,"form",4),f.qZA(),f.qZA(),f.qZA()),2&e&&(f.xp6(10),f.Q6J("ngForOf",f.lcZ(11,3,n.mapServ.set)),f.xp6(11),f.Q6J("ngForOf",n.maps),f.xp6(9),f.Q6J("ngIf",n.maps.length>0))},directives:[r.sg,xn.Wj,r.O5,xn.Zt,l.Fj,l.JJ,l.On,x.Hw,l._Y,l.JL,l.F,l.Q7,l.c5],pipes:[r.Nd],styles:["section[_ngcontent-%COMP%] > aside[_ngcontent-%COMP%]:first-child{flex:1;background-color:#6ebada}section[_ngcontent-%COMP%]   header[_ngcontent-%COMP%]{flex-direction:column;padding:0 10px}section[_ngcontent-%COMP%] > section[_ngcontent-%COMP%]{flex:1;background-color:rgba(110,186,218,.5)}section[_ngcontent-%COMP%] > section[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]{display:flex;flex-flow:row nowrap;align-items:center}section[_ngcontent-%COMP%] > aside[_ngcontent-%COMP%]:nth-child(3){flex:1}section[_ngcontent-%COMP%] > aside[_ngcontent-%COMP%]:nth-child(3)   form[_ngcontent-%COMP%]{flex-flow:column wrap}section[_ngcontent-%COMP%] > aside[_ngcontent-%COMP%]:nth-child(3)   hr[_ngcontent-%COMP%]{border-color:#ccc}ul[_ngcontent-%COMP%]{border:1px dashed #fff;padding:10px}ul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]{list-style:none}"]}),n}(),Sn=function(){var e=function(){function e(){t(this,e)}return o(e,[{key:"ngOnInit",value:function(){}}]),e}();return e.\u0275fac=function(n){return new(n||e)},e.\u0275cmp=f.Xpm({type:e,selectors:[["app-mappage"]],decls:2,vars:0,template:function(e,n){1&e&&(f.TgZ(0,"p"),f._uU(1," mappage works!\n"),f.qZA())},styles:[""]}),e}();function yn(e,n){if(1&e&&(f.TgZ(0,"li"),f._uU(1),f.qZA()),2&e){var t=n.$implicit;f.xp6(1),f.AsE(" ",t.titre," (",t.alias,") ")}}function Un(e,n){if(1&e&&(f.TgZ(0,"li"),f.TgZ(1,"strong"),f._uU(2),f.qZA(),f._uU(3),f.qZA()),2&e){var t=n.$implicit;f.xp6(2),f.Oqu(t.key),f.xp6(1),f.hij(" : ",t.value," ")}}function Jn(e,n){if(1&e&&(f.TgZ(0,"article"),f.TgZ(1,"ul"),f.YNc(2,Un,4,2,"li",2),f.ALo(3,"keyvalue"),f.qZA(),f.qZA()),2&e){var t=f.oxw();f.xp6(2),f.Q6J("ngForOf",f.lcZ(3,1,t.collec))}}function bn(e,n){if(1&e&&(f.TgZ(0,"li"),f._uU(1),f.qZA()),2&e){var t=n.$implicit;f.xp6(1),f.hij(" ",t," ")}}function wn(e,n){if(1&e&&(f.TgZ(0,"article"),f.TgZ(1,"h3"),f._uU(2,"S\xe9ries de la collection"),f.qZA(),f.TgZ(3,"ul"),f.YNc(4,bn,2,1,"li",2),f.qZA(),f.qZA()),2&e){var t=f.oxw();f.xp6(4),f.Q6J("ngForOf",t.noticesServ.seriesCollec)}}function Pn(e,n){if(1&e&&(f.TgZ(0,"li",6),f.TgZ(1,"div"),f._UZ(2,"div"),f.qZA(),f.TgZ(3,"div"),f.TgZ(4,"h3"),f._uU(5),f.qZA(),f.TgZ(6,"p"),f._uU(7),f.qZA(),f.qZA(),f.qZA()),2&e){var t=n.$implicit;f.xp6(1),f.Udp("background-image","url("+t.fichier.url+")"),f.xp6(4),f.Oqu(t.titre),f.xp6(2),f.Oqu(t.description)}}var Fn=function(){var e=function(){function e(n,i){t(this,e),this.colServ=n,this.noticesServ=i}return o(e,[{key:"ngOnInit",value:function(){}}]),e}();return e.\u0275fac=function(n){return new(n||e)(f.Y36(u.a),f.Y36(Z))},e.\u0275cmp=f.Xpm({type:e,selectors:[["app-accueil"]],decls:21,vars:4,consts:[[1,"screen","triple"],[1,"left-panel"],[4,"ngFor","ngForOf"],[4,"ngIf"],[1,"notice-liste"],["class","notice",4,"ngFor","ngForOf"],[1,"notice"]],template:function(e,n){1&e&&(f.TgZ(0,"section",0),f.TgZ(1,"aside",1),f.TgZ(2,"header"),f.TgZ(3,"h2"),f._uU(4,"Nouvelles collections"),f.qZA(),f.qZA(),f.TgZ(5,"ul"),f.YNc(6,yn,2,2,"li",2),f.qZA(),f.qZA(),f.TgZ(7,"section"),f.TgZ(8,"header"),f._UZ(9,"div"),f.TgZ(10,"h2"),f._uU(11,"Nouveaux sets"),f.qZA(),f.qZA(),f.YNc(12,Jn,4,3,"article",3),f.YNc(13,wn,5,1,"article",3),f.qZA(),f.TgZ(14,"aside"),f.TgZ(15,"section"),f.TgZ(16,"header"),f.TgZ(17,"h2"),f._uU(18,"Nouvelles notices"),f.qZA(),f.qZA(),f.TgZ(19,"ul",4),f.YNc(20,Pn,8,4,"li",5),f.qZA(),f.qZA(),f.qZA(),f.qZA()),2&e&&(f.xp6(6),f.Q6J("ngForOf",n.colServ.collections),f.xp6(6),f.Q6J("ngIf",n.collec),f.xp6(1),f.Q6J("ngIf",n.noticesServ.seriesCollec.length>0),f.xp6(7),f.Q6J("ngForOf",n.noticesServ.noticesCollec))},directives:[r.sg,r.O5],pipes:[r.Nd],styles:["section.screen[_ngcontent-%COMP%]   section[_ngcontent-%COMP%]{padding:10px 15px;background-color:#96a94b8a}section.screen[_ngcontent-%COMP%]   section[_ngcontent-%COMP%]   header[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]{float:right}aside[_ngcontent-%COMP%]:first-child{background-color:#96a94b;flex-grow:1;min-width:150px}*\r\n\r\naside[_ngcontent-%COMP%]:first-child   ul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]{cursor:pointer;padding:10px;margin-bottom:5px;background:#fff;transition:all .3s ease}aside[_ngcontent-%COMP%]:first-child   ul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]{margin-top:-5px;float:right}aside[_ngcontent-%COMP%]:first-child   ul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]:hover{background:grey}aside[_ngcontent-%COMP%]:first-child > *[_ngcontent-%COMP%]{width:100%}section.screen[_ngcontent-%COMP%] > section[_ngcontent-%COMP%]{flex-grow:3;min-width:30%}aside[_ngcontent-%COMP%]:nth-child(3){flex-grow:4;min-width:40%;background-color:#96a94b2c;padding:0}aside[_ngcontent-%COMP%]:nth-child(3)   .notice[_ngcontent-%COMP%]{width:50%}aside[_ngcontent-%COMP%]:nth-child(3)   section[_ngcontent-%COMP%], aside[_ngcontent-%COMP%]:nth-child(3)   ul[_ngcontent-%COMP%]{padding:0;margin:0}"]}),e}();function Qn(e,n){1&e&&(f.TgZ(0,"button"),f._uU(1,"Enregistrer"),f.qZA())}function Yn(e,n){if(1&e&&(f.TgZ(0,"li"),f._uU(1),f.qZA()),2&e){var t=n.$implicit;f.xp6(1),f.AsE(" ",t.key," : ",t.value," ... ")}}var In=function(){var e=function(){function e(n){t(this,e),this.uServ=n}return o(e,[{key:"ngOnInit",value:function(){this.env=g.N}}]),e}();return e.\u0275fac=function(n){return new(n||e)(f.Y36(m.e))},e.\u0275cmp=f.Xpm({type:e,selectors:[["app-parametres"]],decls:19,vars:5,consts:[[1,"screen","triple"],["name","serv",3,"ngModel","ngModelChange"],["ctlServ","ngModel"],[4,"ngIf"],[4,"ngFor","ngForOf"]],template:function(e,n){if(1&e&&(f.TgZ(0,"section",0),f.TgZ(1,"aside"),f.TgZ(2,"h2"),f._uU(3,"Param\xe8tres"),f.qZA(),f.qZA(),f.TgZ(4,"section"),f.TgZ(5,"h2"),f._uU(6,"Serveur de donn\xe9es"),f.qZA(),f.TgZ(7,"p"),f._uU(8,"Adresse de la base de donn\xe9es :"),f.qZA(),f.TgZ(9,"input",1,2),f.NdJ("ngModelChange",function(e){return n.env.SERV=e}),f.qZA(),f.YNc(11,Qn,2,0,"button",3),f._UZ(12,"p"),f.qZA(),f.TgZ(13,"aside"),f.TgZ(14,"h2"),f._uU(15,"Votre profil"),f.qZA(),f.TgZ(16,"ul"),f.YNc(17,Yn,2,2,"li",4),f.ALo(18,"keyvalue"),f.qZA(),f.qZA(),f.qZA()),2&e){var t=f.MAs(10);f.xp6(9),f.Q6J("ngModel",n.env.SERV),f.xp6(2),f.Q6J("ngIf",t.touched),f.xp6(6),f.Q6J("ngForOf",f.lcZ(18,3,n.uServ.userAuth))}},directives:[l.Fj,l.JJ,l.On,r.O5,r.sg],pipes:[r.Nd],styles:["section.triple[_ngcontent-%COMP%] > section[_ngcontent-%COMP%]{width:35vw}section.triple[_ngcontent-%COMP%] > aside[_ngcontent-%COMP%]:first-child{width:30vw}section.triple[_ngcontent-%COMP%] > aside[_ngcontent-%COMP%]:nth-child(3){width:35vw}section.screen[_ngcontent-%COMP%]   section[_ngcontent-%COMP%]{padding:10px 15px}section.screen[_ngcontent-%COMP%]   section[_ngcontent-%COMP%]   header[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]{float:right}aside[_ngcontent-%COMP%]:first-child{background-color:#f06060;flex-grow:1;min-width:150px;color:#fff}*[_ngcontent-%COMP%]   aside[_ngcontent-%COMP%]:first-child   ul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]{cursor:pointer;padding:10px;margin-bottom:5px;background:#fff;transition:all .3s ease}aside[_ngcontent-%COMP%]:first-child   ul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]{margin-top:-5px;float:right}aside[_ngcontent-%COMP%]:first-child   ul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]:hover{background:grey}aside[_ngcontent-%COMP%]:first-child > *[_ngcontent-%COMP%]{width:100%}section.screen[_ngcontent-%COMP%] > *[_ngcontent-%COMP%]{flex-grow:1}aside[_ngcontent-%COMP%]:nth-child(3){flex-grow:1;background-color:#f060607a;padding:0}aside[_ngcontent-%COMP%]:nth-child(3)   section[_ngcontent-%COMP%], aside[_ngcontent-%COMP%]:nth-child(3)   ul[_ngcontent-%COMP%]{padding:0;margin:0}"]}),e}();function En(e,n){if(1&e&&(f.TgZ(0,"mat-checkbox",20),f._uU(1),f.qZA()),2&e){var t=n.$implicit;f.Q6J("value",t.alias),f.xp6(1),f.Oqu(t.titre)}}var Ln=function(){var e=function(){function e(n,i,o){t(this,e),this.setsServ=n,this.filtreServ=i,this.auth=o,this.fermer=new f.vpe}return o(e,[{key:"ngOnInit",value:function(){}}]),e}();return e.\u0275fac=function(n){return new(n||e)(f.Y36(A),f.Y36(v.s),f.Y36(m.e))},e.\u0275cmp=f.Xpm({type:e,selectors:[["app-set"]],inputs:{set:"set"},outputs:{fermer:"fermer"},decls:41,vars:9,consts:[[1,"unique"],[3,"click"],["for","titre"],["name","titre","required","",3,"ngModel","ngModelChange"],["for","alias"],["name","alias","required","","pattern","[a-z0-9-]+",3,"ngModel","ngModelChange"],["for","description"],["mat-input","","name","description",3,"ngModel","ngModelChange"],["for","fonds"],["name","fonds","required","",3,"ngModel","ngModelChange"],["for","date"],["name","date","required","",3,"ngModel","ngModelChange"],["for","createur"],["name","createur",3,"ngModel","ngModelChange"],["for","gest"],["name","gest",3,"ngModel","ngModelChange"],["for","prefix"],["checked","",3,"value",4,"ngFor","ngForOf"],[1,"invalid",3,"click"],[1,"valid",3,"click"],["checked","",3,"value"]],template:function(e,n){1&e&&(f.TgZ(0,"section",0),f.TgZ(1,"header"),f.TgZ(2,"h3"),f._uU(3,"Informations sur la set "),f.TgZ(4,"mat-icon",1),f.NdJ("click",function(){return n.fermer.emit(!1)}),f._uU(5,"close"),f.qZA(),f.qZA(),f.TgZ(6,"h2"),f._uU(7),f.qZA(),f.qZA(),f.TgZ(8,"form"),f.TgZ(9,"section"),f.TgZ(10,"label",2),f._uU(11,"Titre"),f.qZA(),f.TgZ(12,"input",3),f.NdJ("ngModelChange",function(e){return n.set.titre=e}),f.qZA(),f.TgZ(13,"label",4),f._uU(14,"Alias"),f.qZA(),f.TgZ(15,"input",5),f.NdJ("ngModelChange",function(e){return n.set.alias=e}),f.qZA(),f.TgZ(16,"label",6),f._uU(17,"Description"),f.qZA(),f.TgZ(18,"textarea",7),f.NdJ("ngModelChange",function(e){return n.set.description=e}),f._uU(19,"            "),f.qZA(),f.TgZ(20,"label",8),f._uU(21,"Fonds"),f.qZA(),f.TgZ(22,"input",9),f.NdJ("ngModelChange",function(e){return n.set.fonds=e}),f.qZA(),f.TgZ(23,"label",10),f._uU(24,"Date de cr\xe9ation"),f.qZA(),f.TgZ(25,"input",11),f.NdJ("ngModelChange",function(e){return n.set.date=e}),f.qZA(),f.TgZ(26,"label",12),f._uU(27,"Createur"),f.qZA(),f.TgZ(28,"input",13),f.NdJ("ngModelChange",function(e){return n.set.createur=e}),f.qZA(),f.TgZ(29,"label",14),f._uU(30,"Gestionnaire"),f.qZA(),f.TgZ(31,"input",15),f.NdJ("ngModelChange",function(e){return n.set.gestionnaire=e}),f.qZA(),f.TgZ(32,"label",16),f._uU(33,"Prefix"),f.qZA(),f.YNc(34,En,2,2,"mat-checkbox",17),f._UZ(35,"hr"),f.TgZ(36,"p"),f.TgZ(37,"button",18),f.NdJ("click",function(){return n.fermer.emit(!1)}),f._uU(38,"Annuler"),f.qZA(),f.TgZ(39,"button",19),f.NdJ("click",function(){return n.setsServ.majSet(n.set),n.fermer.emit(!1)}),f._uU(40,"Valider"),f.qZA(),f.qZA(),f.qZA(),f.qZA(),f.qZA()),2&e&&(f.xp6(7),f.Oqu(n.set.titre),f.xp6(5),f.Q6J("ngModel",n.set.titre),f.xp6(3),f.Q6J("ngModel",n.set.alias),f.xp6(3),f.Q6J("ngModel",n.set.description),f.xp6(4),f.Q6J("ngModel",n.set.fonds),f.xp6(3),f.Q6J("ngModel",n.set.date),f.xp6(3),f.Q6J("ngModel",n.set.createur),f.xp6(3),f.Q6J("ngModel",n.set.gestionnaire),f.xp6(3),f.Q6J("ngForOf",n.filtreServ.prefix))},directives:[x.Hw,l._Y,l.JL,l.F,l.Fj,l.Q7,l.JJ,l.On,l.c5,r.sg,Ke.oG],styles:[""]}),e}();function jn(e,n){if(1&e){var t=f.EpF();f.TgZ(0,"li",8),f.NdJ("click",function(){var e=f.CHM(t).$implicit;return f.oxw().setOnClick(e._id)}),f._uU(1),f.qZA()}if(2&e){var i=n.$implicit;f.xp6(1),f.AsE(" ",i.titre," (fonds : ",i.fonds,") ")}}function $n(e,n){if(1&e&&(f.TgZ(0,"li"),f.TgZ(1,"strong"),f._uU(2),f.qZA(),f._uU(3),f.qZA()),2&e){var t=f.oxw().$implicit;f.xp6(2),f.Oqu(t.key),f.xp6(1),f.hij(" : ",t.value," ")}}function Hn(e,n){if(1&e&&(f.TgZ(0,"span"),f.YNc(1,$n,4,2,"li",3),f.qZA()),2&e){var t=n.$implicit,i=f.oxw(3);f.xp6(1),f.Q6J("ngIf",i.getDocs(t.key))}}function Dn(e,n){if(1&e&&(f.TgZ(0,"article"),f.TgZ(1,"ul"),f.YNc(2,Hn,2,1,"span",11),f.ALo(3,"keyvalue"),f.qZA(),f.qZA()),2&e){var t=f.oxw(2);f.xp6(2),f.Q6J("ngForOf",f.lcZ(3,1,t.setsServ.set))}}function zn(e,n){1&e&&f._UZ(0,"span")}function Vn(e,n){if(1&e&&(f.TgZ(0,"li"),f.TgZ(1,"strong"),f._uU(2),f.qZA(),f.qZA()),2&e){var t=n.$implicit;f.xp6(2),f.Oqu(t.key)}}function Rn(e,n){if(1&e&&(f.YNc(0,Vn,3,1,"li",11),f.ALo(1,"keyvalue")),2&e){var t=f.oxw().$implicit;f.Q6J("ngForOf",f.lcZ(1,1,t.value))}}function Bn(e,n){if(1&e&&(f.TgZ(0,"span"),f.YNc(1,zn,1,0,"span",13),f.YNc(2,Rn,2,3,"ng-template",null,14,f.W1O),f.qZA()),2&e){var t=n.$implicit,i=f.MAs(3),o=f.oxw(3);f.xp6(1),f.Q6J("ngIf","object"!==o.utils.typeOf(t.value))("ngIfElse",i)}}function Xn(e,n){if(1&e&&(f.TgZ(0,"mat-expansion-panel"),f.TgZ(1,"mat-expansion-panel-header"),f.TgZ(2,"mat-panel-title"),f._uU(3),f.qZA(),f.qZA(),f.TgZ(4,"ul"),f.YNc(5,Bn,4,2,"span",11),f.ALo(6,"keyvalue"),f.qZA(),f.qZA()),2&e){var t=n.$implicit;f.xp6(3),f.hij(" ",t.key," "),f.xp6(2),f.Q6J("ngForOf",f.lcZ(6,2,t))}}function Gn(e,n){if(1&e){var t=f.EpF();f.TgZ(0,"div"),f.TgZ(1,"header"),f.TgZ(2,"div"),f.TgZ(3,"mat-icon",9),f.NdJ("click",function(){return f.CHM(t),f.oxw().delete=!0}),f._uU(4,"delete"),f.qZA(),f.TgZ(5,"mat-icon",10),f.NdJ("click",function(){return f.CHM(t),f.oxw().edit=!0}),f._uU(6,"edit"),f.qZA(),f.qZA(),f.TgZ(7,"h2"),f._uU(8,"Informations sur le SET s\xe9lectionn\xe9"),f.qZA(),f.qZA(),f.YNc(9,Dn,4,3,"article",3),f.TgZ(10,"article"),f.TgZ(11,"mat-accordion"),f.YNc(12,Xn,7,4,"mat-expansion-panel",11),f.ALo(13,"keyvalue"),f.qZA(),f.qZA(),f.TgZ(14,"p",12),f.TgZ(15,"button",8),f.NdJ("click",function(){return f.CHM(t),f.oxw().afficheDocs=!0}),f._uU(16,"Afficher les documents du SET"),f.qZA(),f.TgZ(17,"button",8),f.NdJ("click",function(){return f.CHM(t),f.oxw().creeCollec=!0}),f._uU(18,"Cr\xe9er une collection \xe0 partir de ce SET"),f.qZA(),f.qZA(),f.qZA()}if(2&e){var i=f.oxw();f.xp6(9),f.Q6J("ngIf",i.setsServ.set),f.xp6(3),f.Q6J("ngForOf",f.lcZ(13,2,i.setsServ.set.documents[0]))}}function Wn(e,n){if(1&e&&(f.TgZ(0,"span"),f.TgZ(1,"strong"),f._uU(2),f.qZA(),f._uU(3),f.qZA()),2&e){var t=f.oxw(2).$implicit;f.xp6(2),f.Oqu(t.key),f.xp6(1),f.hij(" : ",t.value," ")}}function Kn(e,n){if(1&e&&(f.TgZ(0,"li"),f.TgZ(1,"strong"),f._uU(2),f.qZA(),f._uU(3),f.qZA()),2&e){var t=f.oxw().$implicit;f.xp6(2),f.Oqu(t.key),f.xp6(1),f.hij(" : ",t.value," ")}}function et(e,n){if(1&e&&(f.TgZ(0,"span"),f.YNc(1,Kn,4,2,"li",3),f.qZA()),2&e){var t=n.$implicit;f.xp6(1),f.Q6J("ngIf",t.value)}}function nt(e,n){if(1&e&&(f.TgZ(0,"ul"),f.YNc(1,et,2,1,"span",11),f.ALo(2,"keyvalue"),f.qZA()),2&e){var t=f.oxw(2).$implicit;f.xp6(1),f.Q6J("ngForOf",f.lcZ(2,1,t.value))}}function tt(e,n){if(1&e&&(f.TgZ(0,"li"),f.YNc(1,Wn,4,2,"span",13),f.YNc(2,nt,3,3,"ng-template",null,14,f.W1O),f.qZA()),2&e){var t=f.MAs(3),i=f.oxw().$implicit,o=f.oxw(5);f.xp6(1),f.Q6J("ngIf","object"!==o.utils.typeOf(i.value))("ngIfElse",t)}}function it(e,n){if(1&e&&(f.TgZ(0,"span"),f.YNc(1,tt,4,2,"li",3),f.qZA()),2&e){var t=n.$implicit;f.xp6(1),f.Q6J("ngIf",t.value)}}function ot(e,n){if(1&e&&(f.TgZ(0,"li"),f.TgZ(1,"strong"),f._uU(2),f.qZA(),f.TgZ(3,"ul"),f.YNc(4,it,2,1,"span",11),f.ALo(5,"keyvalue"),f.qZA(),f.qZA()),2&e){var t=n.$implicit;f.xp6(2),f.Oqu(t.key),f.xp6(2),f.Q6J("ngForOf",f.lcZ(5,2,t.value))}}function ct(e,n){if(1&e&&(f.TgZ(0,"mat-expansion-panel"),f.TgZ(1,"mat-expansion-panel-header"),f.TgZ(2,"mat-panel-title"),f._uU(3),f.qZA(),f.qZA(),f.TgZ(4,"ul"),f.YNc(5,ot,6,4,"li",11),f.ALo(6,"keyvalue"),f.qZA(),f.qZA()),2&e){var t=n.$implicit,i=n.index;f.xp6(3),f.AsE(" ",i," : ",t.dublincore.title," "),f.xp6(2),f.Q6J("ngForOf",f.lcZ(6,3,t))}}function rt(e,n){if(1&e&&(f.TgZ(0,"mat-accordion"),f.YNc(1,ct,7,5,"mat-expansion-panel",11),f.qZA()),2&e){var t=f.oxw(2);f.xp6(1),f.Q6J("ngForOf",t.miniDocs)}}function lt(e,n){if(1&e){var t=f.EpF();f.TgZ(0,"div",17),f.TgZ(1,"button",18),f.NdJ("click",function(){return f.CHM(t),f.oxw(2).pagine(-20)}),f._uU(2,"<"),f.qZA(),f.TgZ(3,"button",18),f.NdJ("click",function(){return f.CHM(t),f.oxw(2).pagine(20)}),f._uU(4,">"),f.qZA(),f.qZA()}if(2&e){var i=f.oxw(2);f.xp6(1),f.Q6J("disabled",i.page.min<20),f.xp6(2),f.Q6J("disabled",i.page.max>i.setsServ.set.documents.length-20)}}function st(e,n){if(1&e&&(f.TgZ(0,"section",15),f.TgZ(1,"article"),f.YNc(2,rt,2,1,"mat-accordion",3),f._UZ(3,"hr"),f.YNc(4,lt,5,2,"div",16),f.qZA(),f.qZA()),2&e){var t=f.oxw();f.xp6(2),f.Q6J("ngIf",t.setsServ.set),f.xp6(2),f.Q6J("ngIf",t.setsServ.set)}}function at(e,n){if(1&e){var t=f.EpF();f.TgZ(0,"section",19),f.TgZ(1,"article"),f.TgZ(2,"h2"),f._uU(3,"Etes-vous s\xfbr.e ?"),f.qZA(),f.TgZ(4,"p"),f.TgZ(5,"mat-icon",20),f.NdJ("click",function(){return f.CHM(t),f.oxw().delete=!1}),f._uU(6,"cancel"),f.qZA(),f.TgZ(7,"mat-icon",21),f.NdJ("click",function(){f.CHM(t);var e=f.oxw();return e.setsServ.supprSet(e.setsServ.set._id),e.delete=!1}),f._uU(8,"check_circle"),f.qZA(),f.qZA(),f.qZA(),f.qZA()}}function ut(e,n){if(1&e){var t=f.EpF();f.TgZ(0,"app-set",22),f.NdJ("fermer",function(){return f.CHM(t),f.oxw().masque()}),f.qZA()}if(2&e){var i=f.oxw();f.Q6J("set",i.setsServ.set)}}function gt(e,n){if(1&e){var t=f.EpF();f.TgZ(0,"app-collection",23),f.NdJ("fermer",function(){return f.CHM(t),f.oxw().masque()}),f.qZA()}2&e&&f.Q6J("idCollection",-1)}var ft,dt,pt,Zt=[{path:"",component:C,children:[{path:"",component:Fn},{path:"notices",component:Qe},{path:"notice/:id",component:j},{path:"collections",component:We},{path:"scanner",component:Ze},{path:"mappages",component:Nn},{path:"mappage/:id",component:Sn},{path:"filtres",component:_n},{path:"filtre/:id",component:_n},{path:"sets",component:(dt=function(){function e(n,i,o){t(this,e),this.setsServ=n,this.utils=i,this.auth=o,this.afficheDocs=!1,this.creeCollec=!1,this.delete=!1,this.edit=!1}return o(e,[{key:"ngOnInit",value:function(){this.page={min:0,max:20}}},{key:"setOnClick",value:function(e){this.idSet=e,this.setsServ.getSet(e),this.afficheDocs=!1,this.setMiniDocs()}},{key:"setMiniDocs",value:function(){this.miniDocs=this.utils.tronqueTab(this.setsServ.set.documents,this.page),console.log(this.miniDocs)}},{key:"getDocs",value:function(e){return"documents"!=e}},{key:"masque",value:function(){this.edit=!1,this.delete=!1,this.idSet=null,this.creeCollec=!1}},{key:"pagine",value:function(e){this.page.min+=e,this.page.max+=e,console.log(this.page),this.setMiniDocs()}}]),e}(),dt.\u0275fac=function(e){return new(e||dt)(f.Y36(A),f.Y36(q.F),f.Y36(m.e))},dt.\u0275cmp=f.Xpm({type:dt,selectors:[["app-sets"]],decls:16,vars:6,consts:[[1,"screen","triple"],[1,"left-panel"],[3,"click",4,"ngFor","ngForOf"],[4,"ngIf"],["class","selection",4,"ngIf"],["class","pop-up",4,"ngIf"],["class","unique",3,"set","fermer",4,"ngIf"],["class","unique",3,"idCollection","fermer",4,"ngIf"],[3,"click"],["matTooltip","Supprimer le SET",3,"click"],["matTooltip","Modifier le SET",3,"click"],[4,"ngFor","ngForOf"],[1,"flex","justify-around"],[4,"ngIf","ngIfElse"],["elseObjM",""],[1,"selection"],["class","flex justify-center",4,"ngIf"],[1,"flex","justify-center"],[3,"disabled","click"],[1,"pop-up"],["matTooltip","Annuler la destruction",1,"grand",3,"click"],["matTooltip","Valider la destruction",1,"grand","vert",3,"click"],[1,"unique",3,"set","fermer"],[1,"unique",3,"idCollection","fermer"]],template:function(e,n){1&e&&(f.TgZ(0,"section",0),f.TgZ(1,"aside",1),f.TgZ(2,"header"),f.TgZ(3,"h1"),f._uU(4,"SETS disponibles"),f.qZA(),f.TgZ(5,"p"),f._uU(6,"S\xe9lectionnez un SET pour avoir ses informations."),f.qZA(),f.qZA(),f.TgZ(7,"ul"),f.YNc(8,jn,2,2,"li",2),f.qZA(),f.qZA(),f.TgZ(9,"section"),f.YNc(10,Gn,19,4,"div",3),f.qZA(),f.TgZ(11,"aside"),f.YNc(12,st,5,2,"section",4),f.qZA(),f.qZA(),f.YNc(13,at,9,0,"section",5),f.YNc(14,ut,1,1,"app-set",6),f.YNc(15,gt,1,1,"app-collection",7)),2&e&&(f.xp6(8),f.Q6J("ngForOf",n.setsServ.sets),f.xp6(2),f.Q6J("ngIf",n.setsServ.set),f.xp6(2),f.Q6J("ngIf",n.afficheDocs),f.xp6(1),f.Q6J("ngIf",n.delete),f.xp6(1),f.Q6J("ngIf",n.edit),f.xp6(1),f.Q6J("ngIf",n.creeCollec))},directives:[r.sg,r.O5,x.Hw,_.gM,D.pp,D.ib,D.yz,D.yK,Ln,Oe],pipes:[r.Nd],styles:["section[_ngcontent-%COMP%]:nth-child(2){flex-grow:4;min-width:30%;background-color:rgba(235,151,78,.5);padding:0}aside[_ngcontent-%COMP%]:first-child{background-color:#eb974e}aside[_ngcontent-%COMP%]:nth-child(3){border-right:10px solid rgba(235,151,78,.5)}"]}),dt)},{path:"set/:id",component:Ln},{path:"parametres",component:In},{path:"profil",component:(ft=function(){function e(){t(this,e)}return o(e,[{key:"ngOnInit",value:function(){}}]),e}(),ft.\u0275fac=function(e){return new(e||ft)},ft.\u0275cmp=f.Xpm({type:ft,selectors:[["app-profil"]],decls:2,vars:0,template:function(e,n){1&e&&(f.TgZ(0,"p"),f._uU(1,"profil works!"),f.qZA())},styles:[""]}),ft)},{path:"aide",loadChildren:function(){return c.e(545).then(c.bind(c,2545)).then(function(e){return e.AideModule})}}]}],ht=function(){var e=function e(){t(this,e)};return e.\u0275fac=function(n){return new(n||e)},e.\u0275mod=f.oAB({type:e}),e.\u0275inj=f.cJS({imports:[[a.Bz.forChild(Zt)],a.Bz]}),e}(),vt=c(6799),mt=((pt=function e(){t(this,e)}).\u0275fac=function(e){return new(e||pt)},pt.\u0275mod=f.oAB({type:pt}),pt.\u0275inj=f.cJS({providers:[Z,u.a,q.F,v.s,H,vt.g,T,ve],imports:[[r.ez,ht,s.q,l.u5,l.UX]]}),pt)},3192:function(e,n,i){"use strict";i.d(n,{F:function(){return r}});var c=i(7716),r=function(){var e=function(){function e(){t(this,e),this.params={limite:20,langue:"fr_FR"},this.limite=30}return o(e,[{key:"typeOf",value:function(e){return Array.isArray(e)?"array":typeof e}},{key:"tronqueTab",value:function(e,n){return e.slice(n.min,n.max)}},{key:"getObj",value:function(e){return"object"!=typeof e}},{key:"setFormat",value:function(e){switch(console.log(e),e){case"mp3":case"oga":case"ogg":case"aac":return"audio/"+e;case"wav":return"audio/x-wav";case"mp4":case"webm":case"ogv":case"vba":return"video/"+e;case"rtf":case"pdf":return"application/"+e;case"jpg":case"jpeg":case"gif":case"png":case"webp":return"image/"+e;default:return!1}}},{key:"setNoticeBg",value:function(e){var n,t=e.metadonnees.dublincore.format;return n=!t||-1==t.indexOf("video")&&-1==t.indexOf("audio")?t&&-1!=t.indexOf("application")?"assets/img/pictos/picto_docs.png":e.metadonnees.media.url:e.metadonnees.dublincore.coverage?e.metadonnees.dublincore.coverage:"assets/img/pictos/picto_media.png",'url("'.concat(n,'")')}},{key:"play",value:function(e){if(e.currentTarget.previousElementSibling){var n=e.currentTarget.previousElementSibling;-1==n.tagName.indexOf("VIDEO")&&-1==n.tagName.indexOf("AUDIO")||n.play()}}},{key:"pause",value:function(e){if(e.currentTarget.previousElementSibling){var n=e.currentTarget.previousElementSibling;-1==n.tagName.indexOf("VIDEO")&&-1==n.tagName.indexOf("AUDIO")||n.pause()}}}]),e}();return e.\u0275fac=function(n){return new(n||e)},e.\u0275prov=c.Yz7({token:e,factory:e.\u0275fac,providedIn:"root"}),e}()}}])}();